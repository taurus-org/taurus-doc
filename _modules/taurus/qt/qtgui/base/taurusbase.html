

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>taurus.qt.qtgui.base.taurusbase &mdash; taurus 4.1.2-alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../../search.html"/>
    <link rel="top" title="taurus 4.1.2-alpha documentation" href="../../../../../index.html"/>
        <link rel="up" title="Module code" href="../../../../index.html"/> 

  
  <script src="../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../index.html" class="icon icon-home"> taurus
          

          
            
            <img src="../../../../../_static/taurus.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference external" href="http://www.taurus-scada.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/taurus-org/taurus">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/taurus">Download from PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs.html">Taurus 4.1 documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../../index.html">taurus</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
      
    <li>taurus.qt.qtgui.base.taurusbase</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for taurus.qt.qtgui.base.taurusbase</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1">#############################################################################</span>
<span class="c1">##</span>
<span class="c1"># This file is part of Taurus</span>
<span class="c1">##</span>
<span class="c1"># http://taurus-scada.org</span>
<span class="c1">##</span>
<span class="c1"># Copyright 2011 CELLS / ALBA Synchrotron, Bellaterra, Spain</span>
<span class="c1">##</span>
<span class="c1"># Taurus is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU Lesser General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">##</span>
<span class="c1"># Taurus is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU Lesser General Public License for more details.</span>
<span class="c1">##</span>
<span class="c1"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c1"># along with Taurus.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">##</span>
<span class="c1">#############################################################################</span>

<span class="sd">&quot;&quot;&quot;This module provides the set of base classes from which the Qt taurus widgets</span>
<span class="sd">should inherit to be considered valid taurus widgets.&quot;&quot;&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;TaurusBaseComponent&quot;</span><span class="p">,</span> <span class="s2">&quot;TaurusBaseWidget&quot;</span><span class="p">,</span>
           <span class="s2">&quot;TaurusBaseWritableWidget&quot;</span><span class="p">,</span> <span class="s2">&quot;defaultFormatter&quot;</span><span class="p">]</span>

<span class="n">__docformat__</span> <span class="o">=</span> <span class="s1">&#39;restructuredtext&#39;</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="k">import</span> <span class="n">MethodType</span>

<span class="kn">from</span> <span class="nn">taurus.external.qt</span> <span class="k">import</span> <span class="n">Qt</span>
<span class="kn">from</span> <span class="nn">taurus.external.enum</span> <span class="k">import</span> <span class="n">Enum</span>

<span class="kn">import</span> <span class="nn">taurus</span>
<span class="kn">from</span> <span class="nn">taurus.core.util</span> <span class="k">import</span> <span class="n">eventfilters</span>
<span class="kn">from</span> <span class="nn">taurus.core.util.timer</span> <span class="k">import</span> <span class="n">Timer</span>
<span class="kn">from</span> <span class="nn">taurus.core.taurusbasetypes</span> <span class="k">import</span> <span class="n">TaurusElementType</span><span class="p">,</span> <span class="n">TaurusEventType</span>
<span class="kn">from</span> <span class="nn">taurus.core.taurusattribute</span> <span class="k">import</span> <span class="n">TaurusAttribute</span>
<span class="kn">from</span> <span class="nn">taurus.core.taurusdevice</span> <span class="k">import</span> <span class="n">TaurusDevice</span>
<span class="kn">from</span> <span class="nn">taurus.core.taurusconfiguration</span> <span class="k">import</span> <span class="p">(</span><span class="n">TaurusConfiguration</span><span class="p">,</span>
                                             <span class="n">TaurusConfigurationProxy</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">taurus.core.tauruslistener</span> <span class="k">import</span> <span class="n">TaurusListener</span><span class="p">,</span> <span class="n">TaurusExceptionListener</span>
<span class="kn">from</span> <span class="nn">taurus.core.taurusoperation</span> <span class="k">import</span> <span class="n">WriteAttrOperation</span>
<span class="kn">from</span> <span class="nn">taurus.core.util.eventfilters</span> <span class="k">import</span> <span class="n">filterEvent</span>
<span class="kn">from</span> <span class="nn">taurus.core.util.log</span> <span class="k">import</span> <span class="n">deprecation_decorator</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtcore.util.signal</span> <span class="k">import</span> <span class="n">baseSignal</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtcore.configuration</span> <span class="k">import</span> <span class="n">BaseConfigurableClass</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtcore.mimetypes</span> <span class="k">import</span> <span class="n">TAURUS_ATTR_MIME_TYPE</span><span class="p">,</span> <span class="n">TAURUS_DEV_MIME_TYPE</span><span class="p">,</span> <span class="n">TAURUS_MODEL_MIME_TYPE</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtgui.util</span> <span class="k">import</span> <span class="n">ActionFactory</span>

<span class="kn">from</span> <span class="nn">taurus.external.pint</span> <span class="k">import</span> <span class="n">Quantity</span>

<span class="n">DefaultNoneValue</span> <span class="o">=</span> <span class="s2">&quot;-----&quot;</span>


<div class="viewcode-block" id="defaultFormatter"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base.html#taurus.qt.qtgui.base.defaultFormatter">[docs]</a><span class="k">def</span> <span class="nf">defaultFormatter</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">basecomponent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Default formatter callable. Returns a format string based on dtype</span>
<span class="sd">    and the mapping provided by </span>
<span class="sd">    :attribute:`TaurusBaseComponent.defaultFormatDict`</span>

<span class="sd">    :param dtype: (object) data type</span>
<span class="sd">    :param basecomponent: widget whose display is to be formatted</span>
<span class="sd">    :param kwargs: other keyworld arguments</span>

<span class="sd">    :return: (str) The format string corresponding to the given dtype.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="n">Enum</span>
    <span class="k">return</span> <span class="n">basecomponent</span><span class="o">.</span><span class="n">defaultFormatDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="TaurusBaseComponent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent">[docs]</a><span class="k">class</span> <span class="nc">TaurusBaseComponent</span><span class="p">(</span><span class="n">TaurusListener</span><span class="p">,</span> <span class="n">BaseConfigurableClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A generic Taurus component.</span>

<span class="sd">       .. note::</span>
<span class="sd">           Any class which inherits from TaurusBaseComponent is expected to also</span>
<span class="sd">           inherit from QObject (or from a QObject derived class).</span>
<span class="sd">       .. note::</span>
<span class="sd">           :meth:`getSignaller` is now unused and deprecated. This is because</span>
<span class="sd">           `taurusEvent` is implemented using :func:`baseSignal`, that doesn&#39;t</span>
<span class="sd">           require the class to inherit from QObject.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_modifiableByUser</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_showQuality</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_eventBufferPeriod</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Python format string or Formatter callable</span>
    <span class="n">FORMAT</span> <span class="o">=</span> <span class="n">defaultFormatter</span>

    <span class="c1"># Dictionary mapping dtypes to format strings</span>
    <span class="n">defaultFormatDict</span> <span class="o">=</span> <span class="p">{</span><span class="nb">float</span><span class="p">:</span> <span class="s2">&quot;{:.</span><span class="si">{bc.modelObj.precision}</span><span class="s2">f}&quot;</span><span class="p">,</span>
                         <span class="n">Enum</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{0.name}</span><span class="s2">&quot;</span><span class="p">,</span>
                         <span class="n">Quantity</span><span class="p">:</span> <span class="s2">&quot;{:~.</span><span class="si">{bc.modelObj.precision}</span><span class="s2">f}&quot;</span>
                         <span class="p">}</span>

    <span class="n">taurusEvent</span> <span class="o">=</span> <span class="n">baseSignal</span><span class="p">(</span><span class="s1">&#39;taurusEvent&#39;</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">designMode</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialization of TaurusBaseComponent&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modelFragmentName</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noneValue</span> <span class="o">=</span> <span class="n">DefaultNoneValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_designMode</span> <span class="o">=</span> <span class="n">designMode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call__init__</span><span class="p">(</span><span class="n">TaurusListener</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="n">BaseConfigurableClass</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">taurusMenu</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">taurusMenuData</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="c1"># attributes storing property values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_format</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_localModelName</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_useParentModel</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showText</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attached</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dangerMessage</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isDangerous</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_forceDangerousOperations</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eventFilters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_preFilters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isPaused</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_operations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modelInConfig</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoProtectOperation</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEvents</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEventsTimer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setEventBufferPeriod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_eventBufferPeriod</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;_exception_listener&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_exception_listener</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">_exception_listener</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_exception_listener</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">TaurusExceptionListener</span><span class="p">()])</span>

        <span class="c1"># register configurable properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registerConfigProperty</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">isModifiableByUser</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">setModifiableByUser</span><span class="p">,</span> <span class="s2">&quot;modifiableByUser&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registerConfigProperty</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getModelInConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">setModelInConfig</span><span class="p">,</span> <span class="s2">&quot;ModelInConfig&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetModelInConfig</span><span class="p">()</span>

    <span class="nd">@deprecation_decorator</span><span class="p">(</span><span class="n">rel</span><span class="o">=</span><span class="s1">&#39;4.0&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">getSignaller</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

<div class="viewcode-block" id="TaurusBaseComponent.deleteLater"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.deleteLater">[docs]</a>    <span class="k">def</span> <span class="nf">deleteLater</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Reimplements the Qt.QObject deleteLater method to ensure that the</span>
<span class="sd">        this object stops listening its model.&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setUseParentModel</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetModel</span><span class="p">()</span>
        <span class="n">Qt</span><span class="o">.</span><span class="n">QObject</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Utility methods</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseComponent.getTaurusManager"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getTaurusManager">[docs]</a>    <span class="k">def</span> <span class="nf">getTaurusManager</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the taurus manager singleton. This is just a helper method.</span>
<span class="sd">        It is the equivalent of doing::</span>

<span class="sd">            import taurus</span>
<span class="sd">            manager = taurus.Manager()</span>

<span class="sd">        :return: (taurus.core.taurusmanager.TaurusManager) the TaurusManager</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">taurus</span><span class="o">.</span><span class="n">Manager</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getTaurusFactory"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getTaurusFactory">[docs]</a>    <span class="k">def</span> <span class="nf">getTaurusFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the taurus factory singleton for the given scheme.</span>
<span class="sd">        This is just a helper method. It is the equivalent of doing::</span>

<span class="sd">            import taurus</span>
<span class="sd">            factory = taurus.Factory(scheme)</span>

<span class="sd">        :param scheme: (str or None) the scheme. If scheme is an empty string,</span>
<span class="sd">                       or is not passed, the scheme will be obtained from the</span>
<span class="sd">                       model name. For backwards compatibility (but deprecated),</span>
<span class="sd">                       passing None is equivalent to &#39;tango&#39;.</span>

<span class="sd">        :return: (taurus.core.taurusfactory.TaurusFactory) the TaurusFactory</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">scheme</span> <span class="o">=</span> <span class="n">taurus</span><span class="o">.</span><span class="n">getSchemeFromName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModelName</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">scheme</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scheme</span> <span class="o">=</span> <span class="s1">&#39;tango&#39;</span>

        <span class="k">return</span> <span class="n">taurus</span><span class="o">.</span><span class="n">Factory</span><span class="p">(</span><span class="n">scheme</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Popup menu behavior</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseComponent.contextMenuEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.contextMenuEvent">[docs]</a>    <span class="k">def</span> <span class="nf">contextMenuEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handle the popup menu event</span>

<span class="sd">        :param event: the popup menu event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">taurusMenu</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">taurusMenu</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">globalPos</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Mandatory methods to be implemented in subclass implementation</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~</span>

<div class="viewcode-block" id="TaurusBaseComponent.updateStyle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.updateStyle">[docs]</a>    <span class="k">def</span> <span class="nf">updateStyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method called when the component detects an event that triggers a</span>
<span class="sd">        change in the style.</span>
<span class="sd">        Default implementation doesn&#39;t do anything. Overwrite when necessary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getParentTaurusComponent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getParentTaurusComponent">[docs]</a>    <span class="k">def</span> <span class="nf">getParentTaurusComponent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Returns a parent Taurus component or None if no parent</span>
<span class="sd">        :class:`taurus.qt.qtgui.base.TaurusBaseComponent` is found.</span>

<span class="sd">        :raises: RuntimeError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Not allowed to call TaurusBaseComponent::getParentTaurusComponent()&quot;</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Event handling chain</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseComponent.setEventBufferPeriod"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setEventBufferPeriod">[docs]</a>    <span class="k">def</span> <span class="nf">setEventBufferPeriod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">period</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Set the period at wich :meth:`fireBufferedEvents` will be called.</span>
<span class="sd">        If period is 0, the event buffering is disabled (i.e., events are fired</span>
<span class="sd">        as soon as they are received)</span>

<span class="sd">        :param period: (float) period in seconds for the automatic event firing.</span>
<span class="sd">                    period=0 will disable the event buffering.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eventBufferPeriod</span> <span class="o">=</span> <span class="n">period</span>
        <span class="k">if</span> <span class="n">period</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEventsTimer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEventsTimer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEventsTimer</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fireBufferedEvents</span><span class="p">()</span>  <span class="c1"># flush the buffer</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_eventsBufferLock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">RLock</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEventsTimer</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">period</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fireBufferedEvents</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEventsTimer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getEventBufferPeriod"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getEventBufferPeriod">[docs]</a>    <span class="k">def</span> <span class="nf">getEventBufferPeriod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the event buffer period</span>

<span class="sd">        :return: (float) period (in s). 0 means event buffering is disabled.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eventBufferPeriod</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.eventReceived"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.eventReceived">[docs]</a>    <span class="k">def</span> <span class="nf">eventReceived</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt_src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">evt_value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The basic implementation of the event handling chain is as</span>
<span class="sd">        follows:</span>

<span class="sd">            - eventReceived just calls :meth:`fireEvent` which emits a &quot;taurusEvent&quot;</span>
<span class="sd">              PyQt signal that is connected (by :meth:`preAttach`) to the</span>
<span class="sd">              :meth:`filterEvent` method.</span>
<span class="sd">            - After filtering, :meth:`handleEvent` is invoked with the resulting</span>
<span class="sd">              filtered event</span>

<span class="sd">        .. note::</span>
<span class="sd">            in the earlier steps of the chain (i.e., in :meth:`eventReceived`/</span>
<span class="sd">            :meth:`fireEvent`), the code is executed in a Python thread, while</span>
<span class="sd">            from eventFilter ahead, the code is executed in a Qt thread.</span>
<span class="sd">            When writing widgets, one should normally work on the Qt thread</span>
<span class="sd">            (i.e. reimplementing :meth:`handleEvent`)</span>

<span class="sd">        :param evt_src: (object) object that triggered the event</span>
<span class="sd">        :param evt_type: (taurus.core.taurusbasetypes.TaurusEventType) type of event</span>
<span class="sd">        :param evt_value: (object) event value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="n">filterEvent</span><span class="p">(</span><span class="n">evt_src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">evt_value</span><span class="p">,</span>
                          <span class="n">filters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_preFilters</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">evt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fireEvent</span><span class="p">(</span><span class="o">*</span><span class="n">evt</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.fireEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.fireEvent">[docs]</a>    <span class="k">def</span> <span class="nf">fireEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt_src</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">evt_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">evt_value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Emits a &quot;taurusEvent&quot; signal.</span>
<span class="sd">        It is unlikely that you need to reimplement this method in subclasses.</span>
<span class="sd">        Consider reimplementing :meth:`eventReceived` or :meth:`handleEvent`</span>
<span class="sd">        instead depending on whether you need to execute code in the python</span>
<span class="sd">        or Qt threads, respectively</span>

<span class="sd">        :param evt_src: (object or None) object that triggered the event</span>
<span class="sd">        :param evt_type: (taurus.core.taurusbasetypes.TaurusEventType or None)</span>
<span class="sd">                         type of event</span>
<span class="sd">        :param evt_value: (object or None) event value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eventBufferPeriod</span><span class="p">:</span>
            <span class="c1"># If we have an active event buffer delay, store the event...</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eventsBufferLock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEvents</span><span class="p">[(</span><span class="n">evt_src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">)]</span> <span class="o">=</span> <span class="p">(</span><span class="n">evt_src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span>
                                                             <span class="n">evt_value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># if we are not buffering, directly emit the signal</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">taurusEvent</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">evt_src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">evt_value</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># self.error(&#39;%s.fireEvent(...) failed!&#39;%type(self))</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.fireBufferedEvents"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.fireBufferedEvents">[docs]</a>    <span class="k">def</span> <span class="nf">fireBufferedEvents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Fire all events currently buffered (and flush the buffer)</span>

<span class="sd">        Note: this method is normally called from an event buffer timer thread</span>
<span class="sd">              but it can also be called any time the buffer needs to be flushed</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eventsBufferLock</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">evt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEvents</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">taurusEvent</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="o">*</span><span class="n">evt</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bufferedEvents</span> <span class="o">=</span> <span class="p">{}</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.filterEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.filterEvent">[docs]</a>    <span class="k">def</span> <span class="nf">filterEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt_src</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">evt_type</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">evt_value</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The event is processed by each and all filters in strict order</span>
<span class="sd">        unless one of them returns None (in which case the event is discarded)</span>

<span class="sd">        :param evt_src: (object) object that triggered the event</span>
<span class="sd">        :param evt_type: (taurus.core.taurusbasetypes.TaurusEventType) type of event</span>
<span class="sd">        :param evt_value: (object) event value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="n">evt_src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">evt_value</span>

        <span class="k">if</span> <span class="n">evt</span> <span class="o">==</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="c1"># @todo In an ideal world the signature of this method should be</span>
            <span class="c1"># (evt_src, evt_type, evt_value). However there&#39;s a bug in PyQt:</span>
            <span class="c1"># If a signal is disconnected between the moment it is emitted and</span>
            <span class="c1"># the moment the slot is called, then the slot is called without</span>
            <span class="c1"># parameters (!?). We added this default values to detect if</span>
            <span class="c1"># this is the case without printing an error message each time.</span>
            <span class="c1"># If this gets fixed, we should remove this line.</span>
            <span class="k">return</span>

        <span class="n">evt</span> <span class="o">=</span> <span class="n">filterEvent</span><span class="p">(</span><span class="o">*</span><span class="n">evt</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_eventFilters</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">evt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handleEvent</span><span class="p">(</span><span class="o">*</span><span class="n">evt</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.handleEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.handleEvent">[docs]</a>    <span class="k">def</span> <span class="nf">handleEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt_src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">evt_value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event handling. Default implementation does nothing.</span>
<span class="sd">        Reimplement as necessary</span>

<span class="sd">        :param evt_src: (object or None) object that triggered the event</span>
<span class="sd">        :param evt_type: (taurus.core.taurusbasetypes.TaurusEventType or None) type of event</span>
<span class="sd">        :param evt_value: (object or None) event value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setEventFilters"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setEventFilters">[docs]</a>    <span class="k">def</span> <span class="nf">setEventFilters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">preqt</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sets the taurus event filters list.</span>
<span class="sd">        The filters are run in order, using each output to feed the next filter.</span>
<span class="sd">        A filter must be a function that accepts 3 arguments ``(evt_src, evt_type, evt_value)``</span>
<span class="sd">        If the event is to be ignored, the filter must return None.</span>
<span class="sd">        If the event is  not to be ignored, filter must return a</span>
<span class="sd">        ``(evt_src, evt_type, evt_value)`` tuple which may (or not) differ from the input.</span>

<span class="sd">        For a library of common filters, see taurus/core/util/eventfilters.py</span>

<span class="sd">        :param filters: (sequence) a sequence of filters</span>
<span class="sd">        :param preqt: (bool) If true, set the pre-filters (that are applied in</span>
<span class="sd">                      eventReceived, at the python thread),</span>
<span class="sd">                      otherwise, set the filters to be applied at the main</span>
<span class="sd">                      Qt thread (default)</span>

<span class="sd">        *Note*: If you are setting a filter that applies a transformation on</span>
<span class="sd">        the parameters, you may want to generate a fake event to force the last</span>
<span class="sd">        value to be filtered as well. This can be done as in this example::</span>

<span class="sd">            TaurusBaseComponent.fireEvent( TaurusBaseComponent.getModelObj(),</span>
<span class="sd">                                        taurus.core.taurusbasetypes.TaurusEventType.Periodic,</span>
<span class="sd">                                        TaurusBaseComponent.getModelObj().getValueObj())</span>

<span class="sd">        See also: insertEventFilter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">filters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">preqt</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_preFilters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_eventFilters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getEventFilters"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getEventFilters">[docs]</a>    <span class="k">def</span> <span class="nf">getEventFilters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preqt</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of event filters for this widget</span>

<span class="sd">        :param preqt: (bool) If true, return the pre-filters (that are applied</span>
<span class="sd">                      in eventReceived, at the python thread),</span>
<span class="sd">                      otherwise, return the filters to be applied at the main</span>
<span class="sd">                      Qt thread (default)</span>

<span class="sd">        :return: (sequence&lt;callable&gt;) the event filters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preFilters</span> <span class="k">if</span> <span class="n">preqt</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eventFilters</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.insertEventFilter"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.insertEventFilter">[docs]</a>    <span class="k">def</span> <span class="nf">insertEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">index</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">preqt</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;insert a filter in a given position</span>

<span class="sd">        :param filter: (callable(evt_src, evt_type, evt_value)) a filter</span>
<span class="sd">        :param index: (int) index to place the filter (default = -1 meaning place at the end)</span>
<span class="sd">        :param preqt: (bool) If true, set the pre-filters (that are applied in</span>
<span class="sd">                      eventReceived, at the python thread),</span>
<span class="sd">                      otherwise, set the filters to be applied at the main</span>
<span class="sd">                      Qt thread (default)</span>


<span class="sd">        See also: setEventFilters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">preqt</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_preFilters</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_eventFilters</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setPaused"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setPaused">[docs]</a>    <span class="k">def</span> <span class="nf">setPaused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paused</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Toggles the pause mode.</span>

<span class="sd">        :param paused: (bool) whether or not to pause (default = True)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">paused</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isPaused</span><span class="p">:</span>
            <span class="k">return</span>  <span class="c1"># nothing to do</span>
        <span class="k">if</span> <span class="n">paused</span><span class="p">:</span>  <span class="c1"># pausing</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertEventFilter</span><span class="p">(</span><span class="n">eventfilters</span><span class="o">.</span><span class="n">IGNORE_ALL</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;paused&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># unpausing</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_eventFilters</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">eventfilters</span><span class="o">.</span><span class="n">IGNORE_ALL</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Unpaused&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Unpause failed&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isPaused</span> <span class="o">=</span> <span class="n">paused</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.isPaused"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.isPaused">[docs]</a>    <span class="k">def</span> <span class="nf">isPaused</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the current pause state</span>

<span class="sd">        :return: (bool) wheater or not the widget is paused</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isPaused</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Model class methods</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseComponent.getModelClass"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getModelClass">[docs]</a>    <span class="k">def</span> <span class="nf">getModelClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the class object for the widget.</span>
<span class="sd">        Default behavior is to do a &#39;best effort&#39; to determine which model</span>
<span class="sd">        type corresponds to the current model name.</span>
<span class="sd">        Overwrite as necessary.</span>

<span class="sd">        :return: (class TaurusModel or None) The class object corresponding to the type</span>
<span class="sd">                 of Taurus model this widget handles or None if no valid class is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">findModelClass</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.findModelClass"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.findModelClass">[docs]</a>    <span class="k">def</span> <span class="nf">findModelClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Do a &quot;best effort&quot; to determine which model type corresponds to the</span>
<span class="sd">        given model name.</span>

<span class="sd">        :return: (class TaurusModel or None) The class object corresponding to the type</span>
<span class="sd">                 of Taurus model this widget handles or None if no valid class is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUseParentModel</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findRelativeModelClass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findAbsoluteModelClass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">())</span></div>

    <span class="k">def</span> <span class="nf">_findAbsoluteModelClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">absolute_name</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">taurus</span><span class="o">.</span><span class="n">Manager</span><span class="p">()</span><span class="o">.</span><span class="n">findObjectClass</span><span class="p">(</span><span class="n">absolute_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_findRelativeModelClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relative_name</span><span class="p">):</span>
        <span class="n">parent_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParentTaurusComponent</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">parent_widget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">parent_obj</span> <span class="o">=</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">parent_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">relative_name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">relative_name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">parent_widget</span><span class="o">.</span><span class="n">getModelClass</span><span class="p">()</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="n">parent_obj</span><span class="o">.</span><span class="n">getChildObj</span><span class="p">(</span><span class="n">relative_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">TaurusConfigurationProxy</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">getRealConfigClass</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Model related methods</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseComponent.setModelName"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setModelName">[docs]</a>    <span class="k">def</span> <span class="nf">setModelName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modelName</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method will detach from the previous taurus model (if any), it</span>
<span class="sd">        will set the new model to the given modelName and it will attach</span>
<span class="sd">        this component to the new taurus model.</span>

<span class="sd">        :param modelName: (str) the new taurus model name (according to the taurus convention)</span>
<span class="sd">        :param parent: (TaurusBaseComponent) the parent or None (default) if this</span>
<span class="sd">                       component does not have a parent Taurus component</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">modelName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">modelName</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parent</span><span class="p">:</span>
            <span class="n">modelClass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelClass</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">modelClass</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">parent_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParentModelObj</span><span class="p">()</span>
                <span class="n">modelName</span> <span class="o">=</span> <span class="n">modelClass</span><span class="o">.</span><span class="n">buildModelName</span><span class="p">(</span><span class="n">parent_model</span><span class="p">,</span> <span class="n">modelName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_detach</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span> <span class="o">=</span> <span class="n">modelName</span>
        <span class="c1"># update modelFragmentName</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">scheme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTaurusManager</span><span class="p">()</span><span class="o">.</span><span class="n">getScheme</span><span class="p">(</span><span class="n">modelName</span><span class="p">)</span>
            <span class="n">factory</span> <span class="o">=</span> <span class="n">taurus</span><span class="o">.</span><span class="n">Factory</span><span class="p">(</span><span class="n">scheme</span><span class="p">)</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">getAttributeNameValidator</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modelFragmentName</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">getUriGroups</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modelName</span><span class="p">)[</span><span class="s1">&#39;fragment&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modelFragmentName</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attach</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getModelName"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getModelName">[docs]</a>    <span class="k">def</span> <span class="nf">getModelName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the current model name.</span>

<span class="sd">        :return: (str) the model name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getFullModelName"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getFullModelName">[docs]</a>    <span class="k">def</span> <span class="nf">getFullModelName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the full name of the current model object.</span>

<span class="sd">        :return: (str) the model name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">getFullName</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getParentModelName"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getParentModelName">[docs]</a>    <span class="k">def</span> <span class="nf">getParentModelName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the parent model name or an empty string if the component</span>
<span class="sd">        has no parent</span>

<span class="sd">        :return: (str) the parent model name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParentTaurusComponent</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;&#39;</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="n">getModelName</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getParentModelObj"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getParentModelObj">[docs]</a>    <span class="k">def</span> <span class="nf">getParentModelObj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the parent model object or None if the component has no</span>
<span class="sd">        parent or if the parent&#39;s model is None</span>

<span class="sd">        :return: (taurus.core.taurusmodel.TaurusModel or None) the parent taurus model object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParentTaurusComponent</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getModelObj"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getModelObj">[docs]</a>    <span class="k">def</span> <span class="nf">getModelObj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the taurus model obj associated with this component or None if</span>
<span class="sd">        no taurus model is associated.</span>

<span class="sd">        :return: (taurus.core.taurusmodel.TaurusModel or None) the taurus model object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getModelType"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getModelType">[docs]</a>    <span class="k">def</span> <span class="nf">getModelType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the taurus model type associated with this component or</span>
<span class="sd">        taurus.core.taurusbasetypes.TaurusElementType.Unknown if no taurus model is associated.</span>

<span class="sd">        :return: (taurus.core.taurusbasetypes.TaurusElementType) the taurus model type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">model_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TaurusElementType</span><span class="o">.</span><span class="n">Unknown</span>
        <span class="k">return</span> <span class="n">model_obj</span><span class="o">.</span><span class="n">getTaurusElementType</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getModelValueObj"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getModelValueObj">[docs]</a>    <span class="k">def</span> <span class="nf">getModelValueObj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the tango obj value associated with this component or None</span>
<span class="sd">        if no taurus model is associated.</span>

<span class="sd">        :param cache: (bool) if set to True (default) use the cache value. If set to</span>
<span class="sd">                      False will force a connection to the server.</span>

<span class="sd">        :return: (TaurusAttrValue) the tango value object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span><span class="o">.</span><span class="n">getValueObj</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="n">cache</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getModelFragmentObj"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getModelFragmentObj">[docs]</a>    <span class="k">def</span> <span class="nf">getModelFragmentObj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fragmentName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a fragment object of the model. A fragment of a model is a</span>
<span class="sd">        python attribute of the model object.</span>

<span class="sd">        Fragment names including dots will be used to recursively get fragments</span>
<span class="sd">        of fragments.</span>

<span class="sd">        For a simple fragmentName (no dots), this is roughly equivalent to</span>
<span class="sd">        getattr(self.getModelObj(), fragmentName)</span>

<span class="sd">        If the model does not have that fragment, :class:`AttributeError` is</span>
<span class="sd">        raised (other exceptions may be raised when accessing the fragment as</span>
<span class="sd">        well)</span>

<span class="sd">        :param fragmentName: (str or None) the returned value will correspond to</span>
<span class="sd">                         the given fragmentName. If None passed,</span>
<span class="sd">                         self.modelFragmentName will be used, and if None is</span>
<span class="sd">                         set, the defaultFragmentName of the model will be used</span>
<span class="sd">                         instead.</span>

<span class="sd">        :return: (obj) the member of the modelObj referred by the fragment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fragmentName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># no fragmentName passed in kwargs</span>
            <span class="n">fragmentName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelFragmentName</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span><span class="o">.</span><span class="n">getFragmentObj</span><span class="p">(</span><span class="n">fragmentName</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getFormatedToolTip"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getFormatedToolTip">[docs]</a>    <span class="k">def</span> <span class="nf">getFormatedToolTip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a string with contents to be displayed in a tooltip.</span>

<span class="sd">        :param cache: (bool) if set to True (default) use the cache value. If set to</span>
<span class="sd">                      False will force a connection to the server.</span>

<span class="sd">        :return: (str) a tooltip</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNoneValue</span><span class="p">()</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span><span class="o">.</span><span class="n">getDisplayDescrObj</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolTipObjToStr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.toolTipObjToStr"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.toolTipObjToStr">[docs]</a>    <span class="k">def</span> <span class="nf">toolTipObjToStr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolTipObj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts a python dict to a tooltip string.</span>

<span class="sd">        :param toolTipObj: (dict) a python object</span>

<span class="sd">        :return: (str) a tooltip</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">toolTipObj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNoneValue</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="s1">&#39;&lt;TABLE width=&quot;500&quot; border=&quot;0&quot; cellpadding=&quot;1&quot; cellspacing=&quot;0&quot;&gt;&#39;</span>

        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">toolTipObj</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">+=</span> <span class="s1">&#39;&lt;TR&gt;&lt;TD WIDTH=&quot;80&quot; ALIGN=&quot;RIGHT&quot; VALIGN=&quot;MIDDLE&quot;&gt;&lt;B&gt;</span><span class="si">%s</span><span class="s1">:&lt;/B&gt;&lt;/TD&gt;&lt;TD&gt;</span><span class="si">%s</span><span class="s1">&lt;/TD&gt;&lt;/TR&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="nb">id</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/TABLE&gt;&#39;</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.displayValue"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.displayValue">[docs]</a>    <span class="k">def</span> <span class="nf">displayValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a string representation of the given value</span>

<span class="sd">        This method will use a format string which is determined </span>
<span class="sd">        dynamically from :attribute:`FORMAT`.</span>

<span class="sd">        By default `TaurusBaseComponent.FORMAT` is set to </span>
<span class="sd">        :function:`defaultFormatter`, which makes use of </span>
<span class="sd">        :attribute:`defaultFormatDict`. </span>
<span class="sd"> </span>
<span class="sd">        In order to customize the formatting behaviour, one can change</span>
<span class="sd">        :attribute:`defaultFormatDict` or :attribute:`FORMAT` directly</span>
<span class="sd">        at class level, or use :method:`setFormat` to alter the </span>
<span class="sd">        format string of an specific instance</span>
<span class="sd">        </span>
<span class="sd">        `FORMAT` can be set to a python format string [1] or a callable </span>
<span class="sd">        that returns a python format string.</span>
<span class="sd">        If a callable is used, it will be called with the following </span>
<span class="sd">        keyword arguments:</span>
<span class="sd">        - dtype: the data type of the value to be formatted</span>
<span class="sd">        - basecomponent: the affected widget    </span>
<span class="sd">  </span>
<span class="sd">        The following are some examples for customizing the formatting:</span>

<span class="sd">        - Change FORMAT for all widgets (using a string):</span>

<span class="sd">            TaurusBaseComponent.FORMAT = &quot;{:.2e}&quot;</span>
<span class="sd">            </span>
<span class="sd">        - Change FORMAT for all TaurusLabels (using a callable):</span>
<span class="sd">        </span>
<span class="sd">            def baseFormatter(dtype=None, basecomponent=None, **kwargs):</span>
<span class="sd">                return &quot;{:.1f}&quot;</span>

<span class="sd">            TaurusLabel.FORMAT = baseFormatter</span>

<span class="sd">        - Use the defaultFormatter but modify the format string for dtype=str:</span>

<span class="sd">            TaurusBaseComponent.defaultFormatDict.update({&quot;str&quot;: &quot;{!r}&quot;})</span>

<span class="sd">        [1] https://docs.python.org/2/library/string.html</span>

<span class="sd">        :param v: (object) the value to be translated to string</span>

<span class="sd">        :return: (str) a string representing the given value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_updateFormat</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">((</span><span class="s1">&#39;Cannot update format. Reverting to default.&#39;</span> <span class="o">+</span>
                              <span class="s1">&#39; Reason: </span><span class="si">%r</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">e</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setFormat</span><span class="p">(</span><span class="n">defaultFormatter</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fmt_v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">bc</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Invalid format </span><span class="si">%r</span><span class="s2"> for </span><span class="si">%r</span><span class="s2">. Using &#39;</span><span class="si">{0}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_format</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
            <span class="n">fmt_v</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fmt_v</span></div>

    <span class="k">def</span> <span class="nf">_updateFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Method to update the internal format string used by </span>
<span class="sd">        :meth:`displayValue`</span>
<span class="sd">        The internal format string is calculated using :attribute:`FORMAT`,</span>
<span class="sd">        which can be a string or a callable that returns a string</span>
<span class="sd">        (see :meth:`displayValue`).</span>

<span class="sd">        :param dtype: (object) data type</span>
<span class="sd">        :param kwargs: keyword arguments that will be passed to</span>
<span class="sd">                       :attribute:`FORMAT` if it is a callable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FORMAT</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
            <span class="c1"># unbound method to callable</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FORMAT</span><span class="p">,</span> <span class="n">MethodType</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">FORMAT</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FORMAT</span><span class="o">.</span><span class="vm">__func__</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FORMAT</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span> <span class="n">basecomponent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>  
                                       <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FORMAT</span>

<div class="viewcode-block" id="TaurusBaseComponent.setFormat"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setFormat">[docs]</a>    <span class="k">def</span> <span class="nf">setFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Method to set the `FORMAT` attribute for this instance.</span>
<span class="sd">        It also resets the internal format string, which will be recalculated</span>
<span class="sd">        in the next call to :method&quot;`displayValue`</span>

<span class="sd">        :param format: (str or callable) A format string or a callable </span>
<span class="sd">                       that returns it </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FORMAT</span> <span class="o">=</span> <span class="nb">format</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetFormat</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetFormat"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetFormat">[docs]</a>    <span class="k">def</span> <span class="nf">resetFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reset the internal format string. It forces a recalculation</span>
<span class="sd">        in the next call to :method:`displayValue`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_format</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getDisplayValue"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getDisplayValue">[docs]</a>    <span class="k">def</span> <span class="nf">getDisplayValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fragmentName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a string representation of the model value associated with</span>
<span class="sd">        this component.</span>

<span class="sd">        :param cache: (bool) (ignored, just for bck-compat).</span>
<span class="sd">        :param fragmentName: (str or None) the returned value will correspond to</span>
<span class="sd">                         the given fragmentName. If None passed,</span>
<span class="sd">                         self.modelFragmentName will be used, and if None is</span>
<span class="sd">                         set, the defaultFragmentName of the model will be used</span>
<span class="sd">                         instead.</span>

<span class="sd">        :return: (str) a string representation of the model value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNoneValue</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelFragmentObj</span><span class="p">(</span><span class="n">fragmentName</span><span class="o">=</span><span class="n">fragmentName</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNoneValue</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">displayValue</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setNoneValue"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setNoneValue">[docs]</a>    <span class="k">def</span> <span class="nf">setNoneValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the new string representation when no model or no model value exists.</span>

<span class="sd">        :param v: (str) the string representation for an invalid value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noneValue</span> <span class="o">=</span> <span class="n">v</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getNoneValue"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getNoneValue">[docs]</a>    <span class="k">def</span> <span class="nf">getNoneValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the current string representation when no valid model or model value exists.</span>

<span class="sd">        :return: (str) a string representation for an invalid value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneValue</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.isChangeable"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.isChangeable">[docs]</a>    <span class="k">def</span> <span class="nf">isChangeable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Tells if this component value can be changed by the user. Default implementation</span>
<span class="sd">        will return True if and only if:</span>

<span class="sd">            - this component is attached to a valid taurus model and</span>
<span class="sd">            - the taurus model is writable and</span>
<span class="sd">            - this component is not read-only</span>

<span class="sd">        :return: (bool) True if this component value can be changed by the user or False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span><span class="o">.</span><span class="n">isWritable</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isReadOnly</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.isReadOnly"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.isReadOnly">[docs]</a>    <span class="k">def</span> <span class="nf">isReadOnly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determines if this component is read-only or not in the sense that the</span>
<span class="sd">        user can interact with it. Default implementation returns True.</span>

<span class="sd">        Override when necessary.</span>

<span class="sd">        :return: (bool) whether or not this component is read-only</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.isAttached"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.isAttached">[docs]</a>    <span class="k">def</span> <span class="nf">isAttached</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determines if this component is attached to the taurus model.</span>

<span class="sd">        :return: (bool) True if the component is attached or False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attached</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.preAttach"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.preAttach">[docs]</a>    <span class="k">def</span> <span class="nf">preAttach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called inside self.attach() before actual attach is performed.</span>
<span class="sd">        Default implementation just emits a signal.</span>

<span class="sd">        Override when necessary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">taurusEvent</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterEvent</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># self.error(&quot;In %s.preAttach() ... failed!&quot; % str(type(self)))</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.postAttach"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.postAttach">[docs]</a>    <span class="k">def</span> <span class="nf">postAttach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called inside self.attach() after actual attach is performed.</span>
<span class="sd">        Default implementation does not do anything.</span>

<span class="sd">        Override when necessary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.preDetach"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.preDetach">[docs]</a>    <span class="k">def</span> <span class="nf">preDetach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called inside self.detach() before actual deattach is performed.</span>
<span class="sd">        Default implementation just disconnects a signal.</span>

<span class="sd">        Override when necessary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">taurusEvent</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterEvent</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># self.error(&quot;In %s.preDetach() ... failed!&quot; % str(type(self)))</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.postDetach"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.postDetach">[docs]</a>    <span class="k">def</span> <span class="nf">postDetach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called inside self.detach() after actual deattach is performed.</span>
<span class="sd">        Default implementation does not do anything.</span>

<span class="sd">        Override when necessary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="k">def</span> <span class="nf">_attach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Attaches the component to the taurus model.</span>
<span class="sd">        In general it should not be necessary to overwrite this method in a</span>
<span class="sd">        subclass.</span>

<span class="sd">        :return: (bool) True if success in attachment or False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isAttached</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attached</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">preAttach</span><span class="p">()</span>

        <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelClass</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_attached</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="c1">#self.trace(&quot;Failed to attach: Model class not found&quot;)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_attached</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="o">=</span> <span class="n">taurus</span><span class="o">.</span><span class="n">Manager</span><span class="p">()</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span><span class="o">.</span><span class="n">addListener</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_attached</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">changeLogName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_name</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_attached</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;Exception occured while trying to attach &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">postAttach</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attached</span>

    <span class="k">def</span> <span class="nf">_detach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Detaches the component from the taurus model&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preDetach</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isAttached</span><span class="p">():</span>
            <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">removeListener</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_name</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pos</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">new_log_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_name</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">log_name</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">changeLogName</span><span class="p">(</span><span class="n">new_log_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modelObj</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_attached</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fireEvent</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">TaurusEventType</span><span class="o">.</span><span class="n">Change</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">postDetach</span><span class="p">()</span>

<div class="viewcode-block" id="TaurusBaseComponent.setModelInConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setModelInConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setModelInConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets whether the model-related properties should be stored for this</span>
<span class="sd">        widget when creating the config dict with :meth:`createConfig` (and</span>
<span class="sd">        restored when calling :meth:`applyConfig`).</span>
<span class="sd">        By default this is not enabled.</span>
<span class="sd">        The following properties are affected by this:</span>
<span class="sd">        - &quot;model&quot;</span>

<span class="sd">        :param yesno: (bool) If True, the model-related properties will be</span>
<span class="sd">                      registered as config properties. If False, they will be</span>
<span class="sd">                      unregistered.</span>

<span class="sd">        .. seealso:: :meth:`registerConfigProperty`, :meth:`createConfig`,</span>
<span class="sd">                     :meth:`applyConfig`</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">yesno</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelInConfig</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">yesno</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">registerConfigProperty</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unregisterConfigurableItem</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">raiseOnError</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modelInConfig</span> <span class="o">=</span> <span class="n">yesno</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getModelInConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getModelInConfig">[docs]</a>    <span class="k">def</span> <span class="nf">getModelInConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelInConfig</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetModelInConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetModelInConfig">[docs]</a>    <span class="k">def</span> <span class="nf">resetModelInConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">setModelInConfig</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Pending operations related methods</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseComponent.applyPendingOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.applyPendingOperations">[docs]</a>    <span class="k">def</span> <span class="nf">applyPendingOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ops</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Applies operations without caring about danger messages.</span>
<span class="sd">        Use :meth:`TaurusBaseWidget.safeApplyOperation` if you want to warn the</span>
<span class="sd">        user before applying</span>

<span class="sd">        :param ops: (sequence&lt;taurus.core.taurusoperation.TaurusOperation&gt; or None) list of operations to apply.</span>
<span class="sd">                    If None is given (default) the component fetches the pending operations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Apply changes&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ops</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPendingOperations</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isAutoProtectOperation</span><span class="p">():</span>
            <span class="kn">import</span> <span class="nn">taurus.qt.qtgui.dialog</span>

            <span class="nd">@taurus</span><span class="o">.</span><span class="n">qt</span><span class="o">.</span><span class="n">qtgui</span><span class="o">.</span><span class="n">dialog</span><span class="o">.</span><span class="n">protectTaurusMessageBox</span>
            <span class="k">def</span> <span class="nf">go</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getTaurusManager</span><span class="p">()</span><span class="o">.</span><span class="n">applyPendingOperations</span><span class="p">(</span><span class="n">ops</span><span class="p">)</span>
            <span class="n">go</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getTaurusManager</span><span class="p">()</span><span class="o">.</span><span class="n">applyPendingOperations</span><span class="p">(</span><span class="n">ops</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.hasPendingOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.hasPendingOperations">[docs]</a>    <span class="k">def</span> <span class="nf">hasPendingOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns if the component has pending operations</span>

<span class="sd">        :return: (bool) True if there are pending operations or False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getPendingOperations</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getPendingOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getPendingOperations">[docs]</a>    <span class="k">def</span> <span class="nf">getPendingOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the sequence of pending operations</span>

<span class="sd">        :return:  (sequence&lt;taurus.core.taurusoperation.TaurusOperation&gt;) a list of pending operations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operations</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetPendingOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetPendingOperations">[docs]</a>    <span class="k">def</span> <span class="nf">resetPendingOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clears the list of pending operations&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_operations</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setDangerMessage"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setDangerMessage">[docs]</a>    <span class="k">def</span> <span class="nf">setDangerMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dangerMessage</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the danger message when applying an operation. If dangerMessage is None,</span>
<span class="sd">        the apply operation is considered safe</span>

<span class="sd">        :param dangerMessage: (str or None) the danger message. If None is given (default)</span>
<span class="sd">                              the apply operation is considered safe</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dangerMessage</span> <span class="o">=</span> <span class="n">dangerMessage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isDangerous</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dangerMessage</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getDangerMessage"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getDangerMessage">[docs]</a>    <span class="k">def</span> <span class="nf">getDangerMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the current apply danger message or None if the apply operation is safe</span>

<span class="sd">        :return: (str or None) the apply danger message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dangerMessage</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetDangerMessage"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetDangerMessage">[docs]</a>    <span class="k">def</span> <span class="nf">resetDangerMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clears the danger message. After this method is executed the apply operation</span>
<span class="sd">        for this component will be considered safe.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDangerMessage</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.isDangerous"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.isDangerous">[docs]</a>    <span class="k">def</span> <span class="nf">isDangerous</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns if the apply operation for this component is dangerous</span>

<span class="sd">        :return: (bool) wheter or not the apply operation for this component is dangerous</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isDangerous</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setForceDangerousOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setForceDangerousOperations">[docs]</a>    <span class="k">def</span> <span class="nf">setForceDangerousOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forces/clears the dangerous operations</span>

<span class="sd">        :param yesno: (bool) force or not the dangerous operations&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_forceDangerousOperations</span> <span class="o">=</span> <span class="n">yesno</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getForceDangerousOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getForceDangerousOperations">[docs]</a>    <span class="k">def</span> <span class="nf">getForceDangerousOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns if apply dangerous operations is forced</span>

<span class="sd">        :return: (bool) wheter or not apply dangerous operations is forced</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_forceDangerousOperations</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetForceDangerousOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetForceDangerousOperations">[docs]</a>    <span class="k">def</span> <span class="nf">resetForceDangerousOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clears forcing apply dangerous operations&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setForceDangerousOperations</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Standard Qt properties</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseComponent.getModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getModel">[docs]</a>    <span class="k">def</span> <span class="nf">getModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the model name for this component.</span>

<span class="sd">        :return: (str) the model name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localModelName</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setModel">[docs]</a>    <span class="k">def</span> <span class="nf">setModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets/unsets the model name for this component</span>

<span class="sd">        :param model: (str) the new model name&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModelCheck</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetFormat</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStyle</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setModelCheck"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setModelCheck">[docs]</a>    <span class="k">def</span> <span class="nf">setModelCheck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the component taurus model. Setting the check argument to True</span>
<span class="sd">        (default) will check if the current model is equal to the given argument.</span>
<span class="sd">        If so then nothing is done. This should be the standard way to call this</span>
<span class="sd">        method since it will avoid recursion.</span>

<span class="sd">        :param model: (str) the new model name</span>
<span class="sd">        :param check: (bool) whether or not to check against the actual model name&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">model</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">check</span> <span class="o">==</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">model</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localModelName</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_localModelName</span> <span class="o">=</span> <span class="n">model</span>

        <span class="n">parent_widget</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># if this widget has a buddy, check to see if it is a valid</span>
            <span class="c1"># TaurusWidget</span>
            <span class="n">buddy_func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;buddy&#39;</span><span class="p">)</span>
            <span class="n">buddy_widget</span> <span class="o">=</span> <span class="n">buddy_func</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">buddy_widget</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">buddy_widget</span><span class="p">,</span> <span class="n">TaurusBaseComponent</span><span class="p">):</span>
                <span class="n">parent_widget</span> <span class="o">=</span> <span class="n">buddy_widget</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUseParentModel</span><span class="p">():</span>
                <span class="n">parent_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParentTaurusComponent</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUseParentModel</span><span class="p">():</span>
                <span class="n">parent_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParentTaurusComponent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModelName</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">parent_widget</span><span class="p">)</span></div>
        <span class="c1">#self.fireEvent(self.getModelObj(), taurus.core.taurusbasetypes.TaurusEventType.Change, self.getModelValueObj())</span>

<div class="viewcode-block" id="TaurusBaseComponent.resetModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetModel">[docs]</a>    <span class="k">def</span> <span class="nf">resetModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the model name to the empty string&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getUseParentModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getUseParentModel">[docs]</a>    <span class="k">def</span> <span class="nf">getUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns whether this component is using the parent model</span>

<span class="sd">        :return: (bool) True if using parent model or False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_useParentModel&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusBaseComponent.setUseParentModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setUseParentModel">[docs]</a>    <span class="k">def</span> <span class="nf">setUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets/unsets using the parent model</span>

<span class="sd">        :param yesno: (bool) whether or not to use parent model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">yesno</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_useParentModel</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_useParentModel</span> <span class="o">=</span> <span class="n">yesno</span>
        <span class="c1"># force a recalculation of the model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModelCheck</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">(),</span> <span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetUseParentModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetUseParentModel">[docs]</a>    <span class="k">def</span> <span class="nf">resetUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resets the usage of parent model to False&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setUseParentModel</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStyle</span><span class="p">()</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusBaseComponent.setShowQuality"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setShowQuality">[docs]</a>    <span class="k">def</span> <span class="nf">setShowQuality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">showQuality</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets/unsets the show quality property</span>

<span class="sd">        :param showQuality: (bool) whether or not to show the quality</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">showQuality</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showQuality</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showQuality</span> <span class="o">=</span> <span class="n">showQuality</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStyle</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getShowQuality"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getShowQuality">[docs]</a>    <span class="k">def</span> <span class="nf">getShowQuality</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns if showing the quality as a background color</span>

<span class="sd">        :return: (bool) True if showing the quality or False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showQuality</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetShowQuality"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetShowQuality">[docs]</a>    <span class="k">def</span> <span class="nf">resetShowQuality</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resets the show quality to self.__class__._showQuality&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setShowQuality</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_showQuality</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusBaseComponent.setShowText"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setShowText">[docs]</a>    <span class="k">def</span> <span class="nf">setShowText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">showText</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets/unsets showing the display value of the model</span>

<span class="sd">        :param showText: (bool) whether or not to show the display value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">showText</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showText</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showText</span> <span class="o">=</span> <span class="n">showText</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fireEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">(),</span> <span class="n">TaurusEventType</span><span class="o">.</span><span class="n">Change</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">getModelValueObj</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStyle</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getShowText"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getShowText">[docs]</a>    <span class="k">def</span> <span class="nf">getShowText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns if showing the display value</span>

<span class="sd">        :return: (bool) True if showing the display value or False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showText</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetShowText"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetShowText">[docs]</a>    <span class="k">def</span> <span class="nf">resetShowText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resets the showing of the display value to True&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setShowText</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setTaurusPopupMenu"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setTaurusPopupMenu">[docs]</a>    <span class="k">def</span> <span class="nf">setTaurusPopupMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">menuData</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets/unsets the taurus popup menu</span>

<span class="sd">        :param menuData: (str) an xml representing the popup menu&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">taurusMenuData</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">menuData</span><span class="p">)</span>
        <span class="n">factory</span> <span class="o">=</span> <span class="n">ActionFactory</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">taurusMenu</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">getNewMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">taurusMenuData</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.getTaurusPopupMenu"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.getTaurusPopupMenu">[docs]</a>    <span class="k">def</span> <span class="nf">getTaurusPopupMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns an xml string representing the current taurus popup menu</span>

<span class="sd">        :return: (str) an xml string representing the current taurus popup menu</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">taurusMenuData</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetTaurusPopupMenu"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetTaurusPopupMenu">[docs]</a>    <span class="k">def</span> <span class="nf">resetTaurusPopupMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resets the taurus popup menu to empty&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">taurusMenuData</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.isModifiableByUser"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.isModifiableByUser">[docs]</a>    <span class="k">def</span> <span class="nf">isModifiableByUser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;whether the user can change the contents of the widget</span>

<span class="sd">        :return: (bool) True if the user is allowed to modify the look&amp;feel&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modifiableByUser</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setModifiableByUser"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setModifiableByUser">[docs]</a>    <span class="k">def</span> <span class="nf">setModifiableByUser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modifiable</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        sets whether the user is allowed to modify the look&amp;feel</span>

<span class="sd">        :param modifiable: (bool)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modifiableByUser</span> <span class="o">=</span> <span class="n">modifiable</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetModifiableByUser"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetModifiableByUser">[docs]</a>    <span class="k">def</span> <span class="nf">resetModifiableByUser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Equivalent to setModifiableByUser(self.__class__._modifiableByUser)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModifiableByUser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_modifiableByUser</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.resetAutoProtectOperation"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.resetAutoProtectOperation">[docs]</a>    <span class="k">def</span> <span class="nf">resetAutoProtectOperation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resets protecting operations&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAutoProtectOperation</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.isAutoProtectOperation"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.isAutoProtectOperation">[docs]</a>    <span class="k">def</span> <span class="nf">isAutoProtectOperation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Tells if this widget&#39;s operations are protected against exceptions</span>

<span class="sd">        :return: (bool) True if operations are protected against exceptions or</span>
<span class="sd">                 False otherwise&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoProtectOperation</span></div>

<div class="viewcode-block" id="TaurusBaseComponent.setAutoProtectOperation"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseComponent.html#taurus.qt.qtgui.base.TaurusBaseComponent.setAutoProtectOperation">[docs]</a>    <span class="k">def</span> <span class="nf">setAutoProtectOperation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">protect</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets/unsets this widget&#39;s operations are protected against exceptions</span>

<span class="sd">        :param protect: wheater or not to protect widget operations</span>
<span class="sd">        :type protect: bool&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoProtectOperation</span> <span class="o">=</span> <span class="n">protect</span></div></div>


<div class="viewcode-block" id="TaurusBaseWidget"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget">[docs]</a><span class="k">class</span> <span class="nc">TaurusBaseWidget</span><span class="p">(</span><span class="n">TaurusBaseComponent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The base class for all Qt Taurus widgets.</span>

<span class="sd">    .. note::</span>
<span class="sd">        Any class which inherits from TaurusBaseWidget is expected to also</span>
<span class="sd">        inherit from QWidget (or from a QWidget derived class)&quot;&quot;&quot;</span>

    <span class="n">modelChanged</span> <span class="o">=</span> <span class="n">baseSignal</span><span class="p">(</span><span class="s1">&#39;modelChanged&#39;</span><span class="p">,</span> <span class="s1">&#39;QString&#39;</span><span class="p">)</span>
    <span class="n">valueChangedSignal</span> <span class="o">=</span> <span class="n">baseSignal</span><span class="p">(</span><span class="s1">&#39;valueChanged&#39;</span><span class="p">)</span>

    <span class="n">_dragEnabled</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">designMode</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_on_hide</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_supportedMimeTypes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoTooltip</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call__init__</span><span class="p">(</span><span class="n">TaurusBaseComponent</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                          <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">designMode</span><span class="o">=</span><span class="n">designMode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setText</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_findSetTextMethod</span><span class="p">()</span>

    <span class="c1"># It makes the GUI to hang... If this needs implementing, we should</span>
    <span class="c1"># reimplement it using the Qt parent class, not QWidget...</span>
    <span class="c1"># def destroy(self):</span>
    <span class="c1">#    &#39;&#39;&#39;Reimplements the Qt.QWidget destroy method to ensure that this object</span>
    <span class="c1">#    stops listening its model.&#39;&#39;&#39;</span>
    <span class="c1">#    self.setUseParentModel(False)</span>
    <span class="c1">#    self.resetModel()</span>
    <span class="c1">#    Qt.QWidget.destroy(self)</span>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Helper methods</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseWidget.getQtClass"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.getQtClass">[docs]</a>    <span class="k">def</span> <span class="nf">getQtClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bases</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the parent Qt class for this widget</span>

<span class="sd">        :param bases: (sequence&lt;class&gt; or None) the list of class objects. If None</span>
<span class="sd">                      is given (default) it uses the object base classes from __bases__</span>

<span class="sd">        :return: (QWidget class) the QWidget class object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bases</span> <span class="o">=</span> <span class="n">bases</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__bases__</span>
        <span class="k">for</span> <span class="n">klass</span> <span class="ow">in</span> <span class="n">bases</span><span class="p">:</span>
            <span class="n">is_taurusbasewidget</span> <span class="o">=</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">klass</span><span class="p">,</span> <span class="n">TaurusBaseWidget</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">klass</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">is_taurusbasewidget</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getQtClass</span><span class="p">(</span><span class="n">klass</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">klass</span>
            <span class="k">elif</span> <span class="n">is_taurusbasewidget</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getQtClass</span><span class="p">(</span><span class="n">klass</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Qt properties from TaurusBaseComponent that need to be overwritten</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

    <span class="n">_UseParentMsg</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusBaseWidget.setUseParentModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.setUseParentModel">[docs]</a>    <span class="k">def</span> <span class="nf">setUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets/unsets using the parent model.</span>

<span class="sd">        .. note:: in some cases you may need to call :meth:`recheckTaurusParent`</span>
<span class="sd">                  after reparenting of some of this widget&#39;s ancestors</span>

<span class="sd">        :param yesno: (bool) whether or not to use parent model</span>

<span class="sd">        .. seealso:: :meth:`recheckTaurusParent`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_same</span> <span class="o">=</span> <span class="n">yesno</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_useParentModel</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_same</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateUseParentModel</span><span class="p">(</span><span class="n">yesno</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">yesno</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_designMode</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">TaurusBaseWidget</span><span class="o">.</span><span class="n">_UseParentMsg</span><span class="p">:</span>
                <span class="n">TaurusBaseWidget</span><span class="o">.</span><span class="n">_UseParentMsg</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;UseParentModel usage note&quot;</span><span class="p">,</span>
                                           <span class="s2">&quot;Using the UseParentModel feature may require you to call &quot;</span> <span class="o">+</span>
                                           <span class="s2">&quot;recheckTaurusParent() manually for this widget after calling &quot;</span> <span class="o">+</span>
                                           <span class="s2">&quot;setupUi in your code.&quot;</span> <span class="o">+</span>
                                           <span class="s2">&quot;See the documentation of TaurusBaseWidget.recheckTaurusParent()&quot;</span><span class="p">)</span>
        <span class="n">TaurusBaseComponent</span><span class="o">.</span><span class="n">setUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_updateUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">):</span>
        <span class="n">parent_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParentTaurusComponent</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">parent_widget</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">yesno</span><span class="p">:</span>
                <span class="n">parent_widget</span><span class="o">.</span><span class="n">modelChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentModelChanged</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parent_widget</span><span class="o">.</span><span class="n">modelChanged</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentModelChanged</span><span class="p">)</span>

<div class="viewcode-block" id="TaurusBaseWidget.recheckTaurusParent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.recheckTaurusParent">[docs]</a>    <span class="k">def</span> <span class="nf">recheckTaurusParent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Forces the widget to recheck its Taurus parent. Taurus Widgets will in most</span>
<span class="sd">        situations keep track of changes in their taurus parenting, but in some</span>
<span class="sd">        special cases (which unfortunately tend to occur when using Qt</span>
<span class="sd">        Designer) they may not update it correctly.</span>

<span class="sd">        If this happens, you can manually call this method.</span>

<span class="sd">        For more information, check the :download:`issue demo example</span>
<span class="sd">        &lt;/devel/examples/parentmodel_issue_demo.py&gt;`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_updateUseParentModel</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.setModelCheck"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.setModelCheck">[docs]</a>    <span class="k">def</span> <span class="nf">setModelCheck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the component taurus model. Setting the check argument to True</span>
<span class="sd">        (default) will check if the current model is equal to the given argument.</span>
<span class="sd">        If so then nothing is done. This should be the standard way to call this</span>
<span class="sd">        method since it will avoid recursion.</span>

<span class="sd">        :param model: (str) the new model name</span>
<span class="sd">        :param check: (bool) whether or not to check against the actual model name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">model</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="n">send_signal</span> <span class="o">=</span> <span class="p">(</span><span class="n">model</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localModelName</span><span class="p">)</span>
        <span class="n">TaurusBaseComponent</span><span class="o">.</span><span class="n">setModelCheck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">check</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">send_signal</span><span class="p">:</span>
            <span class="c1"># emit a signal informing the child widgets that the model has</span>
            <span class="c1"># changed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modelChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Default Qt signal handlers. Overwrite them as necessary</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseWidget.changeEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.changeEvent">[docs]</a>    <span class="k">def</span> <span class="nf">changeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;overwrites QWidget.changeEvent(self, evt) to handle the ParentChangeEvent</span>
<span class="sd">        in case this widget is using the parent model. Always calls the QWidget.changeEvent</span>
<span class="sd">        in order not to lose events</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUseParentModel</span><span class="p">():</span>
            <span class="n">evt_type</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">type</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">evt_type</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QEvent</span><span class="o">.</span><span class="n">ParentChange</span><span class="p">:</span>
                <span class="c1"># disconnect from old parent</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parentTaurusComponent</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_parentTaurusComponent</span><span class="o">.</span><span class="n">modelChanged</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">parentModelChanged</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_updateUseParentModel</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setModelCheck</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">(),</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getQtClass</span><span class="p">()</span><span class="o">.</span><span class="n">changeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.parentModelChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.parentModelChanged">[docs]</a>    <span class="k">def</span> <span class="nf">parentModelChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parentmodel_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Invoked when the Taurus parent model changes</span>

<span class="sd">        :param parentmodel_name: (str) the new name of the parent model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Parent model changed to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">parentmodel_name</span><span class="p">)</span>
        <span class="n">parentmodel_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">parentmodel_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUseParentModel</span><span class="p">():</span>
            <span class="c1"># force an update of the interpretation of the model property</span>
            <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setModelCheck</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modelChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;received event from parent although not using parent model&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.handleEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.handleEvent">[docs]</a>    <span class="k">def</span> <span class="nf">handleEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt_src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">evt_value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;very basic and generalistic handling of events.</span>

<span class="sd">        Override when necessary.</span>

<span class="sd">        :param evt_src: (object or None) object that triggered the event</span>
<span class="sd">        :param evt_type: (taurus.core.taurusbasetypes.TaurusEventType or None) type of event</span>
<span class="sd">        :param evt_value: (object or None) event value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Update the text shown by the widget</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_setText</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getShowText</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">evt_src</span><span class="p">,</span> <span class="n">TaurusAttribute</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">evt_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">TaurusEventType</span><span class="o">.</span><span class="n">Change</span><span class="p">,</span> <span class="n">TaurusEventType</span><span class="o">.</span><span class="n">Periodic</span><span class="p">):</span>
                        <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">displayValue</span><span class="p">(</span><span class="n">evt_value</span><span class="o">.</span><span class="n">rvalue</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">evt_type</span> <span class="o">==</span> <span class="n">TaurusEventType</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
                        <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNoneValue</span><span class="p">()</span>
                    <span class="k">elif</span> <span class="n">evt_type</span> <span class="o">==</span> <span class="n">TaurusEventType</span><span class="o">.</span><span class="n">Config</span><span class="p">:</span>
                        <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDisplayValue</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDisplayValue</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

        <span class="c1"># update tooltip</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoTooltip</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getFormatedToolTip</span><span class="p">())</span>

        <span class="c1"># TODO: update whatsThis</span>

        <span class="c1"># update appearance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStyle</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.setModelInConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.setModelInConfig">[docs]</a>    <span class="k">def</span> <span class="nf">setModelInConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        extends :meth:`TaurusBaseComponent.setModelInConfig` to include also</span>
<span class="sd">        the &quot;useParentModel&quot; property</span>

<span class="sd">        .. seealso:: :meth:`TaurusBaseComponent.setModelInConfig`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">yesno</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelInConfig</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">yesno</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">registerConfigProperty</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getUseParentModel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">setUseParentModel</span><span class="p">,</span> <span class="s2">&quot;useParentModel&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unregisterConfigurableItem</span><span class="p">(</span>
                <span class="s2">&quot;useParentModel&quot;</span><span class="p">,</span> <span class="n">raiseOnError</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">TaurusBaseComponent</span><span class="o">.</span><span class="n">setModelInConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Mandatory overwrite from TaurusBaseComponent</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseWidget.updateStyle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.updateStyle">[docs]</a>    <span class="k">def</span> <span class="nf">updateStyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the widget style. Default implementation just calls QWidget.update()</span>

<span class="sd">        Override when necessary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.getParentTaurusComponent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.getParentTaurusComponent">[docs]</a>    <span class="k">def</span> <span class="nf">getParentTaurusComponent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the first taurus component in the widget hierarchy or None if no</span>
<span class="sd">        taurus component is found</span>

<span class="sd">        :return: (TaurusBaseComponent or None) the parent taurus base component</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentWidget</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">p</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">TaurusBaseWidget</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">parentWidget</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">TaurusBaseWidget</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parentTaurusComponent</span> <span class="o">=</span> <span class="n">p</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parentTaurusComponent</span> <span class="o">=</span> <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">p</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.setDisconnectOnHide"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.setDisconnectOnHide">[docs]</a>    <span class="k">def</span> <span class="nf">setDisconnectOnHide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">disconnect</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets/unsets disconnection on hide event</span>

<span class="sd">        :param disconnect: (bool) whether or not to disconnect on hide event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span><span class="p">()</span> <span class="ow">and</span> <span class="n">disconnect</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Ignoring setDisconnectOnHide to False because widget is not visible&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_on_hide</span> <span class="o">=</span> <span class="n">disconnect</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.hideEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.hideEvent">[docs]</a>    <span class="k">def</span> <span class="nf">hideEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Override of the QWidget.hideEvent()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_on_hide</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelName</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_detach</span><span class="p">()</span>
                <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Exception received while trying to hide&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.showEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.showEvent">[docs]</a>    <span class="k">def</span> <span class="nf">showEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Override of the QWidget.showEvent()&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_on_hide</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelName</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_attach</span><span class="p">()</span>
                <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Exception received while trying to show&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.closeEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.closeEvent">[docs]</a>    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Override of the QWidget.closeEvent()&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_detach</span><span class="p">()</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Exception received while trying to close&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.handleException"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.handleException">[docs]</a>    <span class="k">def</span> <span class="nf">handleException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exception_listener</span><span class="p">:</span>
            <span class="n">h</span><span class="o">.</span><span class="n">exceptionReceived</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_findSetTextMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determine if this widget is able to display the text value of the taurus</span>
<span class="sd">        model. It searches through the possible Qt methods to display text.</span>

<span class="sd">        :return: (callable) a python method or None if no suitable method is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">setMethod</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">setMethod</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;setText&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">setMethod</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;setTitle&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">setMethod</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;display&#39;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="c1"># it seems the widget has no way to update a value</span>
                    <span class="k">pass</span>

        <span class="k">return</span> <span class="n">setMethod</span>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Drag&amp;Drop related methods:</span>
    <span class="c1">#    default implementation allows setting the model by dropping it on the</span>
    <span class="c1">#    widget (if the widget allows modifications by the user).</span>
    <span class="c1">#</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseWidget.setModifiableByUser"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.setModifiableByUser">[docs]</a>    <span class="k">def</span> <span class="nf">setModifiableByUser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modifiable</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Reimplemented to acept/reject drops based on whether the widget is modifiable by the user.</span>
<span class="sd">        See :meth:`TaurusBaseComponent.setModifiableByUser()`&#39;&#39;&#39;</span>
        <span class="n">TaurusBaseComponent</span><span class="o">.</span><span class="n">setModifiableByUser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modifiable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAcceptDrops</span><span class="p">(</span><span class="n">modifiable</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.getSupportedMimeTypes"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.getSupportedMimeTypes">[docs]</a>    <span class="k">def</span> <span class="nf">getSupportedMimeTypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        returns a list of supported mimeTypes that this widget support (ordered</span>
<span class="sd">        by priority). If none is set explicitely via :meth:`setSupportedMimeTypes`,</span>
<span class="sd">        a best effort will be tried based on the model class</span>

<span class="sd">        ..seealso: :meth:`setSupportedMimeTypes`</span>

<span class="sd">        This provides only a very basic implementation. Reimplement in derived classes if needed</span>

<span class="sd">        :return: (list&lt;str&gt;) list of MIME type names</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedMimeTypes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedMimeTypes</span>
        <span class="c1"># fallback guess based on modelclass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">modelclass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelClass</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">modelclass</span> <span class="o">==</span> <span class="n">TaurusDevice</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">TAURUS_DEV_MIME_TYPE</span><span class="p">,</span> <span class="n">TAURUS_MODEL_MIME_TYPE</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">modelclass</span> <span class="o">==</span> <span class="n">TaurusAttribute</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">TAURUS_ATTR_MIME_TYPE</span><span class="p">,</span> <span class="n">TAURUS_MODEL_MIME_TYPE</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">TAURUS_MODEL_MIME_TYPE</span><span class="p">]</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.setSupportedMimeTypes"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.setSupportedMimeTypes">[docs]</a>    <span class="k">def</span> <span class="nf">setSupportedMimeTypes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mimetypes</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        sets the mimeTypes that this widget support</span>

<span class="sd">        :param mimetypes: (list&lt;str&gt;) list (ordered by priority) of MIME type names</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_supportedMimeTypes</span> <span class="o">=</span> <span class="n">mimetypes</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.dragEnterEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.dragEnterEvent">[docs]</a>    <span class="k">def</span> <span class="nf">dragEnterEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented to support drag&amp;drop of models. See :class:`QWidget`&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isModifiableByUser</span><span class="p">():</span>
            <span class="n">supported</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSupportedMimeTypes</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">mimeData</span><span class="p">()</span><span class="o">.</span><span class="n">formats</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">supported</span><span class="p">:</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">acceptProposedAction</span><span class="p">()</span>
                    <span class="k">return</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.getDropEventCallback"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.getDropEventCallback">[docs]</a>    <span class="k">def</span> <span class="nf">getDropEventCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the method to be called when a dropping event occurs.</span>
<span class="sd">        The default implementation returns `self.setModel`. Reimplement</span>
<span class="sd">        it subclasses to call different methods.</span>

<span class="sd">        :return: (callable)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.dropEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.dropEvent">[docs]</a>    <span class="k">def</span> <span class="nf">dropEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented to support drag&amp;drop of models. See :class:`QWidget`&#39;&#39;&#39;</span>
        <span class="n">mtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleMimeData</span><span class="p">(</span>
            <span class="n">event</span><span class="o">.</span><span class="n">mimeData</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDropEventCallback</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">mtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Invalid model&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">acceptProposedAction</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.handleMimeData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.handleMimeData">[docs]</a>    <span class="k">def</span> <span class="nf">handleMimeData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mimeData</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Selects the most appropriate data from the given mimeData object</span>
<span class="sd">        (in the order returned by :meth:`getSupportedMimeTypes`) and passes</span>
<span class="sd">        it to the given method.</span>

<span class="sd">        :param mimeData: (QMimeData) the MIME data object from which the model</span>
<span class="sd">                         is to be extracted</span>
<span class="sd">        :param method: (callable&lt;str&gt;) a method that accepts a string as argument.</span>
<span class="sd">                       This method will be called with the data from the mimeData object</span>

<span class="sd">        :return: (str or None) returns the MimeType used if the model was</span>
<span class="sd">                 successfully set, or None if the model could not be set</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">supported</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSupportedMimeTypes</span><span class="p">()</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="n">mimeData</span><span class="o">.</span><span class="n">formats</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">mtype</span> <span class="ow">in</span> <span class="n">supported</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mtype</span> <span class="ow">in</span> <span class="n">formats</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">mimeData</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">mtype</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">method</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">mtype</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Invalid data (</span><span class="si">%s</span><span class="s1">) for MIMETYPE=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                               <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">d</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">mtype</span><span class="p">)))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">(</span><span class="n">taurus</span><span class="o">.</span><span class="n">Debug</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.getModelMimeData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.getModelMimeData">[docs]</a>    <span class="k">def</span> <span class="nf">getModelMimeData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns a MimeData object containing the model data. The default implementation</span>
<span class="sd">        fills the `TAURUS_MODEL_MIME_TYPE`. If the widget&#39;s Model class is</span>
<span class="sd">        Attribute or Device, it also fills `TAURUS_ATTR_MIME_TYPE` or</span>
<span class="sd">        `TAURUS_DEV_MIME_TYPE`, respectively</span>

<span class="sd">        :return: (QMimeData)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">mimeData</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMimeData</span><span class="p">()</span>
        <span class="n">modelname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelName</span><span class="p">()</span>
        <span class="n">mimeData</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">TAURUS_MODEL_MIME_TYPE</span><span class="p">,</span> <span class="n">modelname</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">modelclass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelClass</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">modelclass</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">modelclass</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">modelclass</span><span class="p">,</span> <span class="n">TaurusDevice</span><span class="p">):</span>
            <span class="n">mimeData</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">TAURUS_DEV_MIME_TYPE</span><span class="p">,</span> <span class="n">modelname</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">modelclass</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">modelclass</span><span class="p">,</span> <span class="n">TaurusAttribute</span><span class="p">):</span>
            <span class="n">mimeData</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">TAURUS_ATTR_MIME_TYPE</span><span class="p">,</span> <span class="n">modelname</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mimeData</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.mousePressEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.mousePressEvent">[docs]</a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented to record the start position for drag events.</span>
<span class="sd">        See :class:`~PyQt4.QtGui.QWidget`&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dragEnabled</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
            <span class="c1"># I need to copy it explicetely to avoid a bug with PyQt4.4</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dragStartPosition</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPoint</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getQtClass</span><span class="p">()</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.mouseMoveEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.mouseMoveEvent">[docs]</a>    <span class="k">def</span> <span class="nf">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented to provide drag events.</span>
<span class="sd">        See :class:`~PyQt4.QtGui.QWidget`&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dragEnabled</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">buttons</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getQtClass</span><span class="p">()</span><span class="o">.</span><span class="n">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dragStartPosition</span><span class="p">)</span><span class="o">.</span><span class="n">manhattanLength</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">startDragDistance</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getQtClass</span><span class="p">()</span><span class="o">.</span><span class="n">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getQtClass</span><span class="p">()</span><span class="o">.</span><span class="n">mouseMoveEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>  <span class="c1"># call the superclass</span>
        <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>  <span class="c1"># we make sure we accept after having called the superclass so that it is not propagated (many default implementations of mouseMoveEvent call event.ignore())</span>
        <span class="n">drag</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QDrag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">drag</span><span class="o">.</span><span class="n">setMimeData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModelMimeData</span><span class="p">())</span>
        <span class="n">drag</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">CopyAction</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">CopyAction</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.isDragEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.isDragEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isDragEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;whether the user can drag data from this widget</span>

<span class="sd">        :return: (bool) True if the user can drag data&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dragEnabled</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.setDragEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.setDragEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">setDragEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        sets whether the user is allowed to drag data from this widget</span>

<span class="sd">        :param modifiable: (bool)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dragEnabled</span> <span class="o">=</span> <span class="n">enabled</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.resetDragEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.resetDragEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">resetDragEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Equivalent to setDragEnabled(self.__class__._dragEnabled)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModifiableByUser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">_dragEnabled</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Pending operations related methods: default implementation</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseWidget.updatePendingOpsStyle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.updatePendingOpsStyle">[docs]</a>    <span class="k">def</span> <span class="nf">updatePendingOpsStyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method should be reimplemented by derived classes that want to</span>
<span class="sd">        change their appearance depending whether there are pending operations or not&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.emitValueChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.emitValueChanged">[docs]</a>    <span class="k">def</span> <span class="nf">emitValueChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Connect the specific XXXXChanged signals from derived classes to this</span>
<span class="sd">        method in order to have a unified signal which can be used by Taurus Widgets&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valueChangedSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updatePendingOpsStyle</span><span class="p">()</span>  <span class="c1"># by default, update its own style</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.safeApplyOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.safeApplyOperations">[docs]</a>    <span class="k">def</span> <span class="nf">safeApplyOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ops</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Applies the given operations (or the pending operations if None passed)</span>

<span class="sd">        :param ops: (sequence&lt;taurus.core.taurusoperation.TaurusOperation&gt; or None) list of operations to apply.</span>
<span class="sd">                    If None is given (default) the component fetches the pending operations</span>

<span class="sd">        :return: (bool) False if the apply was aborted by the user or if the</span>
<span class="sd">                 widget is in design mode. True otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">ops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ops</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPendingOperations</span><span class="p">()</span>

        <span class="c1"># Check if we need to take care of dangerous operations</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getForceDangerousOperations</span><span class="p">():</span>
            <span class="n">dangerMsgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dangerMsgs</span> <span class="o">=</span> <span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="n">getDangerMessage</span><span class="p">()</span>
                          <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">ops</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">op</span><span class="o">.</span><span class="n">getDangerMessage</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
        <span class="c1"># warn the user if need be</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dangerMsgs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Potentially dangerous action&quot;</span><span class="p">,</span>
                                            <span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">Proceed?&quot;</span> <span class="o">%</span> <span class="n">dangerMsgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                            <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">,</span>
                                            <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">dangerMsgs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">warningDlg</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Warning</span><span class="p">,</span> <span class="s2">&quot; </span><span class="si">%d</span><span class="s2"> potentially dangerous actions&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">dangerMsgs</span><span class="p">),</span>
                                        <span class="s2">&quot;You are about to apply </span><span class="si">%d</span><span class="s2"> actions that may be potentially dangerous. Proceed?&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span>
                                            <span class="n">dangerMsgs</span><span class="p">),</span>
                                        <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="p">)</span>
            <span class="n">details</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dangerMsgs</span><span class="p">)</span>
            <span class="n">warningDlg</span><span class="o">.</span><span class="n">setDetailedText</span><span class="p">(</span><span class="n">details</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">warningDlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_designMode</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Refusing to apply operation while in design mode&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">applyPendingOperations</span><span class="p">(</span><span class="n">ops</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.setAutoTooltip"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.setAutoTooltip">[docs]</a>    <span class="k">def</span> <span class="nf">setAutoTooltip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determines if the widget should automatically generate a tooltip</span>
<span class="sd">        based on the current widget model.</span>

<span class="sd">        :param yesno: (bool) True to automatically generate tooltip or False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoTooltip</span> <span class="o">=</span> <span class="n">yesno</span></div>

<div class="viewcode-block" id="TaurusBaseWidget.getAutoTooltip"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.getAutoTooltip">[docs]</a>    <span class="k">def</span> <span class="nf">getAutoTooltip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns if the widget is automatically generating a tooltip based</span>
<span class="sd">        on the current widget model.</span>

<span class="sd">        :return: (bool)  True if automatically generating tooltip or False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoTooltip</span></div>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="TaurusBaseWidget.getQtDesignerPluginInfo"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWidget.html#taurus.qt.qtgui.base.TaurusBaseWidget.getQtDesignerPluginInfo">[docs]</a>    <span class="k">def</span> <span class="nf">getQtDesignerPluginInfo</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns pertinent information in order to be able to build a valid</span>
<span class="sd">        QtDesigner widget plugin.</span>

<span class="sd">        The dictionary returned by this method should contain *at least* the</span>
<span class="sd">        following keys and values:</span>
<span class="sd">        - &#39;module&#39; : a string representing the full python module name (ex.: &#39;taurus.qt.qtgui.base&#39;)</span>
<span class="sd">        - &#39;icon&#39; : a string representing valid resource icon (ex.: &#39;designer:combobox.png&#39;)</span>
<span class="sd">        - &#39;container&#39; : a bool telling if this widget is a container widget or not.</span>

<span class="sd">        This default implementation returns the following dictionary::</span>

<span class="sd">            { &#39;group&#39;     : &#39;Taurus [Unclassified]&#39;,</span>
<span class="sd">              &#39;icon&#39;      : &#39;logos:taurus.png&#39;,</span>
<span class="sd">              &#39;container&#39; : False }</span>

<span class="sd">        :return: (dict) a map with pertinent designer information&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;Taurus [Unclassified]&#39;</span><span class="p">,</span>
            <span class="s1">&#39;icon&#39;</span><span class="p">:</span> <span class="s1">&#39;logos:taurus.png&#39;</span><span class="p">,</span>
            <span class="s1">&#39;container&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span></div></div>


<div class="viewcode-block" id="TaurusBaseWritableWidget"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget">[docs]</a><span class="k">class</span> <span class="nc">TaurusBaseWritableWidget</span><span class="p">(</span><span class="n">TaurusBaseWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The base class for all taurus input widgets</span>

<span class="sd">    it emits the applied signal when the value has been applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">applied</span> <span class="o">=</span> <span class="n">baseSignal</span><span class="p">(</span><span class="s1">&#39;applied&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">taurus_parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">designMode</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call__init__</span><span class="p">(</span><span class="n">TaurusBaseWidget</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                          <span class="n">parent</span><span class="o">=</span><span class="n">taurus_parent</span><span class="p">,</span> <span class="n">designMode</span><span class="o">=</span><span class="n">designMode</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lastValue</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Overwrite not to show quality by default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showQuality</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Don&#39;t do auto-apply by default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoApply</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Don&#39;t force a writing to attribute when there are not pending</span>
        <span class="c1"># operations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_forcedApply</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">valueChangedSignal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updatePendingOperations</span><span class="p">)</span>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># TaurusBaseWidget overwriting</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseWritableWidget.getModelClass"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.getModelClass">[docs]</a>    <span class="k">def</span> <span class="nf">getModelClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :class:`TaurusBaseWidget`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">TaurusAttribute</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.isReadOnly"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.isReadOnly">[docs]</a>    <span class="k">def</span> <span class="nf">isReadOnly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :class:`TaurusBaseWidget`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># QT properties</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseWritableWidget.setAutoApply"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.setAutoApply">[docs]</a>    <span class="k">def</span> <span class="nf">setAutoApply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets autoApply mode. In autoApply mode, the widget writes the value</span>
<span class="sd">        automatically whenever it is changed by the user (e.g., when</span>
<span class="sd">        :meth:`notifyValueChanged` is called). If False, a value changed just</span>
<span class="sd">        flags a &quot;pending operation&quot; which needs to be applied manually by</span>
<span class="sd">        the user before the value gets written.</span>

<span class="sd">        :param auto: (bool) True for setting autoApply mode. False for disabling</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoApply</span> <span class="o">=</span> <span class="n">auto</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.getAutoApply"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.getAutoApply">[docs]</a>    <span class="k">def</span> <span class="nf">getAutoApply</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;whether autoApply mode is enabled or not.</span>

<span class="sd">        :return: (bool)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoApply</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.resetAutoApply"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.resetAutoApply">[docs]</a>    <span class="k">def</span> <span class="nf">resetAutoApply</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;resets the autoApply mode (i.e.: sets it to False)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAutoApply</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.setForcedApply"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.setForcedApply">[docs]</a>    <span class="k">def</span> <span class="nf">setForcedApply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">forced</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets the forcedApply mode. In forcedApply mode, values are written even</span>
<span class="sd">        if there are not pending operations (e.g. even if the displayed value is</span>
<span class="sd">        the same as the currently applied one).</span>

<span class="sd">        .. seealso: :meth:`forceApply` and :meth:`writeValue`</span>

<span class="sd">        :param forced: (bool) True for setting forcedApply mode. False for disabling</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_forcedApply</span> <span class="o">=</span> <span class="n">forced</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.getForcedApply"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.getForcedApply">[docs]</a>    <span class="k">def</span> <span class="nf">getForcedApply</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;whether forcedApply mode is enabled or not.</span>

<span class="sd">        :return: (bool)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_forcedApply</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.resetForcedApply"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.resetForcedApply">[docs]</a>    <span class="k">def</span> <span class="nf">resetForcedApply</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;resets the forcedApply mode (i.e.: sets it to False)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setForcedApply</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

    <span class="nd">@deprecation_decorator</span><span class="p">(</span><span class="n">rel</span><span class="o">=</span><span class="s1">&#39;4.0&#39;</span><span class="p">,</span> <span class="n">alt</span><span class="o">=</span><span class="s1">&#39;notifyValueChanged&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">valueChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">notifyValueChanged</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>

<div class="viewcode-block" id="TaurusBaseWritableWidget.notifyValueChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.notifyValueChanged">[docs]</a>    <span class="k">def</span> <span class="nf">notifyValueChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Subclasses should connect some particular signal to this method for</span>
<span class="sd">        indicating that something has changed.</span>
<span class="sd">        e.g., a QLineEdit should connect its &quot;textChanged&quot; signal...</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emitValueChanged</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoApply</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeValue</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.writeValue"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.writeValue">[docs]</a>    <span class="k">def</span> <span class="nf">writeValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">forceApply</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Writes the value to the attribute, either by applying pending</span>
<span class="sd">        operations or (if the ForcedApply flag is True), it writes directly when</span>
<span class="sd">        no operations are pending</span>

<span class="sd">        It emits the applied signal if apply is not aborted.</span>

<span class="sd">        :param forceApply: (bool) If True, it behaves as in forceApply mode</span>
<span class="sd">                           (even if the forceApply mode is disabled by</span>
<span class="sd">                           :meth:`setForceApply`)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasPendingOperations</span><span class="p">():</span>
            <span class="n">applied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">safeApplyOperations</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">applied</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">applied</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="c1"># maybe we want to force an apply even if there are no pending ops...</span>
        <span class="n">kmods</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">keyboardModifiers</span><span class="p">()</span>
        <span class="n">controlpressed</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">kmods</span> <span class="o">&amp;</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ControlModifier</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getForcedApply</span><span class="p">()</span> <span class="ow">or</span> <span class="n">forceApply</span> <span class="ow">or</span> <span class="n">controlpressed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forceApply</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.forceApply"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.forceApply">[docs]</a>    <span class="k">def</span> <span class="nf">forceApply</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;It (re)applies the value regardless of pending operations.</span>
<span class="sd">        WARNING: USE WITH CARE. In most cases what you need is to make sure</span>
<span class="sd">        that pending operations are properly created, not calling this method</span>

<span class="sd">        It emits the applied signal if apply is not aborted.</span>

<span class="sd">        .. seealso: :meth:`setForceApply` and :meth:`writeValue`</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">WriteAttrOperation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">(),</span> <span class="n">v</span><span class="p">,</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">getOperationCallbacks</span><span class="p">())</span>
            <span class="n">op</span><span class="o">.</span><span class="n">setDangerMessage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDangerMessage</span><span class="p">())</span>
            <span class="n">applied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">safeApplyOperations</span><span class="p">([</span><span class="n">op</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">applied</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">applied</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Force-Applied value = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Unexpected exception in forceApply&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.handleEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.handleEvent">[docs]</a>    <span class="k">def</span> <span class="nf">handleEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">evt_value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :class:`TaurusBaseWidget`&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">evt_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">TaurusEventType</span><span class="o">.</span><span class="n">Change</span><span class="p">,</span> <span class="n">TaurusEventType</span><span class="o">.</span><span class="n">Periodic</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emitValueChanged</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.postAttach"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.postAttach">[docs]</a>    <span class="k">def</span> <span class="nf">postAttach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :class:`TaurusBaseWidget`&#39;&#39;&#39;</span>
        <span class="n">TaurusBaseWidget</span><span class="o">.</span><span class="n">postAttach</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isAttached</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelValueObj</span><span class="p">()</span><span class="o">.</span><span class="n">wvalue</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Pending operations related methods</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusBaseWritableWidget.resetPendingOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.resetPendingOperations">[docs]</a>    <span class="k">def</span> <span class="nf">resetPendingOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :class:`TaurusBaseWidget`&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isAttached</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelValueObj</span><span class="p">()</span><span class="o">.</span><span class="n">wvalue</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="n">TaurusBaseWidget</span><span class="o">.</span><span class="n">resetPendingOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStyle</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.updatePendingOperations"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.updatePendingOperations">[docs]</a>    <span class="k">def</span> <span class="nf">updatePendingOperations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :class:`TaurusBaseWidget`&#39;&#39;&#39;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">model_value</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">getValueObj</span><span class="p">()</span><span class="o">.</span><span class="n">wvalue</span>
            <span class="n">wigdet_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">areStrValuesEqual</span><span class="p">(</span><span class="n">model_value</span><span class="p">,</span> <span class="n">wigdet_value</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_operations</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">operation</span> <span class="o">=</span> <span class="n">WriteAttrOperation</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">wigdet_value</span><span class="p">,</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">getOperationCallbacks</span><span class="p">())</span>
                <span class="n">operation</span><span class="o">.</span><span class="n">setDangerMessage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDangerMessage</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_operations</span> <span class="o">=</span> <span class="p">[</span><span class="n">operation</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_operations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStyle</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.getOperationCallbacks"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.getOperationCallbacks">[docs]</a>    <span class="k">def</span> <span class="nf">getOperationCallbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the operation callbacks (i.e., a sequence of methods that will be called after an operation is executed</span>
<span class="sd">           (this default implementation it returns an empty list).</span>

<span class="sd">        :return: (sequence&lt;callable&gt;)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.getValue"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.getValue">[docs]</a>    <span class="k">def</span> <span class="nf">getValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method must be implemented in derived classes to return</span>
<span class="sd">        the value to be written. Note that this may differ</span>
<span class="sd">        from the displayed value (e.g. for a numeric value being</span>
<span class="sd">        edited by a QLineEdit-based widget, the displayed value will</span>
<span class="sd">        be a string while getValue will return a number)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;Not allowed to call TaurusBaseWritableWidget.getValue()&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.setValue"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.setValue">[docs]</a>    <span class="k">def</span> <span class="nf">setValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method must be implemented in derived classes to provide</span>
<span class="sd">        a (widget-specific) way of updating the displayed value based</span>
<span class="sd">        on a given attribute value</span>

<span class="sd">        :param v: The attribute value</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;Not allowed to call TaurusBaseWritableWidget.setValue()&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusBaseWritableWidget.updateStyle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.updateStyle">[docs]</a>    <span class="k">def</span> <span class="nf">updateStyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :class:`TaurusBaseWidget`&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoTooltip</span><span class="p">:</span>
            <span class="n">toolTip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFormatedToolTip</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasPendingOperations</span><span class="p">():</span>
                <span class="n">v_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getValue</span><span class="p">())</span>
                <span class="n">model_v_str</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">getModelValueObj</span><span class="p">(),</span> <span class="s1">&#39;wvalue&#39;</span><span class="p">,</span> <span class="s1">&#39;-----&#39;</span><span class="p">)</span>
                <span class="n">toolTip</span> <span class="o">+=</span> <span class="s1">&#39;&lt;hr/&gt;Displayed value (</span><span class="si">%s</span><span class="s1">) differs from applied value (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">v_str</span><span class="p">,</span> <span class="n">model_v_str</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">toolTip</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_updateValidator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt_value</span><span class="p">):</span>  <span class="c1"># TODO: Remove this method</span>
        <span class="c1"># re-set the validator ranges if applicable</span>
        <span class="k">if</span> <span class="n">evt_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validator</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QIntValidator</span><span class="p">):</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">evt_value</span><span class="o">.</span><span class="n">min_value</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">evt_value</span><span class="o">.</span><span class="n">max_value</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                <span class="n">bottom</span><span class="p">)</span> <span class="k">if</span> <span class="n">bottom</span> <span class="o">!=</span> <span class="n">TaurusConfiguration</span><span class="o">.</span><span class="n">no_min_value</span> <span class="k">else</span> <span class="o">-</span><span class="n">sys</span><span class="o">.</span><span class="n">maxint</span>
            <span class="n">top</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                <span class="n">top</span><span class="p">)</span> <span class="k">if</span> <span class="n">top</span> <span class="o">!=</span> <span class="n">TaurusConfiguration</span><span class="o">.</span><span class="n">no_max_value</span> <span class="k">else</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxint</span>
            <span class="n">v</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Validator range set to </span><span class="si">%i</span><span class="s2">-</span><span class="si">%i</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QDoubleValidator</span><span class="p">):</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">evt_value</span><span class="o">.</span><span class="n">min_value</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">evt_value</span><span class="o">.</span><span class="n">max_value</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span>
                <span class="n">bottom</span><span class="p">)</span> <span class="k">if</span> <span class="n">bottom</span> <span class="o">!=</span> <span class="n">TaurusConfiguration</span><span class="o">.</span><span class="n">no_min_value</span> <span class="k">else</span> <span class="o">-</span><span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>
            <span class="n">top</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span>
                <span class="n">top</span><span class="p">)</span> <span class="k">if</span> <span class="n">top</span> <span class="o">!=</span> <span class="n">TaurusConfiguration</span><span class="o">.</span><span class="n">no_max_value</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>
            <span class="n">v</span><span class="o">.</span><span class="n">setBottom</span><span class="p">(</span><span class="n">bottom</span><span class="p">)</span>
            <span class="n">v</span><span class="o">.</span><span class="n">setTop</span><span class="p">(</span><span class="n">top</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Validator range set to </span><span class="si">%f</span><span class="s2">-</span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="TaurusBaseWritableWidget.getQtDesignerPluginInfo"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/base/_TaurusBaseWritableWidget.html#taurus.qt.qtgui.base.TaurusBaseWritableWidget.getQtDesignerPluginInfo">[docs]</a>    <span class="k">def</span> <span class="nf">getQtDesignerPluginInfo</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :class:`TaurusBaseWidget`&#39;&#39;&#39;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">TaurusBaseWidget</span><span class="o">.</span><span class="n">getQtDesignerPluginInfo</span><span class="p">()</span>
        <span class="n">ret</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Taurus Input&#39;</span>
        <span class="k">return</span> <span class="n">ret</span></div></div>

</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../',
            VERSION:'4.1.2-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>