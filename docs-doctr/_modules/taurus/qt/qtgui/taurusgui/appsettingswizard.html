

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>taurus.qt.qtgui.taurusgui.appsettingswizard &mdash; taurus 4.1.2-alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../../search.html"/>
    <link rel="top" title="taurus 4.1.2-alpha documentation" href="../../../../../index.html"/>
        <link rel="up" title="Module code" href="../../../../index.html"/> 

  
  <script src="../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../index.html" class="icon icon-home"> taurus
          

          
            
            <img src="../../../../../_static/taurus.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference external" href="http://www.taurus-scada.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/taurus-org/taurus">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/taurus">Download from PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs.html">Taurus 4.1 documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../../index.html">taurus</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
      
    <li>taurus.qt.qtgui.taurusgui.appsettingswizard</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for taurus.qt.qtgui.taurusgui.appsettingswizard</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>

<span class="c1">#############################################################################</span>
<span class="c1">##</span>
<span class="c1"># This file is part of Taurus</span>
<span class="c1">##</span>
<span class="c1"># http://taurus-scada.org</span>
<span class="c1">##</span>
<span class="c1"># Copyright 2011 CELLS / ALBA Synchrotron, Bellaterra, Spain</span>
<span class="c1">##</span>
<span class="c1"># Taurus is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU Lesser General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">##</span>
<span class="c1"># Taurus is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU Lesser General Public License for more details.</span>
<span class="c1">##</span>
<span class="c1"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c1"># along with Taurus.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">##</span>
<span class="c1">###########################################################################</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This Wizard provide functionality for creating from scratch a configuration</span>
<span class="sd">directory for a TaurusGUI based application.</span>

<span class="sd">The files in the configuration dir determine the default, permanent, pre-defined</span>
<span class="sd">contents of the GUI. While the user may add/remove more elements at run</span>
<span class="sd">time and those customizations will also be stored, this file defines what a</span>
<span class="sd">user will find when launching the GUI for the first time.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;AppSettingsWizard&quot;</span><span class="p">,</span> <span class="s2">&quot;ExternalAppEditor&quot;</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">from</span> <span class="nn">lxml</span> <span class="k">import</span> <span class="n">etree</span>

<span class="kn">from</span> <span class="nn">taurus</span> <span class="k">import</span> <span class="n">tauruscustomsettings</span>
<span class="kn">from</span> <span class="nn">taurus.external.qt</span> <span class="k">import</span> <span class="n">Qt</span>
<span class="kn">import</span> <span class="nn">taurus.qt.qtgui.panel</span>
<span class="kn">import</span> <span class="nn">taurus.qt.qtgui.taurusgui.paneldescriptionwizard</span>
<span class="kn">import</span> <span class="nn">taurus.qt.qtgui.input</span>
<span class="kn">from</span> <span class="nn">taurus.core.util.enumeration</span> <span class="k">import</span> <span class="n">Enumeration</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtgui.util</span> <span class="k">import</span> <span class="n">ExternalAppAction</span>


<span class="k">class</span> <span class="nc">BooleanWidget</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents the simple boolean widget with two RadioButtons</span>
<span class="sd">    true and false. The default value of the widget is true.</span>
<span class="sd">    It change the value by using getValue and setValue methods</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">valueChangedSignal</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">Qt</span><span class="o">.</span><span class="n">QWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_formLayout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trueButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QRadioButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_formLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trueButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">falseButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QRadioButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_formLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">falseButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trueButton</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Yes&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">falseButton</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trueButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valueChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">falseButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valueChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDefaultValue</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">valueChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trueButton</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actualValue</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valueChangedSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_actualValue</span><span class="p">,</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actualValue</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actualValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trueButton</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDefaultValue</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trueButton</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">falseButton</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="ow">not</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actualValue</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">getValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">trueButton</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getDefaultValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>


<span class="k">class</span> <span class="nc">BasePage</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QWizardPage</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This class represents the base page for all of the pages in the wizard</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">completeChanged</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">Qt</span><span class="o">.</span><span class="n">QWizardPage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_item_funcs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QGridLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Qt</span><span class="o">.</span><span class="n">QWizardPage</span><span class="o">.</span><span class="n">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">fromXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param xml: (etree.Element) root node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">completeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">isComplete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span>

    <span class="k">def</span> <span class="nf">_markRed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Set the color of the given label to red</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">palette</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">palette</span><span class="p">()</span>
        <span class="n">palette</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPalette</span><span class="o">.</span><span class="n">WindowText</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_markBlack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Set the color of the given label to black</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">palette</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">palette</span><span class="p">()</span>
        <span class="n">palette</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPalette</span><span class="o">.</span><span class="n">WindowText</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setStatusLabelPalette</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Set the label look as as status label</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">label</span><span class="o">.</span><span class="n">setAutoFillBackground</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">palette</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">palette</span><span class="p">()</span>
        <span class="n">gradient</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLinearGradient</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="o">.</span><span class="n">fromRgb</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
        <span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="o">.</span><span class="n">fromRgb</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">227</span><span class="p">))</span>
        <span class="n">gradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="o">.</span><span class="n">fromRgb</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
        <span class="n">gradient</span><span class="o">.</span><span class="n">setSpread</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QGradient</span><span class="o">.</span><span class="n">RepeatSpread</span><span class="p">)</span>
        <span class="n">palette</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Window</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QBrush</span><span class="p">(</span><span class="n">gradient</span><span class="p">))</span>
        <span class="n">palette</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPalette</span><span class="o">.</span><span class="n">WindowText</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_item_funcs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item_funcs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nextPageId</span> <span class="o">=</span> <span class="nb">id</span>

    <span class="k">def</span> <span class="nf">nextId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nextPageId</span>


<span class="k">class</span> <span class="nc">IntroPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Introduction page</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Introduction&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QWizard</span><span class="o">.</span><span class="n">WatermarkPixmap</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span>
            <span class="s2">&quot;document-properties&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pixmap</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">))</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getIntroText</span><span class="p">())</span>
        <span class="n">label</span><span class="o">.</span><span class="n">setWordWrap</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getIntroText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;This wizard will guide you through the process of creating a &#39;</span> <span class="o">+</span> \
               <span class="s1">&#39;GUI based on TaurusGUI.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> \
               <span class="s1">&#39;TaurusGui-based applications are very customizable. The user can &#39;</span> <span class="o">+</span> \
               <span class="s1">&#39;add/remove elements at run time and store those customizations. So &#39;</span> <span class="o">+</span> \
               <span class="s1">&#39;with this wizard you will define just the default contents of the GUI.&#39;</span>
        <span class="k">return</span> <span class="n">text</span>

    <span class="k">def</span> <span class="nf">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nextPageId</span> <span class="o">=</span> <span class="nb">id</span>


<span class="k">class</span> <span class="nc">ProjectPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Project&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSubTitle</span><span class="p">(</span>
            <span class="s1">&#39;Choose a location for the application files (i.e., the &quot;project directory&quot;)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s1">&#39;projectDir&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getProjectDir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Project Directory:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLE</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QDir</span><span class="o">.</span><span class="n">homePath</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLE</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLE</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s1">&#39;This directory will be used to store all files needed by the application.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projectDirBT</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span>
            <span class="s2">&quot;document-properties&quot;</span><span class="p">),</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLabel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLE</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_projectDirBT</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_projectDirBT</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onSelectDir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">onSelectDir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dirname</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Choose the project directory&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLE</span><span class="o">.</span><span class="n">text</span><span class="p">()))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">dirname</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLE</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">dirname</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validatePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dirname</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLE</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dirname</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dirname</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Error creating project directory&#39;</span><span class="p">,</span>
                                       <span class="s1">&#39;Could not create the project directory.</span><span class="se">\n</span><span class="s1">Reason:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span>
                                           <span class="n">e</span><span class="p">),</span>
                                       <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">configs_found</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="s2">&quot;tgconf_*&quot;</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="n">getXmlConfigFileName</span><span class="p">()))</span>
        <span class="c1"># fname = os.path.join(dirname, self.wizard().getXmlConfigFileName())</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">configs_found</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">fname</span> <span class="o">=</span> <span class="n">configs_found</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">option</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Overwrite project?&#39;</span><span class="p">,</span>
                                             <span class="s1">&#39;The &quot;</span><span class="si">%s</span><span class="s1">&quot; file already exists in the project directory.</span><span class="se">\n</span><span class="s1"> Do you want to edit the existing project?&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                                 <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">fname</span><span class="p">)),</span>
                                             <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="n">loadXml</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Error loading project configuration&#39;</span><span class="p">,</span>
                                           <span class="s1">&#39;Could not load the existing configuration.</span><span class="se">\n</span><span class="s1">Reason:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span>
                                               <span class="n">e</span><span class="p">),</span>
                                           <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">dirname</span><span class="p">)):</span>
            <span class="n">option</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Non empty project dir&#39;</span><span class="p">,</span>
                                             <span class="s1">&#39;The project directory (&quot;</span><span class="si">%s</span><span class="s1">&quot;) is not empty.</span><span class="se">\n</span><span class="s1">Are you sure you want to use it?&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                                 <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dirname</span><span class="p">)),</span>
                                             <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">option</span> <span class="o">!=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># if all went ok...</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_getProjectDir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_projectDirLE</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>


<span class="k">class</span> <span class="nc">GeneralSettings</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;General settings&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;guiName&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getGUIName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;organizationName&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getOrganizationName</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fromXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;GUI_NAME&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span><span class="o">.</span><span class="n">setEditText</span><span class="p">(</span>
            <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;ORGANIZATION&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;Taurus&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_getGUIName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_getOrganizationName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;GUI name:&quot;</span><span class="p">)</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QFont</span><span class="p">()</span>  <span class="c1"># set bigger font</span>
        <span class="n">font</span><span class="o">.</span><span class="n">setPointSize</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLineEdit</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLineEdit</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLineEdit</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLabel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                               <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLineEdit</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_organizationNameLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Organization name:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getOrganizationNames</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span><span class="o">.</span><span class="n">setEditable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_organizationNameLabel</span><span class="p">,</span>
                               <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span><span class="p">,</span>
                               <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStatusLabelPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLineEdit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span><span class="o">.</span><span class="n">editTextChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_organizationCombo</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getOrganizationNames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;TAURUS&quot;</span><span class="p">,</span> <span class="s2">&quot;ALBA&quot;</span><span class="p">,</span> <span class="s2">&quot;DESY&quot;</span><span class="p">,</span> <span class="s2">&quot;Elettra&quot;</span><span class="p">,</span> <span class="s2">&quot;ESRF&quot;</span><span class="p">,</span> <span class="s2">&quot;MAX-lab&quot;</span><span class="p">,</span> <span class="s2">&quot;SOLEIL&quot;</span><span class="p">,</span> <span class="s2">&quot;XFEL&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_markRed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLabel</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_markBlack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_guiNameLabel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">completeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setStatus</span><span class="p">(</span><span class="s2">&quot;Please type the name of the GUI&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setStatus</span><span class="p">(</span><span class="s2">&quot;Press next button to continue&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">CustomLogoPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoDefaultPath</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tauruscustomsettings</span><span class="p">,</span>
                                              <span class="s2">&quot;ORGANIZATION_LOGO&quot;</span><span class="p">,</span>
                                              <span class="s2">&quot;logos:taurus.png&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoDefaultPath</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;customLogo&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getCustomLogo</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_changeImage</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Custom logo&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">If you want to have a custom logo inside your application panel, please select the image file. </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="o">.</span><span class="n">setWordWrap</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Custom logo:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoButton</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Browse...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;folder-open&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoButton</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogo</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogo</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogo</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoDefaultButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoDefaultButton</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Default&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoDefaultButton</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoDefaultButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;actions:edit-undo.svg&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoRemoveButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoRemoveButton</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Remove&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoRemoveButton</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoRemoveButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;emblems:emblem-unreadable.svg&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem2</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLabel</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span><span class="p">,</span>
                               <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_customLogoButton</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoDefaultButton</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoRemoveButton</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_customLogo</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignHCenter</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_selectImage</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoDefaultButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setDefaultImage</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoRemoveButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_removeImage</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_changeImage</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Press next button to continue&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStatusLabelPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setNoImage</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">fromXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml</span><span class="p">):</span>
        <span class="n">customLogo</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span>
            <span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;CUSTOM_LOGO&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">customLogo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setDefaultImage</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">customLogo</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setDefaultImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_customLogoDefaultPath</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setNoImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogo</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;image-missing&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pixmap</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoPath</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoRemoveButton</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_removeImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setNoImage</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_getCustomLogo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_customLogoPath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_customLogoPath</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_selectImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span>
            <span class="s2">&quot;Open File&quot;</span><span class="p">),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QDir</span><span class="o">.</span><span class="n">homePath</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Images (*.png *.xpm *.jpg *.jpeg *.svg)&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_changeImage</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_changeImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_customLogoLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fileName</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">fileName</span><span class="p">)):</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QImage</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fileName</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_setImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoPath</span> <span class="o">=</span> <span class="n">fileName</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_setStatus</span><span class="p">(</span><span class="s2">&quot;Press next button to continue&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoRemoveButton</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_setNoImage</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_setStatus</span><span class="p">(</span><span class="s2">&quot;The file is invalid&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_setNoImage</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_setStatus</span><span class="p">(</span><span class="s2">&quot;The file does not exist&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setNoImage</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setStatus</span><span class="p">(</span><span class="s2">&quot;No image&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_customLogo</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span>
                <span class="n">image</span><span class="o">.</span><span class="n">scaled</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">KeepAspectRatio</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QImage</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_customLogo</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">()</span><span class="o">.</span><span class="n">fromImage</span><span class="p">(</span>
                <span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">scaled</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">KeepAspectRatio</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_customLogo</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span>
                <span class="n">Qt</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="s2">&quot;image-missing&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">scaled</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_customLogoPath</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_setStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SynopticPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">fromXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">synopticNodes</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getArrayFromNode</span><span class="p">(</span>
            <span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;SYNOPTIC&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[])</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">synopticNodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;str&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;str&quot;</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;str&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;synoptics&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getSynoptics</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshSynopticList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Synoptics&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;If you want to add one or more synoptic panels (graphical views of instruments) select the corresponding JDRAW files here</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="o">.</span><span class="n">setWordWrap</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_synopticGroupBox</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_synopticGroupBox</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_synopticGroupBox</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_synopticGroupBox</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot; QGroupBox::title {  subcontrol-position: top left; padding: 5 5px; }&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synopticGroupBox</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synopticGroupBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synopticGroupBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Synoptic&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Remove Synoptic&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Move Up&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Move Down&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;list-add&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;list-remove&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;go-up&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;go-down&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_addSynoptic</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_removeSynoptic</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_moveUp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_moveDown</span><span class="p">)</span>
        <span class="c1">#self._synopticList.itemDoubleClicked.connect(self._editSynoptic)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Press next button to continue&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStatusLabelPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_addSynoptic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s1">&#39;projectDir&#39;</span><span class="p">)</span>
        <span class="n">fileNames</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileNames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span>
            <span class="s2">&quot;Open File&quot;</span><span class="p">),</span> <span class="n">pdir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;JDW (*.jdw );; All files (*)&quot;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">fileName</span> <span class="ow">in</span> <span class="n">fileNames</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fileName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshSynopticList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_editSynoptic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshSynopticList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_removeSynoptic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_refreshSynopticList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_moveUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_refreshSynopticList</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">indexFromItem</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_moveDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_refreshSynopticList</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">indexFromItem</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptic_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_refreshSynopticList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_synopticList</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getSynoptics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_synoptics</span>

    <span class="k">def</span> <span class="nf">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_setStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MacroServerInfoPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> &lt;b&gt;</span><span class="si">%s</span><span class="s2">&lt;/b&gt; can communicate with a Sardana&#39;s Macro Server and Pool.</span><span class="se">\n</span><span class="s2">You can enable and configure them here:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;guiName&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;macroServerName&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMacroServerName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;doorName&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getDoorName</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Macro Server Info&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="o">.</span><span class="n">setWordWrap</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;Enable Sardana communication&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot; QGroupBox::title {  subcontrol-position: top left; padding: 5 5px; }&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">sardana.taurus.qt.qtgui.extra_macroexecutor.common</span> <span class="k">import</span> \
                <span class="n">TaurusMacroConfigurationDialog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span> <span class="o">=</span> <span class="n">TaurusMacroConfigurationDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">setWindowFlags</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">buttonBox</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Press next button to continue&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStatusLabelPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">macroServerComboBox</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">doorComboBox</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fromXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml</span><span class="p">):</span>
        <span class="n">macroserverName</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span>
            <span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;MACROSERVER_NAME&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">doorName</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span>
            <span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;DOOR_NAME&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">macroEditorsPath</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span>
            <span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;MACROEDITORS_PATH&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">macroServerComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span>
            <span class="n">macroserverName</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchExactly</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">macroServerComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">doorComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span>
            <span class="n">doorName</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchExactly</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">doorComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">())</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">macroServerComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="n">currentId</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="n">currentId</span><span class="p">()</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getMacroServerName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">())</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">macroServerComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">macroServerComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_getDoorName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_macroGroupBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">())</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">macroServerComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_confWidget</span><span class="o">.</span><span class="n">doorComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_setStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">InstrumentsPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;instruments&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getInstruments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&lt;b&gt;</span><span class="si">%s</span><span class="s2">&lt;/b&gt; can use instrument information stored in the Sardana&#39;s Pool to create instrument panels.&quot;</span> <span class="o">%</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;guiName&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Instruments from Pool:&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="o">.</span><span class="n">setWordWrap</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_instrumentsLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Generate panels from Pool Info?&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_intstrumentsBoolean</span> <span class="o">=</span> <span class="n">BooleanWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_intstrumentsBoolean</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_instrumentsLabel</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
                               <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_intstrumentsBoolean</span><span class="p">,</span>
                               <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Press next button to continue&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStatusLabelPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fromXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml</span><span class="p">):</span>
        <span class="n">instruments</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span>
            <span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;INSTRUMENTS_FROM_POOL&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;False&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">instruments</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_intstrumentsBoolean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_intstrumentsBoolean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getInstruments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_intstrumentsBoolean</span><span class="o">.</span><span class="n">getValue</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_setStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">PanelsPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;panels&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getPanels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshPanelList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Panels editor&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;If you want extra panels add them to this list</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panelGroupBox</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panelGroupBox</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panelGroupBox</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panelGroupBox</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot; QGroupBox::title {  subcontrol-position: top left; padding: 5 5px; }&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panelGroupBox</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panelGroupBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panelGroupBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Panel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Remove Panel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Move Up&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Move Down&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;list-add&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;list-remove&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;go-up&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;go-down&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_addPanel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_removePanel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_moveUp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_moveDown</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">itemDoubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_editPanel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Press next button to continue&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStatusLabelPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fromXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">panelNodes</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getArrayFromNode</span><span class="p">(</span>
            <span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;PanelDescriptions&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[])</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">panelNodes</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span>
                <span class="n">child</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">child</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_addPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">paneldesc</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">taurus</span><span class="o">.</span><span class="n">qt</span><span class="o">.</span><span class="n">qtgui</span><span class="o">.</span><span class="n">taurusgui</span><span class="o">.</span><span class="n">paneldescriptionwizard</span><span class="o">.</span><span class="n">PanelDescriptionWizard</span><span class="o">.</span><span class="n">getDialog</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">paneldesc</span><span class="o">.</span><span class="n">getWidget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">paneldesc</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">paneldesc</span><span class="o">.</span><span class="n">toXml</span><span class="p">()))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshPanelList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_editPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshPanelList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_removePanel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_refreshPanelList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_moveUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_refreshPanelList</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">indexFromItem</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_moveDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_refreshPanelList</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">indexFromItem</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panel_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_refreshPanelList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">:</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">xml</span> <span class="o">=</span> <span class="n">panel</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_panelList</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getPanels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_panels</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panels</span>

    <span class="k">def</span> <span class="nf">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_setStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>


<div class="viewcode-block" id="ExternalAppEditor"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_ExternalAppEditor.html#taurus.qt.qtgui.taurusgui.ExternalAppEditor">[docs]</a><span class="k">class</span> <span class="nc">ExternalAppEditor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    A dialog for configuring an external appaction for a TaurusMainWindow.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1">#@todo: this class should be made more generic (e.g. provide a getter for an ExternalAppAction) and then moved elsewhere</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">Qt</span><span class="o">.</span><span class="n">QDialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModal</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;External Application Editor&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dlgBox</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="p">(</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QGridLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout2</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layout2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dlgBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_icon</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> On this page you can define an external application. </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="o">.</span><span class="n">setWordWrap</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execFileLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Command:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execFileLineEdit</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execFileLineEdit</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="c1"># self._execFileLineEdit.setReadOnly(True)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execFileButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execFileButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;folder-open&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execFileButton</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Browse...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execFileButton</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_execFileLabel</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_execFileLineEdit</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_execFileButton</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paramsLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Parameters:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paramsLineEdit</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paramsLineEdit</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_paramsLabel</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_paramsLineEdit</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_textLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Text:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_textLineEdit</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_textLineEdit</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_textLabel</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_textLineEdit</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_iconLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Icon:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_iconLogo</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_iconLogo</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;status:image-missing.svg&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_iconLogo</span><span class="o">.</span><span class="n">setIconSize</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_iconLabel</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_iconLogo</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout1</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>

        <span class="c1"># connections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execFileButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_selectExecFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execFileLineEdit</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setDefaultText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_iconLogo</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_selectIcon</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dlgBox</span><span class="o">.</span><span class="n">accepted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dlgBox</span><span class="o">.</span><span class="n">rejected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setIcon</span><span class="p">(</span><span class="n">ExternalAppAction</span><span class="o">.</span><span class="n">DEFAULT_ICON_NAME</span><span class="p">)</span>

<div class="viewcode-block" id="ExternalAppEditor.checkData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_ExternalAppEditor.html#taurus.qt.qtgui.taurusgui.ExternalAppEditor.checkData">[docs]</a>    <span class="k">def</span> <span class="nf">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_execFileLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dlgBox</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dlgBox</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_setDefaultText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execFileLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">index</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_textLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="n">index</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_textLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_selectExecFile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span>
            <span class="s2">&quot;Open File&quot;</span><span class="p">),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QDir</span><span class="o">.</span><span class="n">homePath</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;All files (*)&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filePath</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_execFileLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setDefaultText</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_getExecFile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_execFileLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_selectIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">taurus.qt.qtgui.icon</span> <span class="k">import</span> <span class="n">QIconCatalog</span>
        <span class="n">catalog</span> <span class="o">=</span> <span class="n">QIconCatalog</span><span class="p">()</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">())</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">catalog</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;Icon Catalog&#39;</span><span class="p">)</span>
        <span class="n">catalog</span><span class="o">.</span><span class="n">iconSelected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setIcon</span><span class="p">)</span>
        <span class="n">catalog</span><span class="o">.</span><span class="n">iconSelected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dlg</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_iconLogo</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_iconLogo</span><span class="o">.</span><span class="n">setIconSize</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_iconLogo</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_icon</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">_getParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_paramsLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="c1"># return str(self._paramsLineEdit.text()).split()</span>

    <span class="k">def</span> <span class="nf">_getText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_textLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_getIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_icon</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_toXml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;ExternalApp&quot;</span><span class="p">)</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;command&quot;</span><span class="p">)</span>
        <span class="n">command</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getExecFile</span><span class="p">()</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">)</span>
        <span class="n">params</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getParams</span><span class="p">()</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getText</span><span class="p">()</span>
        <span class="n">icon</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">)</span>
        <span class="n">icon</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getIcon</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">etree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="ExternalAppEditor.getDialog"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_ExternalAppEditor.html#taurus.qt.qtgui.taurusgui.ExternalAppEditor.getDialog">[docs]</a>    <span class="k">def</span> <span class="nf">getDialog</span><span class="p">():</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">ExternalAppEditor</span><span class="p">()</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">dlg</span><span class="o">.</span><span class="n">_getExecFile</span><span class="p">(),</span> <span class="n">dlg</span><span class="o">.</span><span class="n">_toXml</span><span class="p">(),</span> <span class="p">(</span><span class="n">dlg</span><span class="o">.</span><span class="n">result</span><span class="p">()</span> <span class="o">==</span> <span class="n">dlg</span><span class="o">.</span><span class="n">Accepted</span><span class="p">)</span></div></div>


<span class="k">class</span> <span class="nc">ExternalAppPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;externalApps&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getExternalApps</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshApplicationList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;External Applications&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;The GUI may include shortcuts to external applications. You can add them now.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppGroupBox</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppGroupBox</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppGroupBox</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppGroupBox</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot; QGroupBox::title {  subcontrol-position: top left; padding: 5 5px; }&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalAppGroupBox</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalAppGroupBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalAppGroupBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Application&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Remove Application&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Move Up&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Move Down&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;text-align: left;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontalLayout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_verticalLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;list-add&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;list-remove&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;go-up&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;go-down&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_addButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_addApplication</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_removeApplication</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_moveUp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_downButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_moveDown</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">itemDoubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_editApplication</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Press next button to continue&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStatusLabelPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fromXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">panelNodes</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getArrayFromNode</span><span class="p">(</span>
            <span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;ExternalApps&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[])</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">panelNodes</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span>
                <span class="n">child</span><span class="p">,</span> <span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">child</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_addApplication</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">xml</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">ExternalAppEditor</span><span class="o">.</span><span class="n">getDialog</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">xml</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshApplicationList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_editApplication</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># edit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshApplicationList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_removeApplication</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_refreshApplicationList</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_moveUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_refreshApplicationList</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">indexFromItem</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_moveDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">selectedIndexes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_refreshApplicationList</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">indexFromItem</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_app_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_refreshApplicationList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">:</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">xml</span> <span class="o">=</span> <span class="n">panel</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_externalAppList</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getExternalApps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_externalApps</span>

    <span class="k">def</span> <span class="nf">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">checkData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_setStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MonitorPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;monitor&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getMonitor</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="n">_setupUI</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Monitor List&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">If you want to monitor some attributes, add them to the monitor list. </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="o">.</span><span class="n">setWordWrap</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorLabel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Monitor List:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorLineEdit</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorLineEdit</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;Comma-separated list of attribute names&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorLineEdit</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorLineEdit</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorButton</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Browse...&quot;</span><span class="p">)</span>
        <span class="c1"># self._monitorButton.setIcon(Qt.QIcon.fromTheme(&quot;system-search&quot;))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;designer:devs_tree.png&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorButton</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorClearButton</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorClearButton</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Clear&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorClearButton</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorClearButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span><span class="s2">&quot;actions:edit-clear.svg&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_monitorLabel</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_monitorLineEdit</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_monitorButton</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_monitorClearButton</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_selectMonitor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorClearButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearMonitor</span><span class="p">)</span>
        <span class="c1"># self._synopticClear.hide()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spacerItem1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Press next button to continue&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStatusLabelPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fromXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
            <span class="n">AppSettingsWizard</span><span class="o">.</span><span class="n">getValueFromNode</span><span class="p">(</span><span class="n">xml</span><span class="p">,</span> <span class="s2">&quot;MONITOR&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_clearMonitor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitorLineEdit</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="c1"># self._monitorClearButton.hide()</span>

    <span class="k">def</span> <span class="nf">_getMonitor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_monitorLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_selectMonitor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">models</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">taurus</span><span class="o">.</span><span class="n">qt</span><span class="o">.</span><span class="n">qtgui</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">TaurusModelChooser</span><span class="o">.</span><span class="n">modelChooserDlg</span><span class="p">(</span>
            <span class="n">host</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_monitorLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">models</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">OutroPage</span><span class="p">(</span><span class="n">BasePage</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">BasePage</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Confirmation Page&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;XML configuration file:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xml</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QTextEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xml</span><span class="o">.</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="p">(</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xml</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label2</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Files copied&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">NoEditTriggers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">(</span>
            <span class="p">(</span><span class="s1">&#39;Original file&#39;</span><span class="p">,</span> <span class="s1">&#39;File in Project dir&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="p">(</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getXml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xml</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">saveFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="p">):</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QFile</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">file</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QFile</span><span class="o">.</span><span class="n">WriteOnly</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QFile</span><span class="o">.</span><span class="n">Text</span><span class="p">):</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Saving XML...&quot;</span><span class="p">),</span>
                                   <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Cannot write file %1:</span><span class="se">\n</span><span class="s2">%2.&quot;</span><span class="p">)</span>
                                   <span class="o">.</span><span class="n">arg</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
                                   <span class="o">.</span><span class="n">arg</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">errorString</span><span class="p">()))</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xml</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkData</span><span class="p">()</span>
        <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">initializePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xml</span><span class="p">,</span> <span class="n">substitutions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="n">generateXml</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xml</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s2">&quot;xml&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getXml</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">clearContents</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">substitutions</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">substitutions</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">item0</span><span class="p">,</span> <span class="n">item1</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">src</span><span class="p">),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">item0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">item1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">resizeColumnsToContents</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">validatePage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">createProject</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Error creating project&#39;</span><span class="p">,</span>
                                   <span class="s1">&#39;Could not create project files. </span><span class="se">\n</span><span class="s1">Reason:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span>
                                       <span class="n">e</span><span class="p">),</span>
                                   <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span>
            <span class="kn">import</span> <span class="nn">traceback</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">createProject</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># prepare a log file</span>
        <span class="n">pdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s1">&#39;projectDir&#39;</span><span class="p">)</span>
        <span class="n">gui_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;guiName&quot;</span><span class="p">)</span>
        <span class="n">install_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pdir</span><span class="p">,</span> <span class="s2">&quot;tgconf_</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gui_name</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">install_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">install_dir</span><span class="p">)</span>
        <span class="n">logfilename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pdir</span><span class="p">,</span> <span class="s1">&#39;wizard.log&#39;</span><span class="p">)</span>
        <span class="n">logfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">logfilename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">logfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Project created by AppSettingsWizard on </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>
                      <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">())</span>
        <span class="c1"># copy files</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="n">dst</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">install_dir</span><span class="p">,</span> <span class="n">unicode</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_substTable</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()))</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">src</span><span class="p">)</span> <span class="o">!=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">dst</span><span class="p">):</span>
                <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
                <span class="n">logfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;File copied: </span><span class="si">%s</span><span class="s1"> --&gt; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">))</span>
        <span class="c1"># write xml config file</span>
        <span class="n">xmlcfgfilename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">install_dir</span><span class="p">,</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="n">getXmlConfigFileName</span><span class="p">())</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">xmlcfgfilename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xml</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()))</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">logfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;XML Config file created: &quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">xmlcfgfilename</span><span class="p">)</span>
        <span class="c1"># write python config file</span>
        <span class="n">pycfgfilename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">install_dir</span><span class="p">,</span>
                                <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.py&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="n">getConfigFilePrefix</span><span class="p">())</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">pycfgfilename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;XML_CONFIG = &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="n">getXmlConfigFileName</span><span class="p">())</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">logfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Python config file created: &quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pycfgfilename</span><span class="p">)</span>
        <span class="c1"># write __init__.py config file</span>
        <span class="n">init_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s1">&#39;res&#39;</span><span class="p">,</span> <span class="s1">&#39;init.template&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">init_template</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">initfilename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">install_dir</span><span class="p">,</span> <span class="s1">&#39;__init__.py&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">initfilename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">gui_name</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">logfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;python init file created: &quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">initfilename</span><span class="p">)</span>
        <span class="c1"># write setup file</span>
        <span class="n">setup_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s1">&#39;res&#39;</span><span class="p">,</span> <span class="s1">&#39;setup.template&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">setup_template</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pdir</span><span class="p">,</span> <span class="s2">&quot;setup.py&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">setup</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">gui_name</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="c1"># write MANIFEST.in file</span>
        <span class="n">manifest_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s1">&#39;res&#39;</span><span class="p">,</span> <span class="s1">&#39;manifest.template&#39;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">manifest_template</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">manifestfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pdir</span><span class="p">,</span> <span class="s2">&quot;MANIFEST.in&quot;</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">manifestfile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">gui_name</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="c1"># if all went ok...</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Application project was successfully created.&#39;</span> <span class="o">+</span>\
              <span class="s1">&#39;You can find the files in: &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">pdir</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Tip: You can install it with:</span><span class="se">\n\t</span><span class="s1">pip install </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pdir</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Tip: And then run the application with:</span><span class="se">\n\t</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">gui_name</span>
        <span class="n">details</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">warnings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wizard</span><span class="p">()</span><span class="o">.</span><span class="n">getProjectWarnings</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">warnings</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">However, some fine-tuning may be needed. Please check the details:</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">for</span> <span class="n">short</span><span class="p">,</span> <span class="n">long</span> <span class="ow">in</span> <span class="n">warnings</span><span class="p">:</span>
                <span class="n">details</span> <span class="o">+=</span> <span class="s1">&#39;- </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">short</span><span class="p">,</span> <span class="n">long</span><span class="p">)</span>
        <span class="n">logfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span> <span class="o">+</span> <span class="n">details</span><span class="p">)</span>
        <span class="n">logfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">,</span>
                             <span class="s1">&#39;Application project created&#39;</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">setDetailedText</span><span class="p">(</span><span class="n">details</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="nb">print</span> 
        <span class="nb">print</span> <span class="n">msg</span> <span class="o">+</span> <span class="n">details</span>
        <span class="nb">print</span>


<div class="viewcode-block" id="AppSettingsWizard"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard">[docs]</a><span class="k">class</span> <span class="nc">AppSettingsWizard</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QWizard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This Wizard provide functionality for creating from scratch a configuration</span>
<span class="sd">    directory for a TaurusGUI based application.</span>

<span class="sd">    The files in the configuration dir determine the default, permanent, pre-defined</span>
<span class="sd">    contents of the GUI. While the user may add/remove more elements at run</span>
<span class="sd">    time and those customizations will also be stored, this file defines what a</span>
<span class="sd">    user will find when launching the GUI for the first time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Pages</span> <span class="o">=</span> <span class="n">Enumeration</span><span class="p">(</span><span class="s1">&#39;Pages&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;IntroPage&#39;</span><span class="p">,</span> <span class="s1">&#39;ProjectPage&#39;</span><span class="p">,</span> <span class="s1">&#39;GeneralSettings&#39;</span><span class="p">,</span> <span class="s1">&#39;CustomLogoPage&#39;</span><span class="p">,</span> <span class="s1">&#39;SynopticPage&#39;</span><span class="p">,</span>
                                  <span class="s1">&#39;MacroServerInfo&#39;</span><span class="p">,</span> <span class="s1">&#39;InstrumentsPage&#39;</span><span class="p">,</span> <span class="s1">&#39;PanelsPage&#39;</span><span class="p">,</span> <span class="s1">&#39;ExternalAppPage&#39;</span><span class="p">,</span> <span class="s1">&#39;MonitorPage&#39;</span><span class="p">,</span> <span class="s1">&#39;OutroPage&#39;</span><span class="p">))</span>
    <span class="n">SARDANA_INSTALLED</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">jdrawCommand</span><span class="o">=</span><span class="s1">&#39;jdraw&#39;</span><span class="p">,</span> <span class="n">configFilePrefix</span><span class="o">=</span><span class="s1">&#39;config&#39;</span><span class="p">):</span>
        <span class="n">Qt</span><span class="o">.</span><span class="n">QWizard</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_item_funcs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_jdrawCommand</span> <span class="o">=</span> <span class="n">jdrawCommand</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_configFilePrefix</span> <span class="o">=</span> <span class="n">configFilePrefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loadPages</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substitutions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projectWarnings</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="AppSettingsWizard.getProjectWarnings"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.getProjectWarnings">[docs]</a>    <span class="k">def</span> <span class="nf">getProjectWarnings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_projectWarnings</span></div>

<div class="viewcode-block" id="AppSettingsWizard.getConfigFilePrefix"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.getConfigFilePrefix">[docs]</a>    <span class="k">def</span> <span class="nf">getConfigFilePrefix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configFilePrefix</span></div>

<div class="viewcode-block" id="AppSettingsWizard.getXmlConfigFileName"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.getXmlConfigFileName">[docs]</a>    <span class="k">def</span> <span class="nf">getXmlConfigFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.xml&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configFilePrefix</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="AppSettingsWizard.getValueFromNode"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.getValueFromNode">[docs]</a>    <span class="k">def</span> <span class="nf">getValueFromNode</span><span class="p">(</span><span class="n">rootNode</span><span class="p">,</span> <span class="n">nodeName</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        returns a value from given Node</span>
<span class="sd">        :param rootNode: (etree.Element) root node</span>
<span class="sd">        :param nodeName: the name of node to find</span>
<span class="sd">        :param default: returned value if node is None or contains empty string</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">rootNode</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">nodeName</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">text</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="AppSettingsWizard.getArrayFromNode"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.getArrayFromNode">[docs]</a>    <span class="k">def</span> <span class="nf">getArrayFromNode</span><span class="p">(</span><span class="n">rootNode</span><span class="p">,</span> <span class="n">nodeName</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        returns an array contained by given Node</span>
<span class="sd">        :param rootNode: (etree.Element) root node</span>
<span class="sd">        :param nodeName: the name of node to find</span>
<span class="sd">        :param default: returned value if node is None or contains empty string</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">array</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">rootNode</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">nodeName</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="p">:</span>
                <span class="n">array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">array</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default</span></div>

<div class="viewcode-block" id="AppSettingsWizard.loadXml"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.loadXml">[docs]</a>    <span class="k">def</span> <span class="nf">loadXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        parses xml code and sets all pages according to its contents. It</span>
<span class="sd">        raises an exception if something could not be processed</span>

<span class="sd">        :param fname: (unicode) path to file containing xml code</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">projectDir</span><span class="p">,</span> <span class="n">cfgfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>

        <span class="c1"># print self.Pages</span>
        <span class="k">for</span> <span class="n">pageNumber</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="n">pageNumber</span><span class="p">)</span><span class="o">.</span><span class="n">fromXml</span><span class="p">(</span><span class="n">root</span><span class="p">)</span></div>

<div class="viewcode-block" id="AppSettingsWizard.getXml"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.getXml">[docs]</a>    <span class="k">def</span> <span class="nf">getXml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_item_funcs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPages</span><span class="p">():</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">BasePage</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">p</span><span class="p">[</span><span class="n">name</span><span class="p">]()</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">pass</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item_funcs</span><span class="p">[</span><span class="n">name</span><span class="p">]()</span>

<div class="viewcode-block" id="AppSettingsWizard.addPage"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.addPage">[docs]</a>    <span class="k">def</span> <span class="nf">addPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">):</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QWizard</span><span class="o">.</span><span class="n">addPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span></div>

<div class="viewcode-block" id="AppSettingsWizard.setPage"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.setPage">[docs]</a>    <span class="k">def</span> <span class="nf">setPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">page</span><span class="p">):</span>
        <span class="n">Qt</span><span class="o">.</span><span class="n">QWizard</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span></div>

<div class="viewcode-block" id="AppSettingsWizard.getPages"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.getPages">[docs]</a>    <span class="k">def</span> <span class="nf">getPages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pages</span></div>

    <span class="k">def</span> <span class="nf">_loadPages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">intro</span> <span class="o">=</span> <span class="n">IntroPage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">IntroPage</span><span class="p">,</span> <span class="n">intro</span><span class="p">)</span>
        <span class="n">intro</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">ProjectPage</span><span class="p">)</span>

        <span class="n">project_page</span> <span class="o">=</span> <span class="n">ProjectPage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">ProjectPage</span><span class="p">,</span> <span class="n">project_page</span><span class="p">)</span>
        <span class="n">project_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">GeneralSettings</span><span class="p">)</span>

        <span class="n">general_settings_page</span> <span class="o">=</span> <span class="n">GeneralSettings</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">GeneralSettings</span><span class="p">,</span> <span class="n">general_settings_page</span><span class="p">)</span>
        <span class="n">general_settings_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">CustomLogoPage</span><span class="p">)</span>

        <span class="n">custom_logo_page</span> <span class="o">=</span> <span class="n">CustomLogoPage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">CustomLogoPage</span><span class="p">,</span> <span class="n">custom_logo_page</span><span class="p">)</span>
        <span class="n">custom_logo_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">SynopticPage</span><span class="p">)</span>

        <span class="n">synoptic_page</span> <span class="o">=</span> <span class="n">SynopticPage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">SynopticPage</span><span class="p">,</span> <span class="n">synoptic_page</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">sardana.taurus.qt.qtgui.extra_macroexecutor.common</span> <span class="k">import</span> \
                <span class="n">TaurusMacroConfigurationDialog</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SARDANA_INSTALLED</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SARDANA_INSTALLED</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SARDANA_INSTALLED</span><span class="p">:</span>
            <span class="n">synoptic_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">MacroServerInfo</span><span class="p">)</span>

            <span class="n">macroserver_page</span> <span class="o">=</span> <span class="n">MacroServerInfoPage</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">MacroServerInfo</span><span class="p">,</span> <span class="n">macroserver_page</span><span class="p">)</span>
            <span class="n">macroserver_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">InstrumentsPage</span><span class="p">)</span>

            <span class="n">instruments_page</span> <span class="o">=</span> <span class="n">InstrumentsPage</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">InstrumentsPage</span><span class="p">,</span> <span class="n">instruments_page</span><span class="p">)</span>
            <span class="n">instruments_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">PanelsPage</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">synoptic_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">PanelsPage</span><span class="p">)</span>

        <span class="n">panels_page</span> <span class="o">=</span> <span class="n">PanelsPage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">PanelsPage</span><span class="p">,</span> <span class="n">panels_page</span><span class="p">)</span>
        <span class="n">panels_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">ExternalAppPage</span><span class="p">)</span>

        <span class="n">external_app_page</span> <span class="o">=</span> <span class="n">ExternalAppPage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">ExternalAppPage</span><span class="p">,</span> <span class="n">external_app_page</span><span class="p">)</span>
        <span class="n">external_app_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">MonitorPage</span><span class="p">)</span>

        <span class="n">monitor_page</span> <span class="o">=</span> <span class="n">MonitorPage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">MonitorPage</span><span class="p">,</span> <span class="n">monitor_page</span><span class="p">)</span>
        <span class="n">monitor_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">OutroPage</span><span class="p">)</span>

        <span class="n">outro_page</span> <span class="o">=</span> <span class="n">OutroPage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pages</span><span class="o">.</span><span class="n">OutroPage</span><span class="p">,</span> <span class="n">outro_page</span><span class="p">)</span>
        <span class="n">outro_page</span><span class="o">.</span><span class="n">setNextPageId</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setOption</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QWizard</span><span class="o">.</span><span class="n">CancelButtonOnLeft</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="AppSettingsWizard.generateXml"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.generateXml">[docs]</a>    <span class="k">def</span> <span class="nf">generateXml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the xml code corresponding to the options selected in the wizard</span>
<span class="sd">        and a dictionary representing the paths that have been substituted.</span>

<span class="sd">        :return: (str, dict&lt;str,str&gt;) The return value is a tuple whose first element</span>
<span class="sd">                 is the xml code and the second element is a dict where the keys are the</span>
<span class="sd">                 destination files and the values are the original paths.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;taurusgui_config&quot;</span><span class="p">)</span>
        <span class="c1"># general settings page</span>
        <span class="n">guiName</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;GUI_NAME&quot;</span><span class="p">)</span>
        <span class="n">guiName</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;guiName&quot;</span><span class="p">)</span>
        <span class="n">organizationName</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;ORGANIZATION&quot;</span><span class="p">)</span>
        <span class="n">organizationName</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;organizationName&quot;</span><span class="p">)</span>
        <span class="c1"># custom logo page</span>
        <span class="n">customLogo</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;CUSTOM_LOGO&quot;</span><span class="p">)</span>
        <span class="n">src</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;customLogo&quot;</span><span class="p">)</span>
        <span class="n">mod_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s1">&#39;projectDir&#39;</span><span class="p">),</span>
                            <span class="s1">&#39;tgconf_&#39;</span> <span class="o">+</span> <span class="n">guiName</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">mod_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">mod_dir</span><span class="p">)</span>  <span class="c1"># make sure mod_dir is absolute</span>
        <span class="k">if</span> <span class="n">src</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">src</span><span class="p">:</span>
            <span class="c1"># using registered paths</span>
            <span class="c1"># TODO: what if they use windows paths such as &quot;C:\foo&quot; ?</span>
            <span class="n">dst</span> <span class="o">=</span> <span class="n">src</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># if src is absolute, it stays so, and if it is relative, we assume</span>
            <span class="c1"># mod_dir as the root dir</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mod_dir</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
            <span class="n">dst</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">substitutionName</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">mod_dir</span><span class="p">))</span>
        <span class="n">customLogo</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">dst</span>
        <span class="c1"># synoptic page</span>
        <span class="n">synopticList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;synoptics&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">synopticList</span><span class="p">:</span>
            <span class="n">synoptics</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;SYNOPTIC&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">synopticList</span><span class="p">:</span>
                <span class="n">src</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mod_dir</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
                <span class="n">dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">substitutionName</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">mod_dir</span><span class="p">)</span>
                <span class="n">child</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">synoptics</span><span class="p">,</span> <span class="s2">&quot;synoptic&quot;</span><span class="p">,</span>
                                         <span class="nb">str</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dst</span><span class="p">))</span>
                <span class="c1"># substitute any referenced files within the jdrawfiles</span>
                <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
                <span class="n">contents</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;file_name:\&quot;(.+?)\&quot;&#39;</span><span class="p">,</span> <span class="n">contents</span><span class="p">):</span>
                    <span class="c1"># this is ok for both relative and absolute references</span>
                    <span class="n">refsrc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">src</span><span class="p">),</span> <span class="n">ref</span><span class="p">)</span>
                    <span class="n">refdst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">substitutionName</span><span class="p">(</span><span class="n">refsrc</span><span class="p">,</span> <span class="n">mod_dir</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">ref</span> <span class="o">!=</span> <span class="n">refdst</span><span class="p">:</span>
                        <span class="n">short</span> <span class="o">=</span> <span class="s1">&#39;Manual editing needed in &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">dst</span>
                        <span class="n">long</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;The synoptic file &quot;</span><span class="si">%s</span><span class="s1">&quot; references a file that &#39;</span>
                                <span class="s1">&#39;has been copied to the project dir in order to make the project portable. &#39;</span>
                                <span class="s1">&#39;Please edit &quot;</span><span class="si">%s</span><span class="s1">&quot; and replace &quot;</span><span class="si">%s</span><span class="s1">&quot; by &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">refdst</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_projectWarnings</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">short</span><span class="p">,</span> <span class="n">long</span><span class="p">))</span>

        <span class="c1"># macroserver page</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SARDANA_INSTALLED</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;macroServerName&quot;</span><span class="p">):</span>
            <span class="n">macroServerName</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;MACROSERVER_NAME&quot;</span><span class="p">)</span>
            <span class="n">macroServerName</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;macroServerName&quot;</span><span class="p">)</span>
            <span class="n">doorName</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;DOOR_NAME&quot;</span><span class="p">)</span>
            <span class="n">doorName</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;doorName&quot;</span><span class="p">)</span>
            <span class="n">instruments</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;INSTRUMENTS_FROM_POOL&quot;</span><span class="p">)</span>
            <span class="n">instruments</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;instruments&quot;</span><span class="p">))</span>
        <span class="c1"># panels page</span>
        <span class="n">panelList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;panels&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">panelList</span><span class="p">:</span>
            <span class="n">panels</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;PanelDescriptions&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="n">panelList</span><span class="p">:</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">xml</span> <span class="o">=</span> <span class="n">panel</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>
                <span class="n">panels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="c1"># external apps page</span>
        <span class="n">externalAppList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;externalApps&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">externalAppList</span><span class="p">:</span>
            <span class="n">externalApps</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;ExternalApps&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">externalApp</span> <span class="ow">in</span> <span class="n">externalAppList</span><span class="p">:</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">xml</span> <span class="o">=</span> <span class="n">externalApp</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>
                <span class="n">externalApps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="c1"># monitor page</span>
        <span class="n">monitor</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;MONITOR&quot;</span><span class="p">)</span>
        <span class="n">monitor</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s2">&quot;monitor&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">etree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_substitutions</span><span class="p">)</span></div>

<div class="viewcode-block" id="AppSettingsWizard.substitutionName"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/taurusgui/_AppSettingsWizard.html#taurus.qt.qtgui.taurusgui.AppSettingsWizard.substitutionName">[docs]</a>    <span class="k">def</span> <span class="nf">substitutionName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">mod_dir</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">src</span><span class="p">))</span> <span class="o">!=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">mod_dir</span><span class="p">):</span>
            <span class="c1"># do not change the name if it is the same dir!</span>
            <span class="k">while</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_substitutions</span><span class="p">:</span>
                <span class="n">root</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%i%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_substitutions</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">src</span>
        <span class="k">return</span> <span class="n">name</span></div></div>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QApplication</span><span class="p">([])</span>
    <span class="n">wizard</span> <span class="o">=</span> <span class="n">AppSettingsWizard</span><span class="p">()</span>
    <span class="n">wizard</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../',
            VERSION:'4.1.2-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>