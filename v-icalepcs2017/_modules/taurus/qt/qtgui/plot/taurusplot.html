

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>taurus.qt.qtgui.plot.taurusplot &mdash; taurus 4.1.2-alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../../search.html"/>
    <link rel="top" title="taurus 4.1.2-alpha documentation" href="../../../../../index.html"/>
        <link rel="up" title="Module code" href="../../../../index.html"/> 

  
  <script src="../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../index.html" class="icon icon-home"> taurus
          

          
            
            <img src="../../../../../_static/taurus.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference external" href="http://www.taurus-scada.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/taurus-org/taurus">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/taurus">Download from PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs.html">Taurus 4.1 documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../../index.html">taurus</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
      
    <li>taurus.qt.qtgui.plot.taurusplot</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for taurus.qt.qtgui.plot.taurusplot</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>

<span class="c1">#############################################################################</span>
<span class="c1">##</span>
<span class="c1"># This file is part of Taurus</span>
<span class="c1">##</span>
<span class="c1"># http://taurus-scada.org</span>
<span class="c1">##</span>
<span class="c1"># Copyright 2011 CELLS / ALBA Synchrotron, Bellaterra, Spain</span>
<span class="c1">##</span>
<span class="c1"># Taurus is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU Lesser General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">##</span>
<span class="c1"># Taurus is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU Lesser General Public License for more details.</span>
<span class="c1">##</span>
<span class="c1"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c1"># along with Taurus.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">##</span>
<span class="c1">#############################################################################</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">taurusplot.py: Generic graphical plotting widget for Taurus</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;TaurusCurve&quot;</span><span class="p">,</span> <span class="s2">&quot;TaurusCurveMarker&quot;</span><span class="p">,</span>
           <span class="s2">&quot;TaurusXValues&quot;</span><span class="p">,</span> <span class="s2">&quot;TaurusPlot&quot;</span><span class="p">,</span> <span class="s2">&quot;isodatestr2float&quot;</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">taurus.external.qt</span> <span class="k">import</span> <span class="n">Qt</span><span class="p">,</span> <span class="n">Qwt5</span>

<span class="kn">import</span> <span class="nn">taurus</span>
<span class="kn">import</span> <span class="nn">taurus.core</span>
<span class="kn">from</span> <span class="nn">taurus.core.taurusmanager</span> <span class="k">import</span> <span class="n">getSchemeFromName</span>
<span class="kn">from</span> <span class="nn">taurus.core.taurusbasetypes</span> <span class="k">import</span> <span class="n">DataFormat</span>
<span class="c1"># TODO: Tango-centric</span>
<span class="kn">from</span> <span class="nn">taurus.core.util.containers</span> <span class="k">import</span> <span class="n">LoopList</span><span class="p">,</span> <span class="n">CaselessDict</span><span class="p">,</span> <span class="n">CaselessList</span>
<span class="kn">from</span> <span class="nn">taurus.core.util.safeeval</span> <span class="k">import</span> <span class="n">SafeEvaluator</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtcore.util.signal</span> <span class="k">import</span> <span class="n">baseSignal</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtcore.mimetypes</span> <span class="k">import</span> <span class="n">TAURUS_MODEL_LIST_MIME_TYPE</span><span class="p">,</span> <span class="n">TAURUS_ATTR_MIME_TYPE</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtgui.base</span> <span class="k">import</span> <span class="n">TaurusBaseComponent</span><span class="p">,</span> <span class="n">TaurusBaseWidget</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtgui.plot</span> <span class="k">import</span> <span class="n">TaurusPlotConfigDialog</span><span class="p">,</span> <span class="n">FancyScaleDraw</span><span class="p">,</span>\
    <span class="n">DateTimeScaleEngine</span><span class="p">,</span> <span class="n">FixedLabelsScaleEngine</span><span class="p">,</span> <span class="n">FixedLabelsScaleDraw</span>
<span class="kn">from</span> <span class="nn">curvesAppearanceChooserDlg</span> <span class="k">import</span> <span class="n">CurveAppearanceProperties</span>


<div class="viewcode-block" id="isodatestr2float"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot.html#taurus.qt.qtgui.plot.isodatestr2float">[docs]</a><span class="k">def</span> <span class="nf">isodatestr2float</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;_&#39;</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    converts a date string in iso format to a timestamp (seconds since epoch)</span>
<span class="sd">    with microseconds precision</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">sep</span> <span class="o">+</span> <span class="s1">&#39;%H:%M:%S.</span><span class="si">%f</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">time</span><span class="o">.</span><span class="n">mktime</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">timetuple</span><span class="p">())</span> <span class="o">+</span> <span class="n">d</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">*</span> <span class="mf">1e-6</span></div>


<span class="c1">#import threading</span>
<span class="k">class</span> <span class="nc">DummyLock</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">release</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="c1"># for debugging. Comment out in production</span>
<span class="c1">#from taurus.core.util.log import TraceIt, DebugIt, InfoIt, WarnIt</span>


<span class="n">DFT_CURVE_PENS</span> <span class="o">=</span> <span class="p">[</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">),</span>
                  <span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">blue</span><span class="p">),</span>
                  <span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">),</span>
                  <span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">magenta</span><span class="p">),</span>
                  <span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">cyan</span><span class="p">),</span>
                  <span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">yellow</span><span class="p">),</span>
                  <span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">black</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">__p</span> <span class="ow">in</span> <span class="n">DFT_CURVE_PENS</span><span class="p">:</span>
    <span class="n">__p</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># TODO: we would like this to be 2, but bug #171 forces 1</span>


<span class="k">class</span> <span class="nc">TaurusZoomer</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotZoomer</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A QwtPlotZoomer that displays the label assuming that X values are timestamps&#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotZoomer</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xIsTime</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">setXIsTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xistime</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;If xistime is True, the x values will be interpreted as timestamps</span>

<span class="sd">        :param xistime: (bool)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xIsTime</span> <span class="o">=</span> <span class="n">xistime</span>

    <span class="k">def</span> <span class="nf">trackerText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :meth:`Qwt5.QwtPicker.trackerText`&#39;&#39;&#39;</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">invTransform</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xIsTime</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">())</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtText</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>


<div class="viewcode-block" id="TaurusCurveMarker"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurveMarker.html#taurus.qt.qtgui.plot.TaurusCurveMarker">[docs]</a><span class="k">class</span> <span class="nc">TaurusCurveMarker</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotMarker</span><span class="p">,</span> <span class="n">TaurusBaseComponent</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Taurus-enabled custom version of QwtPlotMarker</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labelOpacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call__init__wo_kw</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotMarker</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call__init__</span><span class="p">(</span><span class="n">TaurusBaseComponent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelOpacity</span> <span class="o">=</span> <span class="n">labelOpacity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLineStyle</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotMarker</span><span class="o">.</span><span class="n">NoLine</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLabelAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignBottom</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtText</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
        <span class="c1"># a semi-transparent green background for the label</span>
        <span class="n">text</span><span class="o">.</span><span class="n">setBackgroundBrush</span><span class="p">(</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QBrush</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="n">labelOpacity</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSymbol</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtSymbol</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtSymbol</span><span class="o">.</span><span class="n">Diamond</span><span class="p">,</span>
                                      <span class="n">Qt</span><span class="o">.</span><span class="n">QBrush</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">yellow</span><span class="p">),</span>
                                      <span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">),</span>
                                      <span class="n">Qt</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">)))</span>

<div class="viewcode-block" id="TaurusCurveMarker.alignLabel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurveMarker.html#taurus.qt.qtgui.plot.TaurusCurveMarker.alignLabel">[docs]</a>    <span class="k">def</span> <span class="nf">alignLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets the label alignment in a &quot;smart&quot; way (depending on the current</span>
<span class="sd">        marker&#39;s position in the canvas).</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">xmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">canvasMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xAxis</span><span class="p">())</span>
        <span class="n">ymap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">canvasMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yAxis</span><span class="p">())</span>
        <span class="n">xmiddlepoint</span> <span class="o">=</span> <span class="n">xmap</span><span class="o">.</span><span class="n">p1</span><span class="p">()</span> <span class="o">+</span> <span class="n">xmap</span><span class="o">.</span><span class="n">pDist</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>  <span class="c1"># p1,p2 are left,right here</span>
        <span class="c1"># p1,p2 are bottom,top here (and pixel coords start from top!)</span>
        <span class="n">ymiddlepoint</span> <span class="o">=</span> <span class="n">ymap</span><span class="o">.</span><span class="n">p2</span><span class="p">()</span> <span class="o">+</span> <span class="n">ymap</span><span class="o">.</span><span class="n">pDist</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">xPaintPos</span> <span class="o">=</span> <span class="n">xmap</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xValue</span><span class="p">())</span>
        <span class="n">yPaintPos</span> <span class="o">=</span> <span class="n">ymap</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yValue</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">xPaintPos</span> <span class="o">&gt;</span> <span class="n">xmiddlepoint</span><span class="p">:</span>  <span class="c1"># the point in the right side</span>
            <span class="n">hAlign</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hAlign</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span>

        <span class="k">if</span> <span class="n">yPaintPos</span> <span class="o">&gt;</span> <span class="n">ymiddlepoint</span><span class="p">:</span>  <span class="c1"># the point is in the bottom side</span>
            <span class="n">vAlign</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignTop</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vAlign</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignBottom</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLabelAlignment</span><span class="p">(</span><span class="n">hAlign</span> <span class="o">|</span> <span class="n">vAlign</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TaurusXValues"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusXValues.html#taurus.qt.qtgui.plot.TaurusXValues">[docs]</a><span class="k">class</span> <span class="nc">TaurusXValues</span><span class="p">(</span><span class="n">TaurusBaseComponent</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Class for managing abscissas values in a TaurusCurve</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call__init__</span><span class="p">(</span><span class="n">TaurusBaseComponent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="TaurusXValues.getModelClass"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusXValues.html#taurus.qt.qtgui.plot.TaurusXValues.getModelClass">[docs]</a>    <span class="k">def</span> <span class="nf">getModelClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;see :meth:`TaurusBaseComponent.getModelClass`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">taurus</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">taurusattribute</span><span class="o">.</span><span class="n">TaurusAttribute</span></div>

<div class="viewcode-block" id="TaurusXValues.eventHandle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusXValues.html#taurus.qt.qtgui.plot.TaurusXValues.eventHandle">[docs]</a>    <span class="k">def</span> <span class="nf">eventHandle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;see :meth:`TaurusBaseComponent.eventHandle`&#39;&#39;&#39;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">src</span> <span class="k">if</span> <span class="n">src</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="p">:</span>
                <span class="n">l</span><span class="o">.</span><span class="n">fireEvent</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s1">&#39;data_format&#39;</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">getDataFormat</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">DataFormat</span><span class="o">.</span><span class="n">_1D</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">val</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelValueObj</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="p">:</span>
            <span class="c1"># all listeners are notified via fireEvent when the X changes</span>
            <span class="n">l</span><span class="o">.</span><span class="n">fireEvent</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusXValues.registerDataChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusXValues.html#taurus.qt.qtgui.plot.TaurusXValues.registerDataChanged">[docs]</a>    <span class="k">def</span> <span class="nf">registerDataChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;see :meth:`TaurusBaseComponent.registerDataChanged`&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusXValues.unregisterDataChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusXValues.html#taurus.qt.qtgui.plot.TaurusXValues.unregisterDataChanged">[docs]</a>    <span class="k">def</span> <span class="nf">unregisterDataChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;see :meth:`TaurusBaseComponent.unregisterDataChanged`&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listeners</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusXValues.isReadOnly"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusXValues.html#taurus.qt.qtgui.plot.TaurusXValues.isReadOnly">[docs]</a>    <span class="k">def</span> <span class="nf">isReadOnly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;see :meth:`TaurusBaseComponent.isReadOnly`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="TaurusXValues.getValues"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusXValues.html#taurus.qt.qtgui.plot.TaurusXValues.getValues">[docs]</a>    <span class="k">def</span> <span class="nf">getValues</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; returns the X values.</span>

<span class="sd">        :return: (numpy.array)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelValueObj</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span></div></div>


<div class="viewcode-block" id="TaurusCurve"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve">[docs]</a><span class="k">class</span> <span class="nc">TaurusCurve</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotCurve</span><span class="p">,</span> <span class="n">TaurusBaseComponent</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Taurus-enabled custom version of QwtPlotCurve.</span>

<span class="sd">    TaurusCurves are attached to :class:`TaurusPlot` objects for displaying</span>
<span class="sd">    1D data sets.</span>

<span class="sd">    A TaurusCurve is more complex than simple QwtPlotCurve in that:</span>

<span class="sd">        - It is taurus-aware (i.e., it is associated to a taurus model (an attribute)</span>
<span class="sd">          and listens to Taurus events to update its data</span>
<span class="sd">        - They may have an associated :class:`TaurusXValues` object that controls</span>
<span class="sd">          the values for its abscissas.</span>
<span class="sd">        - It uses a :class:`CurveAppearanceProperties` object to manage how it looks</span>

<span class="sd">    **Important**:</span>

<span class="sd">    The TaurusPlot is in charge of attaching and detaching its TaurusCurves, and keeps</span>
<span class="sd">    information about which TaurusCurves are attached. Therefore the programmer</span>
<span class="sd">    should never attach/detach a TaurusCurve manually.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">consecutiveDroppedEventsWarning</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># number consecutive of dropped events before issuing a warning (-1 for disabling)</span>
    <span class="c1"># absolute number of dropped events before issuing a warning (-1 for</span>
    <span class="c1"># disabling)</span>
    <span class="n">droppedEventsWarning</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="n">dataChanged</span> <span class="o">=</span> <span class="n">baseSignal</span><span class="p">(</span><span class="s1">&#39;dataChanged&#39;</span><span class="p">,</span> <span class="s1">&#39;QString&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">xname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rawData</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">optimized</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

        <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotCurve</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">TaurusBaseComponent</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;TaurusCurve&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rawData</span> <span class="o">=</span> <span class="n">rawData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxPeak</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMinPeak</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#self._markerFormatter = self.defaultMarkerFormatter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_filteredWhenLog</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_history</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_titleText</span> <span class="o">=</span> <span class="s1">&#39;&lt;label&gt;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setXValuesBuilder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maxPeakMarker</span> <span class="o">=</span> <span class="n">TaurusCurveMarker</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_minPeakMarker</span> <span class="o">=</span> <span class="n">TaurusCurveMarker</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__curveName</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isRawData</span> <span class="o">=</span> <span class="ow">not</span><span class="p">(</span><span class="n">rawData</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">droppedEventsCount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">consecutiveDroppedEventsCount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">optimized</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPaintAttribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PaintFiltered</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPaintAttribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ClipPolygons</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__xFromAttr</span> <span class="o">=</span> <span class="n">TaurusXValues</span><span class="p">(</span><span class="n">xname</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__xFromAttr</span><span class="o">.</span><span class="n">registerDataChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setXValuesBuilder</span><span class="p">(</span><span class="k">lambda</span> <span class="n">yVals</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__xFromAttr</span><span class="o">.</span><span class="n">getValues</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__xFromAttr</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isRawData</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Problems when adding curve &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">traceback</span><span class="p">()</span>


<span class="c1">#    @staticmethod</span>
<span class="c1">#    def defaultMarkerFormatter(self,curve,label,i,x,y,xIsTime):</span>
<span class="c1">#        &quot;&quot;&quot;</span>
<span class="c1">#        Returns the text to be shown in  plot tooltips/markers.</span>
<span class="c1">#        :param curve: the name of the curve</span>
<span class="c1">#        :param label: the label to be displayed</span>
<span class="c1">#        :param i: the index of the point in the curve</span>
<span class="c1">#        :param x: x axis position</span>
<span class="c1">#        :param y: y axis position</span>
<span class="c1">#        :param xIsTime: To adapt format to time if needed</span>
<span class="c1">#        :return: (str)</span>
<span class="c1">#        &quot;&quot;&quot;</span>
<span class="c1">#        #@todo: Check: is this method ever called??? It seems it is not since it is buggy and we don&#39;t see problems</span>
<span class="c1">#        if self.getXIsTime():</span>
<span class="c1">#            infotxt = &quot;&#39;%s&#39;[%i]:\n\t (t=%s, y=%.3g)&quot;%(pickedCurveName,pickedIndex,datetime.fromtimestamp(picked.x()).ctime(),picked.y())</span>
<span class="c1">#        else:</span>
<span class="c1">#            infotxt = &quot;&#39;%s&#39;[%i]:\n\t (x=%.3g, y=%.3g)&quot;%(pickedCurveName,pickedIndex,picked.x(),picked.y())</span>
<span class="c1">#        return infotxt</span>
<span class="c1">#</span>
<span class="c1">#    def setMarkerFormatter(self,formatter):</span>
<span class="c1">#        &quot;&quot;&quot;</span>
<span class="c1">#        Sets formatter method for plot tooltips/markers.</span>
<span class="c1">#        The method must have at least 4 arguments:</span>
<span class="c1">#        :param curve: the name of the curve</span>
<span class="c1">#        :param label: the label to be displayed</span>
<span class="c1">#        :param i: the index of the point in the curve</span>
<span class="c1">#        :param x: x axis position</span>
<span class="c1">#        :param y: y axis position</span>
<span class="c1">#        :param xIsTime: To adapt format to time if needed</span>
<span class="c1">#        &quot;&quot;&quot;</span>
<span class="c1">#        self._markerFormatter = formatter</span>
<span class="c1">#</span>
<span class="c1">#    def markerFormatter(self):</span>
<span class="c1">#        &quot;&quot;&quot;</span>
<span class="c1">#        Returns the method used to format plot tooltips</span>
<span class="c1">#</span>
<span class="c1">#        :return: (function)</span>
<span class="c1">#        &quot;&quot;&quot;</span>
<span class="c1">#        return self._formatter</span>

<div class="viewcode-block" id="TaurusCurve.getCurveName"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.getCurveName">[docs]</a>    <span class="k">def</span> <span class="nf">getCurveName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the name of the curve (in the case of non RawDataCurves, it</span>
<span class="sd">        is the same as the model name)</span>

<span class="sd">        :return: (str)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__curveName</span></div>

<div class="viewcode-block" id="TaurusCurve.setTitleText"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.setTitleText">[docs]</a>    <span class="k">def</span> <span class="nf">setTitleText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">titletext</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets the title text for this curve.</span>

<span class="sd">        :param titletext:   (str) A string which can contain predefined</span>
<span class="sd">                            placeholders (which make sense in the case of non-rawdata curves)</span>

<span class="sd">        See Also : compileTitleText</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_titleText</span> <span class="o">=</span> <span class="n">titletext</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateTitle</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusCurve.titleText"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.titleText">[docs]</a>    <span class="k">def</span> <span class="nf">titleText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compiled</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the titleText string. If compiled == True, the returned string</span>
<span class="sd">        will be processed through compileTitleText</span>

<span class="sd">        :param compiled: (bool) Whether to process the return value or not</span>
<span class="sd">                         (default is compiled=False)</span>

<span class="sd">        :return: (basestring) the title</span>

<span class="sd">        .. seealso:: :meth:`compileTitleText`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">compiled</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compileTitleText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_titleText</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_titleText</span></div>

<div class="viewcode-block" id="TaurusCurve.updateTitle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.updateTitle">[docs]</a>    <span class="k">def</span> <span class="nf">updateTitle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Updates the title of the curve, according to the titleText property&#39;&#39;&#39;</span>
        <span class="n">titleText</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compileTitleText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_titleText</span><span class="p">)</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
        <span class="n">title</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">titleText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itemChanged</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusCurve.compileTitleText"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.compileTitleText">[docs]</a>    <span class="k">def</span> <span class="nf">compileTitleText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">titletext</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Substitutes the known placeholders by the current equivalent values</span>
<span class="sd">        for a titleText.</span>

<span class="sd">        *Note*: Some placeholders may not make sense for certain curves (e.g.</span>
<span class="sd">        &lt;label&gt; for a RawData curve). In these cases, they are left unprocessed</span>
<span class="sd">        (without warning).</span>

<span class="sd">        :param titletext:   (str)</span>
<span class="sd">                            A string which can contain any of the following</span>
<span class="sd">                            predefined placeholders:</span>

<span class="sd">                            - &lt;label&gt; the attribute label (default)</span>
<span class="sd">                            - &lt;model&gt; the model name</span>
<span class="sd">                            - &lt;attr_name&gt; attribute name</span>
<span class="sd">                            - &lt;attr_fullname&gt; full attribute name (for backwards</span>
<span class="sd">                              compatibility, &lt;attr_full_name&gt; is also accepted)</span>
<span class="sd">                            - &lt;dev_alias&gt; device alias</span>
<span class="sd">                            - &lt;dev_name&gt; device name</span>
<span class="sd">                            - &lt;dev_fullname&gt; full device name (for backwards</span>
<span class="sd">                              compatibility, &lt;dev_full_name&gt; is also accepted)</span>
<span class="sd">                            - &lt;current_title&gt; The current title</span>

<span class="sd">        :return: (str) a title string where the placeholders have been</span>
<span class="sd">                 substituted by their corresponding values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># All TaurusCurves can deal with at least these placeholders</span>
        <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;current_title&gt;&#39;</span><span class="p">,</span>
                                      <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">()))</span>
        <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;model&gt;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">())</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">attr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">titletext</span>
        <span class="c1"># TaurusCurves for which we can get the Attribute...</span>
        <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">.</span><span class="n">label</span> <span class="ow">or</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span>
        <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;attr_name&gt;&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span>
        <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;attr_fullname&gt;&#39;</span><span class="p">,</span>
                                      <span class="n">attr</span><span class="o">.</span><span class="n">getFullName</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span>
        <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;attr_full_name&gt;&#39;</span><span class="p">,</span>
                                      <span class="n">attr</span><span class="o">.</span><span class="n">getFullName</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span>

        <span class="n">dev</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">getParentObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dev</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># TaurusCurves for which we can get the Device object...</span>
            <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;dev_alias&gt;&#39;</span><span class="p">,</span>
                                          <span class="n">dev</span><span class="o">.</span><span class="n">getSimpleName</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span>
            <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;dev_name&gt;&#39;</span><span class="p">,</span>
                                          <span class="n">dev</span><span class="o">.</span><span class="n">getNormalName</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span>
            <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;dev_fullname&gt;&#39;</span><span class="p">,</span>
                                          <span class="n">dev</span><span class="o">.</span><span class="n">getFullName</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span>
            <span class="n">titletext</span> <span class="o">=</span> <span class="n">titletext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;dev_full_name&gt;&#39;</span><span class="p">,</span>
                                          <span class="n">dev</span><span class="o">.</span><span class="n">getFullName</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;---&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">titletext</span></div>

    <span class="c1"># -~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~</span>
    <span class="c1"># Convenience attach/detach methods</span>
    <span class="c1"># -~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~</span>

<div class="viewcode-block" id="TaurusCurve.attachMarkers"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.attachMarkers">[docs]</a>    <span class="k">def</span> <span class="nf">attachMarkers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;attach markers to the plot</span>

<span class="sd">        :param plot: the plot (typically, the TaurusPlot instance)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maxPeakMarker</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_minPeakMarker</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.attachMaxMarker"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.attachMaxMarker">[docs]</a>    <span class="k">def</span> <span class="nf">attachMaxMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;attach marker of max value to the plot</span>

<span class="sd">        :param plot: the plot (typically, the TaurusPlot instance)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maxPeakMarker</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.attachMinMarker"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.attachMinMarker">[docs]</a>    <span class="k">def</span> <span class="nf">attachMinMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;attach markers of min value to the plot</span>

<span class="sd">        :param plot: the plot (typically, the TaurusPlot instance)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_minPeakMarker</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.detach"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.detach">[docs]</a>    <span class="k">def</span> <span class="nf">detach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented from :class:`QwtPlotCurve`. In addition to dettaching</span>
<span class="sd">        the curve, it dettaches the associated min/max markers. &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detachMarkers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetModel</span><span class="p">()</span>
        <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotCurve</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.detachMarkers"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.detachMarkers">[docs]</a>    <span class="k">def</span> <span class="nf">detachMarkers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;detaches the min/max markers of this curve&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maxPeakMarker</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_minPeakMarker</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusCurve.detachMaxMarker"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.detachMaxMarker">[docs]</a>    <span class="k">def</span> <span class="nf">detachMaxMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;detaches the max marker of this curve&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maxPeakMarker</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusCurve.detachMinMarker"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.detachMinMarker">[docs]</a>    <span class="k">def</span> <span class="nf">detachMinMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;detaches the min marker of this curve&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_minPeakMarker</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Overwrite from TaurusBaseComponent</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusCurve.getModelClass"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.getModelClass">[docs]</a>    <span class="k">def</span> <span class="nf">getModelClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;See :meth:`TaurusBaseComponent.getModelClass`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">taurus</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">taurusattribute</span><span class="o">.</span><span class="n">TaurusAttribute</span></div>

<div class="viewcode-block" id="TaurusCurve.getRawData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.getRawData">[docs]</a>    <span class="k">def</span> <span class="nf">getRawData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the rawData</span>

<span class="sd">        :return: (dict or None) a RawData dict or None if the curve is not</span>
<span class="sd">                 RawData</span>

<span class="sd">        .. seealso:: :meth:`TaurusPlot.attachRawData`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rawData</span></div>

<div class="viewcode-block" id="TaurusCurve.setXValuesBuilder"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.setXValuesBuilder">[docs]</a>    <span class="k">def</span> <span class="nf">setXValuesBuilder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the callback to be used for creating the &#39;X&#39; array values for a</span>
<span class="sd">        curve. If None given, the default is that the abscissas are int indexes</span>
<span class="sd">        (from 0 to len(Y)).</span>

<span class="sd">        :param fn: (callable) a callable that gets the Y values as a parameter and returns X values</span>

<span class="sd">        E.g., the default::</span>

<span class="sd">            curve.setXValuesBuilder()</span>

<span class="sd">        is equivalent to::</span>

<span class="sd">            curve.setXValuesBuilder(lambda yVals: numpy.arange(len(yVals)))</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fn</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">yVals</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">yVals</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xValuesBuilder</span> <span class="o">=</span> <span class="n">fn</span></div>

<div class="viewcode-block" id="TaurusCurve.getXValues"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.getXValues">[docs]</a>    <span class="k">def</span> <span class="nf">getXValues</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns X values using the XValuesBuilder.</span>

<span class="sd">        :return: (sequence)</span>

<span class="sd">        .. seealso:: :meth:`setXValuesBuilder`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">xBuilder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xValuesBuilder</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_yValues&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">xBuilder</span><span class="p">([])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">xBuilder</span><span class="p">([])</span>
        <span class="k">assert</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span>
        <span class="c1"># ob=numpy.array(None) has len(ob.shape) = 0, but the worst part</span>
        <span class="c1"># is that len(ob) throws exception!</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">xBuilder</span><span class="p">([])</span>
        <span class="k">return</span> <span class="n">xBuilder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.handleEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.handleEvent">[docs]</a>    <span class="k">def</span> <span class="nf">handleEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">evt_type</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Handles Taurus Events for this curve</span>

<span class="sd">        See: :meth:`TaurusBaseComponent.handleEvent`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isRawData</span><span class="p">:</span>
            <span class="c1">#self.warning(&#39;fireEvent of a RawData curve has been called by %s&#39;%repr(self.sender()))</span>
            <span class="k">raise</span> <span class="n">StandardError</span><span class="p">(</span><span class="s1">&#39;called handleEvent of a RawData curve&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">src</span> <span class="k">if</span> <span class="n">src</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">()))</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">evt_type</span> <span class="o">==</span> <span class="n">taurus</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">taurusbasetypes</span><span class="o">.</span><span class="n">TaurusEventType</span><span class="o">.</span><span class="n">Config</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateTitle</span><span class="p">()</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">val</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">val</span><span class="p">,</span> <span class="n">taurus</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">taurusbasetypes</span><span class="o">.</span><span class="n">TaurusAttrValue</span><span class="p">)</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelValueObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">taurus</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">taurusbasetypes</span><span class="o">.</span><span class="n">TaurusAttrValue</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_onDroppedEvent</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Could not get attribute value&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setXYFromModel</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_onDroppedEvent</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_updateMarkers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">()))</span></div>

    <span class="k">def</span> <span class="nf">_onDroppedEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="s1">&#39;Unknown&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;inform the user about a dropped event</span>

<span class="sd">        :param reason: (str) The reason of the drop</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Droping event. Reason </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">droppedEventsCount</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">consecutiveDroppedEventsCount</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">mustwarn</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">droppedEventsCount</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">droppedEventsWarning</span><span class="p">:</span>
            <span class="n">mustwarn</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;At least </span><span class="si">%i</span><span class="s1"> events from model &quot;</span><span class="si">%s</span><span class="s1">&quot; have being dropped. This attribute may have problems</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                   <span class="s1">&#39;Future occurrences will be silently ignored&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">droppedEventsWarning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span><span class="p">)</span>
            <span class="c1"># disable the consecutive Dropped events warning (we do not want it</span>
            <span class="c1"># if we got this one)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consecutiveDroppedEventsWarning</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consecutiveDroppedEventsCount</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">consecutiveDroppedEventsWarning</span><span class="p">:</span>
            <span class="n">mustwarn</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;At least </span><span class="si">%i</span><span class="s1"> consecutive events from model &quot;</span><span class="si">%s</span><span class="s1">&quot; have being dropped. This attribute may have problems</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                   <span class="s1">&#39;Future occurrences will be silently ignored&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">consecutiveDroppedEventsWarning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span><span class="p">)</span>
            <span class="c1"># disable the consecutive Dropped events warning</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">consecutiveDroppedEventsWarning</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">mustwarn</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">p</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">canvas</span><span class="p">()</span>
                <span class="n">msg2</span> <span class="o">=</span> <span class="s2">&quot;Errors reading </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">titleText</span><span class="p">(</span><span class="n">compiled</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span><span class="p">)</span>
                <span class="n">Qt</span><span class="o">.</span><span class="n">QToolTip</span><span class="o">.</span><span class="n">showText</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">mapToGlobal</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">pos</span><span class="p">()),</span> <span class="n">msg2</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
                <span class="c1">#Qt.QMessageBox.warning(p, &quot;Errors in curve %s&quot;%self.titleText(compiled=True), msg, Qt.QMessageBox.Ok)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">droppedEventsCount</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">droppedEventsWarning</span><span class="p">:</span>
            <span class="n">mustwarn</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;At least </span><span class="si">%i</span><span class="s1"> events from model &quot;</span><span class="si">%s</span><span class="s1">&quot; have being dropped. This attribute may have problems</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                   <span class="s1">&#39;Future occurrences will be silently ignored&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">droppedEventsWarning</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelName</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">p</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">canvas</span><span class="p">()</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="n">Qt</span><span class="o">.</span><span class="n">QToolTip</span><span class="o">.</span><span class="n">showText</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">pos</span><span class="p">(),</span> <span class="n">msg</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
                <span class="c1">#Qt.QMessageBox.warning(p, &quot;Errors in curve %s&quot;%self.titleText(compiled=True), msg, Qt.QMessageBox.Ok)</span>

    <span class="k">def</span> <span class="nf">_updateMarkers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;updates min &amp; max markers if needed&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxPeak</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">maxpoint</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span><span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span><span class="o">.</span><span class="n">argmax</span><span class="p">()],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">maxpoint</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_maxPeakMarker</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="o">*</span><span class="n">maxpoint</span><span class="p">)</span>
                <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxPeakMarker</span><span class="o">.</span><span class="n">label</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">getXIsTime</span><span class="p">():</span>
                    <span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Max. &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span>
                        <span class="n">maxpoint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; at t = &#39;</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">maxpoint</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">ctime</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Max. &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span>
                                  <span class="nb">repr</span><span class="p">(</span><span class="n">maxpoint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; at x = &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">maxpoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_maxPeakMarker</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showMinPeak</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">minpoint</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span><span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span><span class="o">.</span><span class="n">argmin</span><span class="p">()],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span><span class="o">.</span><span class="n">min</span><span class="p">()]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">minpoint</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_minPeakMarker</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="o">*</span><span class="n">minpoint</span><span class="p">)</span>
                <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minPeakMarker</span><span class="o">.</span><span class="n">label</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">getXIsTime</span><span class="p">():</span>
                    <span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Min. &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span>
                        <span class="n">minpoint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; at t = &#39;</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">minpoint</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">ctime</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Min. &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span>
                                  <span class="nb">repr</span><span class="p">(</span><span class="n">minpoint</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; at x = &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">minpoint</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_minPeakMarker</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

<div class="viewcode-block" id="TaurusCurve.setXYFromModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.setXYFromModel">[docs]</a>    <span class="k">def</span> <span class="nf">setXYFromModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets the X (self._xValues) and Y (self._yValues) values from the</span>
<span class="sd">        given model. This method can be reimplemented by subclasses of Taurusplot</span>
<span class="sd">        that behave differently (e.g. TaurusTrend)</span>

<span class="sd">        :param value: (TaurusAttrValue) the value object from the model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">attr</span><span class="o">.</span><span class="n">data_format</span> <span class="o">==</span> <span class="n">DataFormat</span><span class="o">.</span><span class="n">_1D</span><span class="p">:</span>
            <span class="c1"># TODO: Adapt all values to be plotted to the same Unit</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">attr</span><span class="o">.</span><span class="n">isNumeric</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">rvalue</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">rvalue</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXValues</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;TaurusCurve only supports SPECTRUM attributes &#39;</span>
                             <span class="s1">&#39;(a </span><span class="si">%s</span><span class="s1"> was passed). </span><span class="se">\n</span><span class="s1">&#39;</span>
                             <span class="s1">&#39;Note: if you want a trend plot, use &#39;</span>
                             <span class="s1">&#39;TaurusTrendCurve instead of &#39;</span>
                             <span class="s1">&#39;TaurusCurve.&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">DataFormat</span><span class="p">[</span><span class="n">attr</span><span class="o">.</span><span class="n">data_format</span><span class="p">]))</span></div>

<div class="viewcode-block" id="TaurusCurve.setPaused"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.setPaused">[docs]</a>    <span class="k">def</span> <span class="nf">setPaused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paused</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Pauses itself and other listeners depending on it</span>

<span class="sd">        .. seealso:: :meth:`TaurusBaseComponent.setPaused`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">TaurusBaseComponent</span><span class="o">.</span><span class="n">setPaused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paused</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ob</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__xFromAttr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxPeakMarker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minPeakMarker</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ob</span><span class="o">.</span><span class="n">setPaused</span><span class="p">(</span><span class="n">paused</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span></div>

<div class="viewcode-block" id="TaurusCurve.setAppearanceProperties"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.setAppearanceProperties">[docs]</a>    <span class="k">def</span> <span class="nf">setAppearanceProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Applies the given CurveAppearanceProperties object (prop) to the curve.</span>
<span class="sd">        If a given property is set to None, it is not applied</span>

<span class="sd">        :param prop: (CurveAppearanceProperties)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtSymbol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">sStyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtSymbol</span><span class="o">.</span><span class="n">Style</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">sStyle</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">sSize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">setSize</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">sSize</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">sColor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">brush</span><span class="p">()</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">pen</span><span class="p">()</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">sColor</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="n">b</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="n">b</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoBrush</span><span class="p">)</span>
            <span class="n">s</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="n">s</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">sFill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">brush</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">sFill</span><span class="p">:</span>
                <span class="n">b</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">SolidPattern</span><span class="p">)</span>
                <span class="n">s</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">brush</span><span class="p">()</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoBrush</span><span class="p">)</span>
                <span class="n">s</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">lStyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">lStyle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">lWidth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">lWidth</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">lColor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">lColor</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">cStyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">cStyle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">cFill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QBrush</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">brush</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">cFill</span><span class="p">:</span>  <span class="c1"># The area under the curve is filled with the same color as the curve but with 50% transparency</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">color</span><span class="p">()</span>
                <span class="n">color</span><span class="o">.</span><span class="n">setAlphaF</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
                <span class="n">b</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
                <span class="n">b</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">SolidPattern</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">b</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoBrush</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">yAxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setYAxis</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">yAxis</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="s2">&quot;visible&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">visible</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setTitleText</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSymbol</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.getAppearanceProperties"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.getAppearanceProperties">[docs]</a>    <span class="k">def</span> <span class="nf">getAppearanceProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the appearance properties of the curve (color, symbol, width,...).</span>

<span class="sd">        :return: (CurveAppearanceProperties)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="n">CurveAppearanceProperties</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="p">()</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">sStyle</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">style</span><span class="p">()</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">sSize</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>  <span class="c1"># We are only supporting symbols with width==heigh</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">sColor</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">brush</span><span class="p">()</span><span class="o">.</span><span class="n">color</span><span class="p">()</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">sFill</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">brush</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="p">()</span> <span class="o">!=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoBrush</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="p">()</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">lStyle</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">style</span><span class="p">()</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">lWidth</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">lColor</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">color</span><span class="p">()</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">cStyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">()</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">cFill</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">brush</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="p">()</span> <span class="o">!=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoBrush</span><span class="p">)</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">yAxis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yAxis</span><span class="p">()</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">isVisible</span><span class="p">()</span>
        <span class="c1"># We are forced to save only the text (and not the QwtText) because</span>
        <span class="c1"># Pickle chokes with the QwtText</span>
        <span class="n">prop</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.setYAxis"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.setYAxis">[docs]</a>    <span class="k">def</span> <span class="nf">setYAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;changes the Y axis to which the curve is associated</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis to which it should associate</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotCurve</span><span class="o">.</span><span class="n">setYAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="c1"># this way we make sure that the filtering is correct (in case of</span>
        <span class="c1"># change of scale type)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">safeSetData</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusCurve.setFilteredWhenLog"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.setFilteredWhenLog">[docs]</a>    <span class="k">def</span> <span class="nf">setFilteredWhenLog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filtered</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Set whether non-possitive values should be discarded or not when</span>
<span class="sd">        plotting in log mode.</span>

<span class="sd">        :param filtered: (bool) if True, filtering is done</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_filteredWhenLog</span> <span class="o">=</span> <span class="n">filtered</span></div>

<div class="viewcode-block" id="TaurusCurve.isFilteredWhenLog"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.isFilteredWhenLog">[docs]</a>    <span class="k">def</span> <span class="nf">isFilteredWhenLog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns True if non-possitive values are being discarded when plotting in log mode.</span>

<span class="sd">        return: (bool)</span>

<span class="sd">        .. seealso:: :meth:`setFilteredWhenLog`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filteredWhenLog</span></div>

<div class="viewcode-block" id="TaurusCurve.setData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.setData">[docs]</a>    <span class="k">def</span> <span class="nf">setData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets the X and Y data for the curve (possibly filtering non-possitive</span>
<span class="sd">        values if in log mode). Reimplemented from Qwt5.QwtPlotCurve.setData.</span>

<span class="sd">        :param x: (sequence) X values</span>
<span class="sd">        :param y: (sequence) Y values</span>

<span class="sd">        .. seealso:: :meth:`safeSetData`, :meth:`setFilteredWhenLog`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isFilteredWhenLog</span><span class="p">():</span>
            <span class="c1"># filter out the nonpossitive elements if the scale is logarithmic</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">():</span>
                <span class="n">type_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">getAxisTransformationType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xAxis</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">type_</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Log10</span><span class="p">:</span>
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                    <span class="n">valid</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span>  <span class="c1"># this is an array of bools representing valid entries</span>
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">valid</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">valid</span><span class="p">]</span>
                <span class="n">type_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">getAxisTransformationType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yAxis</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">type_</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Log10</span><span class="p">:</span>
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                    <span class="n">valid</span> <span class="o">=</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span>  <span class="c1"># this is an array of bools representing valid entries</span>
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">valid</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">valid</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Curve is not connected but still receiving data&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;setData(x[</span><span class="si">%d</span><span class="s2">],y[</span><span class="si">%d</span><span class="s2">]): array sizes don&#39;t match!&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)))</span>

        <span class="c1"># now proceed as usual</span>
        <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotCurve</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.safeSetData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.safeSetData">[docs]</a>    <span class="k">def</span> <span class="nf">safeSetData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calls setData with x= self._xValues and y=self._yValues</span>

<span class="sd">        .. seealso:: :meth:`setData`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xValues</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yValues</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.getParentTaurusComponent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.getParentTaurusComponent">[docs]</a>    <span class="k">def</span> <span class="nf">getParentTaurusComponent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Searches the closest ancestor (in the Qt parenting hyerarchy) that is</span>
<span class="sd">        which inherits from TaurusBaseComponent. It returns None if None found.</span>

<span class="sd">        :return: (widget or None)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">p</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">TaurusBaseComponent</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QDialog</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">)):</span>
                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">break</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">parentWidget</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">p</span></div>

<div class="viewcode-block" id="TaurusCurve.registerDataChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.registerDataChanged">[docs]</a>    <span class="k">def</span> <span class="nf">registerDataChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">,</span> <span class="n">meth</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; registers a listener to the DataChangedSignal of this curve</span>

<span class="sd">        :param listener: (QWidget) listener object</span>
<span class="sd">        :param meth: (callable) callback method</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">meth</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.unregisterDataChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.unregisterDataChanged">[docs]</a>    <span class="k">def</span> <span class="nf">unregisterDataChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">,</span> <span class="n">meth</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;unregisters the given listener and method from the DataChangedSignal</span>
<span class="sd">        of this curve</span>

<span class="sd">        :param listener: (QWidget) listener object</span>
<span class="sd">        :param meth: (callable) callback method</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">meth</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusCurve.isReadOnly"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.isReadOnly">[docs]</a>    <span class="k">def</span> <span class="nf">isReadOnly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;see :meth:`TaurusBaseComponent.isReadOnly`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="TaurusCurve.getStats"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.getStats">[docs]</a>    <span class="k">def</span> <span class="nf">getStats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inclusive</span><span class="o">=</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="n">imin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">imax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignorenans</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        returns a dict containing several descriptive statistics of a region of</span>
<span class="sd">        the curve defined by the limits given by the keyword arguments. It also</span>
<span class="sd">        contains a copy of the data in the considered region. The keys of the</span>
<span class="sd">        returned dictionary correspond to:</span>

<span class="sd">                 -&#39;x&#39; : the abscissas for the considered points (numpy.array)</span>
<span class="sd">                 -&#39;y&#39; : the ordinates for the considered points (numpy.array)</span>
<span class="sd">                 -&#39;points&#39;: number of considered points (int)</span>
<span class="sd">                 -&#39;min&#39; : (x,y) pair of the minimum of the curve (float,float)</span>
<span class="sd">                 -&#39;max&#39; : (x,y) pair of the maximum of the curve (float,float)</span>
<span class="sd">                 -&#39;mean&#39; : arithmetic average of y (float)</span>
<span class="sd">                 -&#39;std&#39; : (biased)standard deviation of y (float)</span>
<span class="sd">                 -&#39;rms&#39; : root mean square of y (float)</span>

<span class="sd">        Note that some of the values may be None if that cannot be computed.</span>

<span class="sd">        Also,</span>

<span class="sd">        :param limits: (None or tuple&lt;float,float&gt;) tuple containing (min,max) limits.</span>
<span class="sd">                        Points of the curve whose abscisa value is outside of</span>
<span class="sd">                        these limits are ignored. If None is passed, the limit is not enforced</span>
<span class="sd">        :param inclusive: (tuple&lt;bool,bool&gt;). A tuple consisting of the (lower flag, upper flag).</span>
<span class="sd">                          These flags determine whether values exactly equal to the lower or</span>
<span class="sd">                          upper limits are included. The default value is (True, True).</span>
<span class="sd">        :param imin: (int) lowest index to be considered. If None is given,</span>
<span class="sd">                     the limit is not enforced</span>
<span class="sd">        :param imax: (int) higest index to be considered. If None is given,</span>
<span class="sd">                     the limit is not enforced</span>
<span class="sd">        :param ignorenans: (bool) if True (defaul), the points with NaN values are stripped</span>
<span class="sd">                     before calculating the stats</span>

<span class="sd">        :return: (dict) A dict containing the stats.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">imin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">imin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">imax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">imax</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">data</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">imin</span><span class="p">,</span> <span class="n">imax</span><span class="p">)])</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">data</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">imin</span><span class="p">,</span> <span class="n">imax</span><span class="p">)])</span>

        <span class="k">if</span> <span class="n">limits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">limits</span>
            <span class="k">if</span> <span class="n">xmax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xmax</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">inf</span>
            <span class="k">if</span> <span class="n">inclusive</span><span class="p">:</span>
                <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">xmin</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="n">xmax</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">xmin</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">xmax</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">ignorenans</span><span class="p">:</span>
            <span class="c1"># we remove points where either x or y are Nan</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">))</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

        <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span>
               <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span>
               <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
               <span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
               <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
               <span class="s1">&#39;mean&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
               <span class="s1">&#39;std&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
               <span class="s1">&#39;rms&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">argmin</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span>
            <span class="n">argmax</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span>
            <span class="n">ret</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">argmin</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">argmin</span><span class="p">]),</span>
                        <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">argmax</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">argmax</span><span class="p">]),</span>
                        <span class="s1">&#39;mean&#39;</span><span class="p">:</span> <span class="n">y</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
                        <span class="s1">&#39;std&#39;</span><span class="p">:</span> <span class="n">y</span><span class="o">.</span><span class="n">std</span><span class="p">(),</span>
                        <span class="s1">&#39;rms&#39;</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))})</span>
        <span class="k">return</span> <span class="n">ret</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># Methods necessary to show/hide peak values</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

<div class="viewcode-block" id="TaurusCurve.showMaxPeak"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.showMaxPeak">[docs]</a>    <span class="k">def</span> <span class="nf">showMaxPeak</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Specififes if we want to show or not the max peak of the curve</span>

<span class="sd">        :param show: (bool)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxPeak</span> <span class="o">=</span> <span class="n">show</span></div>
        <span class="c1"># self.fireEvent(taurus.core.taurusbasetypes.TaurusEventType.Change)</span>
        <span class="c1"># #force re-reading attribute to update peak values</span>

<div class="viewcode-block" id="TaurusCurve.showMinPeak"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.showMinPeak">[docs]</a>    <span class="k">def</span> <span class="nf">showMinPeak</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Specififes if we want to show or not the min peak of the curve.</span>

<span class="sd">        :param show: (bool)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMinPeak</span> <span class="o">=</span> <span class="n">show</span></div>
        <span class="c1"># self.fireEvent(taurus.core.taurusbasetypes.TaurusEventType.Change)</span>
        <span class="c1"># #force re-reading attribute to update peak values</span>

<div class="viewcode-block" id="TaurusCurve.getYAxisStatus"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusCurve.html#taurus.qt.qtgui.plot.TaurusCurve.getYAxisStatus">[docs]</a>    <span class="k">def</span> <span class="nf">getYAxisStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns either None (if the curve is not visible) or its yAxis (if it</span>
<span class="sd">        is visible)</span>

<span class="sd">        :return: (Qwt5.QwtPlot.Axis or None)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yAxis</span><span class="p">()</span></div></div>


<span class="c1"># class TaurusPlot(Qwt5.QwtPlot, Logger):</span>
<div class="viewcode-block" id="TaurusPlot"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot">[docs]</a><span class="k">class</span> <span class="nc">TaurusPlot</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="p">,</span> <span class="n">TaurusBaseWidget</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    TaurusPlot is a general widget for plotting 1D data sets. It is an extended</span>
<span class="sd">    taurus-aware version of :class:`QwtPlot`.</span>

<span class="sd">    .. image:: /_static/taurusplot04.png</span>
<span class="sd">       :align: center</span>

<span class="sd">    TaurusPlot already incorporates by default many features that can be added to a</span>
<span class="sd">    regular QwtPlot:</span>

<span class="sd">        - Zoomming, panning, and magnifier are enabled by default</span>
<span class="sd">        - Autoscaling is enabled and associated to the ESC key</span>
<span class="sd">        - Methods are available to add new curves which can either be associated</span>
<span class="sd">          to taurus attributes or be &quot;raw data&quot; (i.e., values that are not directly</span>
<span class="sd">          aware of control system events)</span>
<span class="sd">        - Context menu offers access to many options</span>
<span class="sd">        - A plot configuration dialog, and save/restore configuration facilities</span>
<span class="sd">        - Date-time scales and linear/log scales support</span>
<span class="sd">        - Methods for importing/exporting curves from/to ASCII data</span>
<span class="sd">        - Methods for printing and exporting the plot to PDF</span>
<span class="sd">        - Methods for creating curves from arbitrary functions</span>
<span class="sd">        - Data inspection facilities</span>
<span class="sd">        - ...</span>


<span class="sd">    For an overview of the features from an user point of view, see the</span>
<span class="sd">    :ref:`TaurusPlot User&#39;s Interface Guide &lt;taurusplot_ui&gt;`.</span>

<span class="sd">    You can also see some code that exemplifies the use of TaurusPlot in :ref:`the</span>
<span class="sd">    TaurusPlot coding examples &lt;examples_taurusplot&gt;`</span>

<span class="sd">    **Important**: although TaurusPlot subclasses QwtPlot and therefore it is</span>
<span class="sd">    possible to use QwtPlot&#39;s lower level methods for attaching QwtPlotItems</span>
<span class="sd">    (such as QwtPlotCurves) to the plot, it is *highly* recommended to use the</span>
<span class="sd">    higher-level methods provided by TaurusPlot to interact with the datasets</span>
<span class="sd">    attached to a TaurusPlot (e.g., `addModels()`, `attachRawData()`).</span>
<span class="sd">    This is because TaurusPlot keeps records of the items attached via its own</span>
<span class="sd">    methods.</span>

<span class="sd">    .. seealso:: :class:`TaurusTrend`,</span>
<span class="sd">                 :ref:`TaurusPlot User&#39;s Interface Guide &lt;taurusplot_ui&gt;`,</span>
<span class="sd">                 :ref:`The TaurusPlot coding examples &lt;examples_taurusplot&gt;`</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1">#: Override the default modelChanged(&#39;QString&#39;) signal</span>
    <span class="n">modelChanged</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="n">dataChanged</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="s1">&#39;QString&#39;</span><span class="p">)</span>
    <span class="n">CurvesYAxisChanged</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="s1">&#39;QStringList&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">designMode</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;TaurusPlot&quot;</span>
        <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="n">TaurusBaseWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_designMode</span> <span class="o">=</span> <span class="n">designMode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_useParentModel</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isPaused</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defaultCurvesTitle</span> <span class="o">=</span> <span class="s1">&#39;&lt;label&gt;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curvePens</span> <span class="o">=</span> <span class="n">LoopList</span><span class="p">(</span><span class="n">DFT_CURVE_PENS</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gridPen</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c1"># the latest element of this list is considered the current version</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_supportedConfigVersions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tpc-1&quot;</span><span class="p">,</span> <span class="s2">&quot;tpc-1.1&quot;</span><span class="p">]</span>

<span class="c1">#        Logger.__init__(self)</span>
<span class="c1">#        Qwt5.QwtPlot.__init__(self, parent)</span>

        <span class="c1"># dictionary for default axes naming</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axesnames</span> <span class="o">=</span> <span class="p">{</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">:</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xTop</span><span class="p">:</span> <span class="s1">&#39;X2&#39;</span><span class="p">,</span>
                           <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">:</span> <span class="s1">&#39;Y1&#39;</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">:</span> <span class="s1">&#39;Y2&#39;</span><span class="p">}</span>
        <span class="c1"># cache for the values of the axis transformation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Data Import Dialog (it will only be initialised if required)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Values to be managed with/from the TaurusPlotConfigDialog time</span>
        <span class="c1"># configuration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xIsTime</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xMax</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xMin</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xDynScale</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xDynScaleSupported</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># enable dropping (see also dragEnterEvent and dropEvent methods)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAcceptDrops</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># book-keeping of attached tauruscurves</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves</span> <span class="o">=</span> <span class="n">CaselessDict</span><span class="p">()</span>  <span class="c1"># TODO: Tango-centric</span>
        <span class="c1">#self.curves_lock = threading.RLock()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span> <span class="o">=</span> <span class="n">DummyLock</span><span class="p">()</span>

        <span class="c1"># background</span>
        <span class="c1"># self.setCanvasBackground(Qt.Qt.white)</span>

        <span class="c1"># attach a grid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grid</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotGrid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grid</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gridPen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grid</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># configure axes</span>
        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xTop</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScaleDraw</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">FancyScaleDraw</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2AxisPalette</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPalette</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s2">&quot;black&quot;</span><span class="p">),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span>
            <span class="s2">&quot;blue&quot;</span><span class="p">),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axisScaleDraw</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">)</span><span class="o">.</span><span class="n">setPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y2AxisPalette</span><span class="p">)</span>

        <span class="c1"># set initial show/hide peaks configuration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxPeaks</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMinPeaks</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># zoom. One zoomer for Y1 and another for Y2 (but only one will be</span>
        <span class="c1"># active at each time)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_zoom_stack</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span> <span class="o">=</span> <span class="n">TaurusZoomer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span> <span class="o">=</span> <span class="n">TaurusZoomer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="o">.</span><span class="n">setRubberBandPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="o">.</span><span class="n">setTrackerPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">blue</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="o">.</span><span class="n">setAxis</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allowZoomers</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="p">):</span>
            <span class="n">z</span><span class="o">.</span><span class="n">setMaxStackDepth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_zoom_stack</span><span class="p">)</span>
            <span class="c1"># this disables the escape key for going to the top of the zoom</span>
            <span class="c1"># stack (we use escape via an action for autoscaling)</span>
            <span class="n">z</span><span class="o">.</span><span class="n">setKeyPattern</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">KeyHome</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_unknown</span><span class="p">)</span>

        <span class="c1"># point picker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pointPicker</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPicker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pointPicker</span><span class="o">.</span><span class="n">setSelectionFlags</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPicker</span><span class="o">.</span><span class="n">PointSelection</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span> <span class="o">=</span> <span class="n">TaurusCurveMarker</span><span class="p">(</span><span class="s2">&quot;Picked&quot;</span><span class="p">,</span> <span class="n">labelOpacity</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pickedCurveName</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pointPicker</span><span class="o">.</span><span class="n">selected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pickDataPoint</span><span class="p">)</span>

        <span class="c1"># xRegion picker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xRegionPicker</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotPicker</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span>
                                                 <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span>
                                                 <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPicker</span><span class="o">.</span><span class="n">PointSelection</span><span class="p">,</span>
                                                 <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPicker</span><span class="o">.</span><span class="n">VLineRubberBand</span><span class="p">,</span>
                                                 <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPicker</span><span class="o">.</span><span class="n">AlwaysOn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xRegionPicker</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xRegionPicker</span><span class="o">.</span><span class="n">selected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_onXRegionEvent</span><span class="p">)</span>

        <span class="c1"># magnifier</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_magnifier</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotMagnifier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_magnifier</span><span class="o">.</span><span class="n">setMouseButton</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoButton</span><span class="p">)</span>

        <span class="c1"># panner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panner</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotPanner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panner</span><span class="o">.</span><span class="n">setMouseButton</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ControlModifier</span><span class="p">)</span>

        <span class="c1"># legend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">RightLegend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showLegend</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_legendDecissionIsForever</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateLegend</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legendClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggleCurveState</span><span class="p">)</span>

        <span class="c1"># datainspector mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inspectorMode</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggleDataInspectorMode</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># optimization</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_optimizationEnabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># modifiable by user</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModifiableByUser</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># drag&amp;drop</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setSupportedMimeTypes</span><span class="p">(</span>
            <span class="p">[</span><span class="n">TAURUS_MODEL_LIST_MIME_TYPE</span><span class="p">,</span> <span class="n">TAURUS_ATTR_MIME_TYPE</span><span class="p">])</span>

        <span class="c1"># initialize actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__initActions</span><span class="p">()</span>

        <span class="c1"># final stuff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># self.defineStyle()</span>

    <span class="k">def</span> <span class="nf">__initActions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Create and attach TaurusPlot actions&#39;&#39;&#39;</span>

        <span class="c1">#======================================================================</span>
        <span class="c1"># This action is for debug only. Comment out when not debugging</span>
        <span class="c1">#self._debugAction = Qt.QAction(&quot;Calculate statistics&quot;, None)</span>
        <span class="c1"># self._debugAction.setShortcut(Qt.Qt.Key_D)</span>
        <span class="c1">#self.connect(self._debugAction, Qt.SIGNAL(&quot;triggered()&quot;), self.__debug)</span>
        <span class="c1"># self.canvas().addAction(self._debugAction)</span>
        <span class="c1">#======================================================================</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dataInspectorAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Data &amp;Inspector mode&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dataInspectorAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_I</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dataInspectorAction</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dataInspectorAction</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pointPicker</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dataInspectorAction</span><span class="o">.</span><span class="n">toggled</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggleDataInspectorMode</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Calculate statistics&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_S</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onCurveStatsAction</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pauseAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;&amp;Pause&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pauseAction</span><span class="o">.</span><span class="n">setShortcuts</span><span class="p">([</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_P</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_Pause</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pauseAction</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pauseAction</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">isPaused</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pauseAction</span><span class="o">.</span><span class="n">toggled</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">setPaused</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleAllAxisAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Autoscale all axes&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleAllAxisAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_Escape</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleAllAxisAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">autoScaleAllAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_toggleZoomAxisAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Toggle Zoom-aware axis&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_toggleZoomAxisAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_Z</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_toggleZoomAxisAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggleZoomer</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_configDialogAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Plot configuration...&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_configDialogAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QKeySequence</span><span class="p">(</span><span class="s2">&quot;Alt+C&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_configDialogAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showConfigDialog</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_inputDataAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Input data selection...&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inputDataAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QKeySequence</span><span class="o">.</span><span class="n">New</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inputDataAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showDataImportDlg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_saveConfigAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Save current settings...&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_saveConfigAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QKeySequence</span><span class="o">.</span><span class="n">Save</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_saveConfigAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">saveConfig</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_loadConfigAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span>
            <span class="s2">&quot;&amp;Retrieve saved settings...&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loadConfigAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QKeySequence</span><span class="o">.</span><span class="n">Open</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loadConfigAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loadConfig</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_showLegendAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Show &amp;Legend&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showLegendAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QKeySequence</span><span class="p">(</span><span class="s2">&quot;Ctrl+L&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showLegendAction</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showLegendAction</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_showLegend</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showLegendAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showLegend</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">()</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_showLegendAction</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Show Max&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxAction</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxAction</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_showMaxPeaks</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxAction</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showMaxPeaks</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_showMinAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Show Min&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMinAction</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMinAction</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_showMinPeaks</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showMinAction</span><span class="o">.</span><span class="n">toggled</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showMinPeaks</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_printAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;&amp;Print plot...&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_printAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exportPrint</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_exportPdfAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Export plot to PD&amp;F...&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exportPdfAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exportPdf</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_exportAsciiAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Export data to &amp;ASCII...&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_exportAsciiAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exportAscii</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setCurvesTitleAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span>
            <span class="s2">&quot;Change Curves Titles...&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setCurvesTitleAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeCurvesTitlesDialog</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_closeWindowAction</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QIcon</span><span class="o">.</span><span class="n">fromTheme</span><span class="p">(</span><span class="s2">&quot;process-stop&quot;</span><span class="p">),</span> <span class="s1">&#39;Close Plot&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_closeWindowAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="c1"># add all actions and limit the scope of the key shortcuts to the</span>
        <span class="c1"># widget (default is Window)</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataInspectorAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pauseAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleAllAxisAction</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">_toggleZoomAxisAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configDialogAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inputDataAction</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">_saveConfigAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loadConfigAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showLegendAction</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showMinAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_printAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exportPdfAction</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">_exportAsciiAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_setCurvesTitleAction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsAction</span><span class="p">):</span>
            <span class="c1"># this is needed to avoid ambiguity when more than one TaurusPlot</span>
            <span class="c1"># is used in the same window</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setShortcutContext</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WidgetShortcut</span><span class="p">)</span>
            <span class="c1"># because of the line above, we must add the actions to the widget</span>
            <span class="c1"># that gets the focus (the canvas instead of self)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">()</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

<div class="viewcode-block" id="TaurusPlot.dropEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.dropEvent">[docs]</a>    <span class="k">def</span> <span class="nf">dropEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;reimplemented to support dropping of modelnames in taurusplots&#39;&#39;&#39;</span>
        <span class="n">mtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleMimeData</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">mimeData</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">addModels</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Invalid model&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">acceptProposedAction</span><span class="p">()</span></div>

<span class="c1">#    def dropEvent(self, event):</span>
<span class="c1">#        &#39;&#39;&#39;reimplemented to support dropping of modelnames in taurusplots&#39;&#39;&#39;</span>
<span class="c1">#        supported = self.getSupportedMimeTypes()</span>
<span class="c1">#        formats = event.mimeData().formats()</span>
<span class="c1">#        for mtype in supported:</span>
<span class="c1">#            if mtype in formats:</span>
<span class="c1">#                modelname = str(event.mimeData().data(mtype))</span>
<span class="c1">#                if modelname is None:</span>
<span class="c1">#                    return</span>
<span class="c1">#                try:</span>
<span class="c1">#                    self.addModels([modelname])</span>
<span class="c1">#                    event.acceptProposedAction()</span>
<span class="c1">#                except:</span>
<span class="c1">#                    self.info(&#39;Dropped data is invalid (%s)&#39;%repr(modelname))</span>
<span class="c1">#                return</span>

<div class="viewcode-block" id="TaurusPlot.getAxisTransformationType"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getAxisTransformationType">[docs]</a>    <span class="k">def</span> <span class="nf">getAxisTransformationType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the transformation type for a given axis (cached)</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>

<span class="sd">        :return: (Qwt5.QwtScaleTransformation.Type)</span>

<span class="sd">        .. note:: this method helps to avoid a memory leak in Qwt (see</span>
<span class="sd">                  http://sf.net/p/tauruslib/tickets/171 )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisScaleEngine</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">transformation</span><span class="p">()</span><span class="o">.</span><span class="n">type</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
            <span class="k">return</span> <span class="n">t</span></div>

<div class="viewcode-block" id="TaurusPlot.setAxisScaleEngine"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setAxisScaleEngine">[docs]</a>    <span class="k">def</span> <span class="nf">setAxisScaleEngine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">scaleEngine</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; reimplemented from :meth:`Qwt5.QwtPlot.setAxisScaleEngine` to store</span>
<span class="sd">         a cache of the transformation type &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span> <span class="o">=</span> <span class="n">scaleEngine</span><span class="o">.</span><span class="n">transformation</span><span class="p">()</span><span class="o">.</span><span class="n">type</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">setAxisScaleEngine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">scaleEngine</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.getCurveTitle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getCurveTitle">[docs]</a>    <span class="k">def</span> <span class="nf">getCurveTitle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curvename</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;return the current title associated to a given curve name</span>

<span class="sd">        :param curvename: (str) the name of the curve</span>

<span class="sd">        :return:(str)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurve</span><span class="p">(</span><span class="n">curvename</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">curve</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">title</span></div>

<div class="viewcode-block" id="TaurusPlot.getCurveNames"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getCurveNames">[docs]</a>    <span class="k">def</span> <span class="nf">getCurveNames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the names of all TaurusCurves attached to the plot (in arbitrary</span>
<span class="sd">        order, if you need a sorted list, see :meth:`getCurveNamesSorted`).</span>

<span class="sd">        :return: (list&lt;str&gt;) a copy of self.curves.keys()</span>

<span class="sd">        .. seealso:: :meth:`getCurveNamesSorted`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="TaurusPlot.getCurveNamesSorted"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getCurveNamesSorted">[docs]</a>    <span class="k">def</span> <span class="nf">getCurveNamesSorted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the names of the curves in z order (which is the one used in</span>
<span class="sd">        the legend, and in showing the curves).</span>

<span class="sd">        :return: (list&lt;str&gt;) curve names</span>

<span class="sd">        .. seealso:: :meth:`getCurveNames`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">o</span><span class="o">.</span><span class="n">getCurveName</span><span class="p">()</span>
                     <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">itemList</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">TaurusCurve</span><span class="p">)]</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">names</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.sortCurves"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.sortCurves">[docs]</a>    <span class="k">def</span> <span class="nf">sortCurves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sorts the attached curves in a given z order. This affects both the</span>
<span class="sd">        ordering in the legend and the visibility order when curves overlap in</span>
<span class="sd">        the plotting area. The order is governed by the `ordered` parameter (or</span>
<span class="sd">        alphabetically if no parameter is passed).</span>

<span class="sd">        :param ordered: (list&lt;str&gt; or None) A list of curve names in the desired</span>
<span class="sd">                        order. If None passed, the items will be ordered</span>
<span class="sd">                        alphabetically according to their title.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ordered</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">orderedObjs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">curve</span><span class="p">:</span> <span class="n">curve</span><span class="o">.</span><span class="n">titleText</span><span class="p">(</span><span class="n">compiled</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#current = self.curves.keys()</span>
                <span class="c1"># if len(ordered) != len(current) or set(map(str.lower,current)) - set(map(str.lower, ordered)):</span>
                <span class="c1">#    raise ValueError(&#39;Invalid value for the &quot;ordered&quot; parameter&#39;)</span>
                <span class="n">orderedObjs</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ordered</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">curve</span> <span class="ow">in</span> <span class="n">orderedObjs</span><span class="p">:</span>
                <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotCurve</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="n">curve</span><span class="p">)</span>
                <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotCurve</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.toggleZoomer"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.toggleZoomer">[docs]</a>    <span class="k">def</span> <span class="nf">toggleZoomer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;changes the current zoomer to that associated to the given axis</span>
<span class="sd">        (zoomer1 is attached to Y1 and zoomer2 to Y2).</span>
<span class="sd">        If no axis is passed, the zoomers are toggled.</span>

<span class="sd">        :param axis: (Qwt.QwtPlot.Axis or None) axis to activate for zooming. If None passed, the zoomers are toggled.</span>

<span class="sd">        :return: (Qwt.QwtPlot.Axis) the Y axis of the enabled zoomer</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowZoomers</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="p">):</span>
                <span class="n">z</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># find the axis of the currently disabled zoomer</span>
            <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">z</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">():</span>
                    <span class="k">break</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">yAxis</span><span class="p">()</span>
        <span class="c1"># enable the zoomer corresponding to axis and disable the other one</span>
        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="p">):</span>
            <span class="n">z</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">yAxis</span><span class="p">()</span> <span class="o">==</span> <span class="n">axis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getZoomers</span><span class="p">(</span><span class="n">axis</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Now Zooming on </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getAxisName</span><span class="p">(</span><span class="n">axis</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer</span><span class="o">.</span><span class="n">yAxis</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getAxisName"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getAxisName">[docs]</a>    <span class="k">def</span> <span class="nf">getAxisName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;If set, it returns the axis title text, otherwise returns the default</span>
<span class="sd">        axis name</span>

<span class="sd">        :param axis: (Qwt.QwtPlot.Axis)</span>

<span class="sd">        :return: (unicode)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axisTitle</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axesnames</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">name</span></div>

<div class="viewcode-block" id="TaurusPlot.setPaused"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setPaused">[docs]</a>    <span class="k">def</span> <span class="nf">setPaused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paused</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;delegates the pausing to the curves</span>

<span class="sd">        :param paused: (bool) if True, the plot will be paused</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">itervalues</span><span class="p">():</span>
            <span class="n">c</span><span class="o">.</span><span class="n">setPaused</span><span class="p">(</span><span class="n">paused</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isPaused</span> <span class="o">=</span> <span class="n">paused</span></div>

<div class="viewcode-block" id="TaurusPlot.isPaused"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.isPaused">[docs]</a>    <span class="k">def</span> <span class="nf">isPaused</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the pause state</span>

<span class="sd">        :return: (bool)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isPaused</span></div>

    <span class="k">def</span> <span class="nf">__debug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;put code here that you want to debug&#39;&#39;&#39;</span>
        <span class="nb">print</span> <span class="s2">&quot;!!!!!!!!!!!!!!!1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
        <span class="n">Qt</span><span class="o">.</span><span class="n">QToolTip</span><span class="o">.</span><span class="n">showText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapToGlobal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">()),</span>
                             <span class="s2">&quot;ASDASDASDASD DASDAS ASDA&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="k">return</span>

<div class="viewcode-block" id="TaurusPlot.getDefaultAxisLabelsAlignment"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getDefaultAxisLabelsAlignment">[docs]</a>    <span class="k">def</span> <span class="nf">getDefaultAxisLabelsAlignment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">rotation</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;return a &quot;smart&quot; alignment for the axis labels depending on the axis</span>
<span class="sd">        and the label rotation</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>
<span class="sd">        :param rotation: (float) The rotation (in degrees, clockwise-positive)</span>

<span class="sd">        :return: (Qt.Alignment) an alignment</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># print &quot;!!!!&quot;, {Qwt5.QwtPlot.xBottom:&quot;B&quot; , Qwt5.QwtPlot.yLeft:&quot;L&quot;,</span>
        <span class="c1"># Qwt5.QwtPlot.yRight:&quot;R&quot;, Qwt5.QwtPlot.xTop:&quot;T&quot;}[axis]</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rotation</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignHCenter</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignBottom</span>
            <span class="k">elif</span> <span class="n">rotation</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignBottom</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignBottom</span>
        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rotation</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span>
            <span class="k">elif</span> <span class="n">rotation</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignBottom</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignTop</span>
        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rotation</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span>
            <span class="k">elif</span> <span class="n">rotation</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignTop</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignBottom</span>
        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xTop</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rotation</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignHCenter</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignTop</span>
            <span class="k">elif</span> <span class="n">rotation</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignTop</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignTop</span></div>

<div class="viewcode-block" id="TaurusPlot.setAxisCustomLabels"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setAxisCustomLabels">[docs]</a>    <span class="k">def</span> <span class="nf">setAxisCustomLabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">pos_and_labels</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;By calling this method, the scale vaues can be substituted  by custom</span>
<span class="sd">        labels at arbitrary positions. In general, it is a good idea to let the</span>
<span class="sd">        alignment to be autocalculated.</span>

<span class="sd">        :param axis:           (Qwt5.QwtPlot.Axis) the axis</span>
<span class="sd">        :param pos_and_labels: (sequence&lt;tuple&gt;) a sequence of</span>
<span class="sd">                               position(&lt;float&gt;),label(&lt;str&gt;) tuples</span>
<span class="sd">        :param rotation:       (float) rotation value for the labels (in degrees,</span>
<span class="sd">                               clockwise-positive, by default it is 0)</span>
<span class="sd">        :param alignment:      (Qt.Alignment) an alignment for the labels.</span>
<span class="sd">                               If None given, it will be autocalculated</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">positions</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">pos_and_labels</span><span class="p">)</span>  <span class="c1"># &quot;unzipping&quot;</span>
        <span class="n">positions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScaleEngine</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">FixedLabelsScaleEngine</span><span class="p">(</span><span class="n">positions</span><span class="p">))</span>

        <span class="n">sd</span> <span class="o">=</span> <span class="n">FixedLabelsScaleDraw</span><span class="p">(</span><span class="n">positions</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
        <span class="n">sd</span><span class="o">.</span><span class="n">setLabelRotation</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">alignment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">alignment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDefaultAxisLabelsAlignment</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">rotation</span><span class="p">)</span>
        <span class="n">sd</span><span class="o">.</span><span class="n">setLabelAlignment</span><span class="p">(</span><span class="n">alignment</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScaleDraw</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">sd</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getPickedMarker"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getPickedMarker">[docs]</a>    <span class="k">def</span> <span class="nf">getPickedMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the marker for the picked points for this plot</span>

<span class="sd">        :return: (TaurusCurveMarker)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span></div>

<div class="viewcode-block" id="TaurusPlot.getZoomers"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getZoomers">[docs]</a>    <span class="k">def</span> <span class="nf">getZoomers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns a list of the zoomer(s) associated to the given axis.</span>
<span class="sd">        If None is passed, it returns a list containing the current zoomer</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoomer</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid axis for getZoomers()&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.getGrid"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getGrid">[docs]</a>    <span class="k">def</span> <span class="nf">getGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; returns the grid of the plot</span>

<span class="sd">        :return: (Qwt5.QwtPlotGrid)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_grid</span></div>

<div class="viewcode-block" id="TaurusPlot.getPlot"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getPlot">[docs]</a>    <span class="k">def</span> <span class="nf">getPlot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;deprecated method . Only here for backwards compatibility. It will be</span>
<span class="sd">        removed, eventually. Now you should use the TaurusPlot instance instead of</span>
<span class="sd">        TaurusPlot.getPlot()&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s1">&#39;DEPRECATION WARNING!: Calling TaurusPlot.getPlot() is deprecated. Use the TaurusPlot object itself instead&#39;</span><span class="p">)</span>
        <span class="nb">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="TaurusPlot.getCurve"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getCurve">[docs]</a>    <span class="k">def</span> <span class="nf">getCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;gets a curve object by name.</span>

<span class="sd">        **Important**: Note that the curve object is not thread safe. Therefore,</span>
<span class="sd">        if you access to the curve object you must do it protected by the</span>
<span class="sd">        TaurusPlot.curves_lock reentrant lock.</span>

<span class="sd">        :param name: (str) the curve name</span>

<span class="sd">        :return: (TaurusCurve) the curve object corresponding to name</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="TaurusPlot.setAxesLabelFormat"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setAxesLabelFormat">[docs]</a>    <span class="k">def</span> <span class="nf">setAxesLabelFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xformat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y1format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y2format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Convenience method for setting the format of any or all axes</span>
<span class="sd">        if format=None, specific formats for x, y1 and y2 can be explicitly set,</span>
<span class="sd">        e.g::</span>

<span class="sd">            setAxesLabelFormat(&quot;%6.2f&quot;) #&lt;--sets the &quot;%6.2f&quot; format for all axes</span>
<span class="sd">            setAxesLabelFormat(xformat=None, y1format=&quot;%i&quot;) #&lt;--sets the default format for x and an integer format fotr y1</span>

<span class="sd">        :param format: (str) format string to be applied to all axes. If None, the default format is used</span>
<span class="sd">        :param xformat: (str) format string to be applied to the X axis. If None, the default format is used</span>
<span class="sd">        :param y1format: (str) format string to be applied to the Y1 axis. If None, the default format is used</span>
<span class="sd">        :param y2format: (str) format string to be applied to the Y2 axis. If None, the default format is used</span>

<span class="sd">        .. seealso:: :meth:`setAxisLabelFormat`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="n">xformat</span><span class="p">,</span> <span class="n">y1format</span><span class="p">,</span> <span class="n">y2format</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="nb">format</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">axis</span><span class="p">,</span> <span class="nb">format</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">formats</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAxisLabelFormat</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.setAxisLabelFormat"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setAxisLabelFormat">[docs]</a>    <span class="k">def</span> <span class="nf">setAxisLabelFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;changes the format of an axis label. format is a python format string</span>
<span class="sd">        (e.g., &quot;%6.2f&quot;), . If format=None, the default behaviour is set</span>
<span class="sd">        (which uses QLocale.system().toString(value))</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>
<span class="sd">        :param format: (str) format string to be applied to all axes. If None, the default format is used</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axisScaleDraw</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">setLabelFormat</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.getAxisLabelFormat"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getAxisLabelFormat">[docs]</a>    <span class="k">def</span> <span class="nf">getAxisLabelFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the label format for the given axis</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>

<span class="sd">        :return: (str or None)</span>

<span class="sd">        .. seealso:: :meth:`setAxisLabelFormat`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisScaleDraw</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">getLabelFormat</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="TaurusPlot.resetAxisLabelFormat"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetAxisLabelFormat">[docs]</a>    <span class="k">def</span> <span class="nf">resetAxisLabelFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;equivalent to setAxisLabelFormat(axis, None)</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>

<span class="sd">        See also:setAxisLabelFormat</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAxisLabelFormat</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.showMaxPeaks"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.showMaxPeaks">[docs]</a>    <span class="k">def</span> <span class="nf">showMaxPeaks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This function will set the showMaxPeak flag of all the curves in the</span>
<span class="sd">        plot.</span>

<span class="sd">        :param show: (bool) if True, the max values of the displayed curve(s)</span>
<span class="sd">                     will be shown on the plot. Otherwise, they will be hidden.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxPeaks</span> <span class="o">=</span> <span class="n">show</span>
            <span class="k">for</span> <span class="n">curveName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">():</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">curveName</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">showMaxPeak</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">attachMaxMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">showMaxPeak</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">detachMaxMarker</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.showMinPeaks"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.showMinPeaks">[docs]</a>    <span class="k">def</span> <span class="nf">showMinPeaks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This function will set the showMinPeak flag of all the curves in the plot.</span>

<span class="sd">        :param show: (bool) if True, the min values of the displayed curve(s)</span>
<span class="sd">                     will be shown on the plot. Otherwise, they will be hidden.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_showMinPeaks</span> <span class="o">=</span> <span class="n">show</span>
            <span class="k">for</span> <span class="n">curveName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">():</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">curveName</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">showMinPeak</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">attachMinMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">showMinPeak</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">detachMinMarker</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.showCurve"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.showCurve">[docs]</a>    <span class="k">def</span> <span class="nf">showCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curve</span><span class="p">,</span> <span class="n">on</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;switch visibility of a curve (as well as any markers associated to</span>
<span class="sd">        it) on/off</span>

<span class="sd">        **Important**: This is a non-thread safe method. Do not manipulate curve</span>
<span class="sd">        objects without protecting the access with Taurusplot.curves_lock</span>

<span class="sd">        :param curve: (TaurusCurve) the curve object</span>
<span class="sd">        :param on: (bool) if True, the curve will be shown otherwise it will be</span>
<span class="sd">                   hidden</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">curve</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
        <span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">legend</span><span class="p">:</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="n">legend</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">curve</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="n">TaurusCurve</span><span class="p">):</span>
                <span class="n">title</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
                <span class="c1"># if hidding the curve, hide peaks also</span>
                <span class="c1"># change legend color too</span>
                <span class="k">if</span> <span class="n">on</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="n">title</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">darkGray</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">showMaxPeak</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">showMinPeak</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">detachMarkers</span><span class="p">()</span>
                <span class="c1"># if the curve is shown, show the markers as well (if required)</span>
                <span class="c1"># and change the color in the legend too!</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">curve</span><span class="o">.</span><span class="n">yAxis</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">:</span>
                        <span class="n">title</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">title</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">darkBlue</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxPeaks</span><span class="p">:</span>
                        <span class="n">curve</span><span class="o">.</span><span class="n">showMaxPeak</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                        <span class="n">curve</span><span class="o">.</span><span class="n">attachMarkers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showMinPeaks</span><span class="p">:</span>
                        <span class="n">curve</span><span class="o">.</span><span class="n">showMinPeak</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                        <span class="n">curve</span><span class="o">.</span><span class="n">attachMarkers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
                <span class="n">widget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.toggleCurveState"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.toggleCurveState">[docs]</a>    <span class="k">def</span> <span class="nf">toggleCurveState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curve</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;cycles through 3 possible states for a curve:</span>

<span class="sd">            - invisible</span>
<span class="sd">            - attached to Y1</span>
<span class="sd">            - attached to Y2</span>

<span class="sd">        :param curve: (TaurusCurve) the curve object</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># get the key in the self.curves directory</span>
            <span class="n">curveName</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">curveName</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">is</span> <span class="n">curve</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">yAxis</span><span class="p">()</span>
            <span class="c1"># Toggle state</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">curve</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setCurvesYAxis</span><span class="p">([</span><span class="n">curveName</span><span class="p">],</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setCurvesYAxis</span><span class="p">([</span><span class="n">curveName</span><span class="p">],</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showCurve</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">autoShowYAxes</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="s2">&quot;QString&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;dataChanged&quot;</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.curveDataChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.curveDataChanged">[docs]</a>    <span class="k">def</span> <span class="nf">curveDataChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;slot that is called whenever a curve emits a dataChanged signal</span>

<span class="sd">        :emits: &quot;dataChanged(const QString &amp;)&quot;</span>

<span class="sd">        :param name: (str) curve name</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
            <span class="n">curve</span><span class="o">.</span><span class="n">safeSetData</span><span class="p">()</span>
            <span class="c1"># self._zoomer.setZoomBase()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXDynScale</span><span class="p">():</span>  <span class="c1"># keep the scale width constant, but translate it to get the last value</span>
                <span class="nb">max</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">_xValues</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="nb">min</span> <span class="o">=</span> <span class="nb">max</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXAxisRange</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScale</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.attachRawData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.attachRawData">[docs]</a>    <span class="k">def</span> <span class="nf">attachRawData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rawdata</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;attaches a curve to the plot formed from raw data that comes in a dict</span>

<span class="sd">        :param rawdata: (dict) A dictionary defining a rawdata curve. It has the</span>
<span class="sd">                        following structure (all keys are optional, but either</span>
<span class="sd">                        &quot;y&quot; or &quot;f(x)&quot; must be present. Also, the value of x, y</span>
<span class="sd">                        and f(x) can be None):</span>

<span class="sd">                        {&quot;title&quot;:&lt;str&gt;, &quot;x&quot;:list&lt;float&gt;, &quot;y&quot;:list&lt;float&gt;,</span>
<span class="sd">                        &quot;f(x)&quot;: &lt;str (an expression to evaluate on the x values)&gt;}</span>

<span class="sd">        :param properties: (CurveAppearanceProperties) appearance properties for</span>
<span class="sd">                           the curve</span>
<span class="sd">        :param id: (str) This will be the internal name identifier used for the</span>
<span class="sd">                   curve. If not given, it defaults to the title or to &quot;rawdata&quot;</span>
<span class="sd">                   if no title is given.</span>

<span class="sd">        :return: (QwtPlotCurve) the attached curve</span>

<span class="sd">        *Note*: every member of the rawdata dictionary is optional except for the y values (or, alternatively, f(x) AND x)</span>

<span class="sd">        *Note*: using &quot;name&quot; in the rawdata dictionary is a still-supported-but-deprecated synonim of &quot;title&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">properties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">properties</span> <span class="o">=</span> <span class="n">CurveAppearanceProperties</span><span class="p">(</span>
                <span class="n">lColor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_curvePens</span><span class="o">.</span><span class="n">next</span><span class="p">()</span><span class="o">.</span><span class="n">color</span><span class="p">(),</span> <span class="n">lWidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="c1"># Deprecation Warning:</span>
        <span class="k">if</span> <span class="n">rawdata</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s2">&quot;pen&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">rawdata</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s2">&quot;style&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">DeprecationWarning</span><span class="p">(</span>
                <span class="s2">&quot;&#39;pen&#39; or &#39;style&#39; are no longer supported. Use the properties parameter instead&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rawdata</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">rawdata</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s1">&#39;Inconsistence: both &quot;name&quot; and &quot;title&quot; passed for rawdata. Use &quot;title&quot; only&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s1">&#39;The use of &quot;name&quot; (=</span><span class="si">%s</span><span class="s1">) for attaching rawdata is deprecated. Use &quot;title&quot; instead&#39;</span> <span class="o">%</span> <span class="n">rawdata</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
                <span class="n">rawdata</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rawdata</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>

        <span class="n">y</span> <span class="o">=</span> <span class="n">rawdata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">fx</span> <span class="o">=</span> <span class="n">rawdata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;f(x)&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">rawdata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Either &quot;f(x)&quot; or &quot;y&quot; keys must be present&#39;</span><span class="p">)</span>
            <span class="n">title</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rawdata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;rawdata&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># if no x is given, the indices will be used</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;only one of &quot;f(x)&quot; or &quot;y&quot; keys can be present&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># we need x values in which to evaluate</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Missing &quot;x&quot; values&#39;</span><span class="p">)</span>
            <span class="n">title</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">rawdata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">fx</span><span class="p">))</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">sev</span> <span class="o">=</span> <span class="n">SafeEvaluator</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">})</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">sev</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">fx</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c1"># TODO: deal with this exception properly.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;the function &#39;</span><span class="si">%s</span><span class="s2">&#39; could not be evaluated (skipping)&quot;</span> <span class="o">%</span> <span class="n">title</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="c1">#@todo: support error bars</span>
<span class="c1">#        ex=rawdata.get(&quot;ex&quot;,numpy.zeros(len(y)))</span>
<span class="c1">#        ey=rawdata.get(&quot;ey&quot;,numpy.zeros(len(y)))</span>

        <span class="c1"># at this point, both x and y must be valid</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">title</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">curve</span><span class="o">.</span><span class="n">isRawData</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">detachRawData</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">unregisterDataChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">curveDataChanged</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;overwriting curve </span><span class="si">%s</span><span class="s1"> with raw data&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;attaching raw data with name </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">curve</span> <span class="o">=</span> <span class="n">TaurusCurve</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">rawData</span><span class="o">=</span><span class="n">rawdata</span><span class="p">,</span>
                                <span class="n">optimized</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">isOptimizationEnabled</span><span class="p">())</span>
            <span class="c1"># curve.fireEvent = lambda arg:None  #!!! reimplementing FireEvent</span>
            <span class="c1"># on the fly! (ugly-lazy hack)</span>
            <span class="n">curve</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxPeaks</span><span class="p">:</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">attachMaxMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showMinPeaks</span><span class="p">:</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">attachMinMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">curve</span><span class="o">.</span><span class="n">_xValues</span><span class="p">,</span> <span class="n">curve</span><span class="o">.</span><span class="n">_yValues</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
            <span class="n">curve</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="c1"># note that the title and the name may differ</span>
            <span class="n">curve</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
            <span class="n">curve</span><span class="o">.</span><span class="n">setAppearanceProperties</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">curve</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showCurve</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showLegend</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">forever</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span><span class="o">.</span><span class="n">setZoomBase</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="o">.</span><span class="n">setZoomBase</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">curve</span></div>

<div class="viewcode-block" id="TaurusPlot.detachRawData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.detachRawData">[docs]</a>    <span class="k">def</span> <span class="nf">detachRawData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;dettaches a raw data curve</span>

<span class="sd">        :param name: (str) name (identifier) of the curve to dettach</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;detaching raw data with name </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">curve</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">curve</span><span class="o">.</span><span class="n">isRawData</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;detachRawData failed: &#39;</span><span class="si">%s</span><span class="s2">&#39; is not a rawData curve&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">curve</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.clearAllRawData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.clearAllRawData">[docs]</a>    <span class="k">def</span> <span class="nf">clearAllRawData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        removes all rawdata curves from the plot.</span>

<span class="sd">        :return: (list&lt;str&gt;) the list of removed curve names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">[</span>
                <span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">isRawData</span><span class="p">]</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">detachRawData</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">names</span></div>

<div class="viewcode-block" id="TaurusPlot.getCurveData"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getCurveData">[docs]</a>    <span class="k">def</span> <span class="nf">getCurveData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curvename</span><span class="p">,</span> <span class="n">numpy</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the data in the curve as two lists (x,y) of values</span>

<span class="sd">        :param curvename: (str) the curve name</span>
<span class="sd">        :param numpy: (bool) if True, the result is returned as numpy arrays instead of lists</span>

<span class="sd">        :return: (tuple&lt;list,list&gt;) tuple of two lists (x,y) containing the curve data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">curvename</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">[</span><span class="n">curvename</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
                <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">size</span><span class="p">())]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">size</span><span class="p">())]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Curve &#39;</span><span class="si">%s</span><span class="s2">&#39; not found&quot;</span> <span class="o">%</span> <span class="n">curvename</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span></div>

<div class="viewcode-block" id="TaurusPlot.updateCurves"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.updateCurves">[docs]</a>    <span class="k">def</span> <span class="nf">updateCurves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Updates the TaurusCurves being plotted. It adds a new curve for each new</span>
<span class="sd">        curve model passed and removes curves if they are not in the names.</span>

<span class="sd">        :param names:   (sequence&lt;str&gt;) a sequence of curve models. One curve</span>
<span class="sd">                        will be created for each element of names.</span>
<span class="sd">                        Each  curve model can consist of a single attribute name</span>
<span class="sd">                        (which will be used for the Y values) or by two</span>
<span class="sd">                        attribute names separated by a &#39;|&#39; (in which case, the</span>
<span class="sd">                        left-hand attribute is used for the X values and the</span>
<span class="sd">                        right hand value for the Y values)</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xnames</span><span class="p">,</span> <span class="n">ynames</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
                <span class="n">yname</span> <span class="o">=</span> <span class="n">n</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">xname</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">xname</span> <span class="o">=</span> <span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">xnames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xname</span><span class="p">)</span>
                <span class="n">ynames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yname</span><span class="p">)</span>

            <span class="n">del_curves</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                          <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ynames</span><span class="p">]</span>

            <span class="c1"># if all curves were removed, reset the color palette</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">del_curves</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_curvePens</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ynames</span><span class="p">):</span>
                <span class="n">xname</span> <span class="o">=</span> <span class="n">xnames</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;updating curve </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                    <span class="n">curve</span> <span class="o">=</span> <span class="n">TaurusCurve</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">xname</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span>
                                        <span class="n">optimized</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">isOptimizationEnabled</span><span class="p">())</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">curve</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">showCurve</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showMaxPeaks</span><span class="p">:</span>
                        <span class="n">curve</span><span class="o">.</span><span class="n">attachMaxMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showMinPeaks</span><span class="p">:</span>
                        <span class="n">curve</span><span class="o">.</span><span class="n">attachMinMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curvePens</span><span class="o">.</span><span class="n">next</span><span class="p">())</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">setUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getUseParentModel</span><span class="p">())</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">setTitleText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDefaultCurvesTitle</span><span class="p">())</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">registerDataChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">curveDataChanged</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">curveDataChanged</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

            <span class="c1"># curves to be removed</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">del_curves</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="c1">#curve = self.curves.pop(name)</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">curve</span><span class="o">.</span><span class="n">isRawData</span><span class="p">:</span>  <span class="c1"># The rawdata curves should not be dettached by updateCurves. Call detachRawdata insted</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">unregisterDataChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">curveDataChanged</span><span class="p">)</span>
                    <span class="n">curve</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">del_curves</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">autoShowYAxes</span><span class="p">()</span>

            <span class="c1"># legend</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showLegend</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">forever</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getLegend"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getLegend">[docs]</a>    <span class="k">def</span> <span class="nf">getLegend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the legend object of this plot</span>

<span class="sd">        :return: (QwtLegend)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span></div>

<div class="viewcode-block" id="TaurusPlot.updateLegend"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.updateLegend">[docs]</a>    <span class="k">def</span> <span class="nf">updateLegend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Updates the legend object of the plot (if it does not exist, it may</span>
<span class="sd">        create a fresh one)</span>

<span class="sd">        :param force: (bool) if True, the legend will be updated even if it is</span>
<span class="sd">                      not being shown. (default=False)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_showLegend</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">force</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtLegend</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span><span class="o">.</span><span class="n">setItemMode</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtLegend</span><span class="o">.</span><span class="n">ClickableItem</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span><span class="o">.</span><span class="n">setDisplayPolicy</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtLegend</span><span class="o">.</span><span class="n">FixedIdentifier</span><span class="p">,</span>
                                              <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtLegendItem</span><span class="o">.</span><span class="n">ShowLine</span> <span class="o">|</span>
                                              <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtLegendItem</span><span class="o">.</span><span class="n">ShowSymbol</span> <span class="o">|</span>
                                              <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtLegendItem</span><span class="o">.</span><span class="n">ShowText</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insertLegend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_legend</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
                    <span class="s2">&quot;Clicking on a legend item changes</span><span class="se">\n</span><span class="s2"> the associated Y axis for the curve.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertLegend</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.showLegend"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.showLegend">[docs]</a>    <span class="k">def</span> <span class="nf">showLegend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">forever</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;whether to show or not the legend.</span>

<span class="sd">        :param show: (bool) if True, the legend will be shown</span>
<span class="sd">        :param forever: (bool) if True, the setting will be permant (e.g., the</span>
<span class="sd">                        legend won&#39;t be hidden even if only one curve is</span>
<span class="sd">                        plotted) (default=True)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">forever</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_legendDecissionIsForever</span> <span class="o">=</span> <span class="n">forever</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_showLegend</span> <span class="o">=</span> <span class="n">show</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legendDecissionIsForever</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_showLegend</span> <span class="o">=</span> <span class="n">show</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateLegend</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_showLegendAction</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_showLegend</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.getModelObj"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getModelObj">[docs]</a>    <span class="k">def</span> <span class="nf">getModelObj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;See :meth:`TaurusBaseComponent.getModelObj`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurve</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span><span class="o">.</span><span class="n">getModelObj</span><span class="p">()</span></div>

    <span class="c1"># def defineStyle(self):</span>
    <span class="c1">#    pass</span>

<div class="viewcode-block" id="TaurusPlot.minimumSizeHint"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.minimumSizeHint">[docs]</a>    <span class="k">def</span> <span class="nf">minimumSizeHint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;See :meth:`QWidget.minimumSizeHint`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.sizeHint"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.sizeHint">[docs]</a>    <span class="k">def</span> <span class="nf">sizeHint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;See :meth:`QWidget.sizeHint`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="s1">&#39;QString&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;modelChanged&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.parentModelChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.parentModelChanged">[docs]</a>    <span class="k">def</span> <span class="nf">parentModelChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parentmodel_name</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;See :meth:`TaurusBaseComponent.parentModelChanged`&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">curve</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">setModelCheck</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">getModel</span><span class="p">(),</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getParentTaurusComponent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getParentTaurusComponent">[docs]</a>    <span class="k">def</span> <span class="nf">getParentTaurusComponent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;See :meth:`TaurusBaseComponent.getParentTaurusComponent`&#39;&#39;&#39;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentWidget</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">p</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">TaurusBaseComponent</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QDialog</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">):</span>
                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">break</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">parentWidget</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">p</span></div>

    <span class="c1"># def keyPressEvent(self,keyEvent):</span>
    <span class="c1">#    &quot;&quot;&quot;This function will capture any key press and react on ESC key pressed to set autoscale on all axis&quot;&quot;&quot;</span>
    <span class="c1">#    #Leave this commented unless you want to debug</span>
    <span class="c1">#    #elif (keyEvent.key() == Qt.Qt.Key_D):</span>
    <span class="c1">#    #    self.__debug()</span>
    <span class="c1">#    #    keyEvent.accept()</span>
    <span class="c1">#    #</span>
    <span class="c1">#    #else:</span>
    <span class="c1">#    #    keyEvent.ignore()</span>
    <span class="c1">#    return</span>

<div class="viewcode-block" id="TaurusPlot.closeEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.closeEvent">[docs]</a>    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;See :meth:`Qwidget.closeEvent`&#39;&#39;&#39;</span>
        <span class="c1"># make sure no dialogs are left open</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.contextMenuEvent"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.contextMenuEvent">[docs]</a>    <span class="k">def</span> <span class="nf">contextMenuEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This function is called when there is context menu event. See</span>
<span class="sd">        :meth:`Qwidget.closeEvent` A pop up menu will be shown with the</span>
<span class="sd">        available options. Different parts of the plot (canvas, axes,...) behave</span>
<span class="sd">        differently&quot;&quot;&quot;</span>

        <span class="c1"># print &quot;!!!!!!!!&quot;,  self.canvas().underMouse(),</span>
        <span class="c1"># self.axisWidget(self.yLeft).underMouse(),</span>
        <span class="c1"># self.axisWidget(self.yRight).underMouse(),</span>
        <span class="c1"># self.axisWidget(self.xBottom).underMouse()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">()</span><span class="o">.</span><span class="n">underMouse</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_canvasContextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">globalPos</span><span class="p">())</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yLeft</span><span class="p">)</span><span class="o">.</span><span class="n">underMouse</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_axisContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yLeft</span><span class="p">)</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">globalPos</span><span class="p">())</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yRight</span><span class="p">)</span><span class="o">.</span><span class="n">underMouse</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_axisContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yRight</span><span class="p">)</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">globalPos</span><span class="p">())</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xBottom</span><span class="p">)</span><span class="o">.</span><span class="n">underMouse</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_axisContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xBottom</span><span class="p">)</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">globalPos</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># default catch-all #@TODO FOR SOME REASON, the underMouse() method</span>
            <span class="c1"># used above fails sometimes !!!???</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_canvasContextMenu</span><span class="p">()</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">globalPos</span><span class="p">())</span>
        <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_canvasContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a contextMenu for the canvas</span>

<span class="sd">        :return: (Qt.QMenu) the context menu for the canvas</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">menu</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_configDialogAction</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_inputDataAction</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_saveConfigAction</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_loadConfigAction</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setCurvesTitleAction</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>

        <span class="n">scalesSubMenu</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s2">&quot;&amp;Scales&quot;</span><span class="p">)</span>
        <span class="n">scalesSubMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_autoscaleAllAxisAction</span><span class="p">)</span>
        <span class="n">scalesSubMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisEnabled</span><span class="p">(</span><span class="n">axis</span><span class="p">):</span>
                <span class="n">scalesSubMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axisContextMenu</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">))</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_showMaxAction</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_showMinAction</span><span class="p">)</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_showLegendAction</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dataInspectorAction</span><span class="p">)</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>
        <span class="n">exportSubMenu</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s2">&quot;&amp;Export &amp;&amp; Print&quot;</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsAction</span><span class="p">)</span>
        <span class="n">exportSubMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_printAction</span><span class="p">)</span>
        <span class="n">exportSubMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_exportPdfAction</span><span class="p">)</span>
        <span class="n">exportSubMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_exportAsciiAction</span><span class="p">)</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pauseAction</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isWindow</span><span class="p">():</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_closeWindowAction</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">menu</span>

    <span class="k">def</span> <span class="nf">_axisContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns a context menu for the given axis</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>

<span class="sd">        :return: (Qt.QMenu) the context menu for the given axis</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">axisname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAxisName</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;Options for axis </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">axisname</span><span class="p">)</span>

        <span class="n">autoScaleThisAxis</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setAxisAutoScale</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="n">autoscaleAction</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;AutoScale </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">axisname</span><span class="p">)</span>
        <span class="n">autoscaleAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">autoScaleThisAxis</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXIsTime</span><span class="p">():</span>
            <span class="n">switchThisAxis</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScaleType</span><span class="p">(</span>
                <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="n">switchThisAxisAction</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span>
                <span class="s2">&quot;Toggle linear/log for </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">axisname</span><span class="p">)</span>
            <span class="n">switchThisAxisAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">switchThisAxis</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">):</span>
            <span class="n">zoomOnThisAxis</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">toggleZoomer</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
            <span class="n">zoomOnThisAxisAction</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span>
                <span class="s2">&quot;Zoom-to-region acts on </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">axisname</span><span class="p">)</span>
            <span class="n">zoomOnThisAxisAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">[()]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">zoomOnThisAxis</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xTop</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isXDynScaleSupported</span><span class="p">():</span>
                <span class="n">xDynAction</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;&amp;Auto-scroll </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">axisname</span><span class="p">)</span>
                <span class="n">xDynAction</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
                    <span class="s1">&#39;If enabled, the scale of </span><span class="si">%s</span><span class="s1"> will be autoadjusted to provide a fixed window moving to show always the last value&#39;</span><span class="p">)</span>
                <span class="n">xDynAction</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">xDynAction</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getXDynScale</span><span class="p">())</span>
                <span class="n">xDynAction</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">setXDynScale</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">menu</span>

<div class="viewcode-block" id="TaurusPlot.showConfigDialog"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.showConfigDialog">[docs]</a>    <span class="k">def</span> <span class="nf">showConfigDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Slot for the showConfigMenuAction. Launches the plot configuration</span>
<span class="sd">        dialog.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_configDialog</span> <span class="o">=</span> <span class="n">TaurusPlotConfigDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_configDialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># destroy the dialog (it may probably not be used anymore)</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configDialog</span></div>

<div class="viewcode-block" id="TaurusPlot.getCurveAppearancePropertiesDict"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getCurveAppearancePropertiesDict">[docs]</a>    <span class="k">def</span> <span class="nf">getCurveAppearancePropertiesDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the appearance properties of all curves in the plot.</span>

<span class="sd">        :return: (dict&lt;str,CurveAppearanceProperties&gt;) a dictionary whose keys</span>
<span class="sd">                 are the curve names and whose values are the corresponding</span>
<span class="sd">                 CurveAppearanceProperties object</span>

<span class="sd">        .. seealso:: :meth:`setCurveAppearanceProperties`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">propdict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">curve</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">propdict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">getAppearanceProperties</span><span class="p">())</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">propdict</span></div>

<div class="viewcode-block" id="TaurusPlot.setCurveAppearanceProperties"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setCurveAppearanceProperties">[docs]</a>    <span class="k">def</span> <span class="nf">setCurveAppearanceProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">propDict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;It gets a dictionary of namecurvenames,properties and applies the</span>
<span class="sd">        properties to the corresponding curves.</span>

<span class="sd">        :param propDict: (dict&lt;str,CurveAppearanceProperties&gt;) a dictionary whose keys</span>
<span class="sd">                         are the curve names and whose values are the corresponding</span>
<span class="sd">                         CurveAppearanceProperties object</span>

<span class="sd">        .. seealso:: :meth:`getCurveAppearancePropertiesDict`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">propDict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
                <span class="n">c</span><span class="o">.</span><span class="n">setAppearanceProperties</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
                <span class="n">visible</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="s1">&#39;visible&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">visible</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">showCurve</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoShowYAxes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.onCurveAppearanceChanged"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.onCurveAppearanceChanged">[docs]</a>    <span class="k">def</span> <span class="nf">onCurveAppearanceChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Applies the properties given in prop to all the curves named in names.</span>
<span class="sd">        This functions is called from the config dialog when changes are applied.</span>

<span class="sd">        :param prop: (CurveAppearanceProperties) the properties object</span>
<span class="sd">        :param names: (sequence&lt;str&gt;) a sequence of names of curves to which the</span>
<span class="sd">                      properties should be applied</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">propDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="n">propDict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">prop</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCurveAppearanceProperties</span><span class="p">(</span><span class="n">propDict</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_createAxesDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns a dictionary containing relevant information about the current axes</span>

<span class="sd">        :return: (dict) Configurations that can be loaded with applyAxesConfig</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAxisScale</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">)</span>
        <span class="n">y1Min</span><span class="p">,</span> <span class="n">y1Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAxisScale</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">)</span>
        <span class="n">y2Min</span><span class="p">,</span> <span class="n">y2Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAxisScale</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">)</span>
        <span class="n">axesdict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;xMin&#39;</span><span class="p">:</span> <span class="n">xMin</span><span class="p">,</span> <span class="s1">&#39;xMax&#39;</span><span class="p">:</span> <span class="n">xMax</span><span class="p">,</span> <span class="s1">&#39;y1Min&#39;</span><span class="p">:</span> <span class="n">y1Min</span><span class="p">,</span> <span class="s1">&#39;y1Max&#39;</span><span class="p">:</span> <span class="n">y1Max</span><span class="p">,</span> <span class="s1">&#39;y2Min&#39;</span><span class="p">:</span> <span class="n">y2Min</span><span class="p">,</span> <span class="s1">&#39;y2Max&#39;</span><span class="p">:</span> <span class="n">y2Max</span><span class="p">,</span>
                    <span class="s1">&#39;xMode&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getAxisTransformationType</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">)),</span>
                    <span class="s1">&#39;y1Mode&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getAxisTransformationType</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">)),</span>
                    <span class="s1">&#39;y2Mode&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getAxisTransformationType</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">)),</span>
                    <span class="s1">&#39;xDyn&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXDynScale</span><span class="p">(),</span>
                    <span class="s1">&#39;xIsTime&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXIsTime</span><span class="p">()</span>
                    <span class="p">}</span>
        <span class="k">return</span> <span class="n">axesdict</span>

    <span class="k">def</span> <span class="nf">_createMiscDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns a dictionary containing misc information about the plot</span>

<span class="sd">        :return: (dict) configurations that can be loaded with applyMiscConfig</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">miscdict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;defaultCurvesTitle&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDefaultCurvesTitle</span><span class="p">(),</span>
                    <span class="s1">&#39;canvasBackground&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvasBackground</span><span class="p">(),</span>
                    <span class="s1">&#39;orderedCurveNames&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurveNamesSorted</span><span class="p">(),</span>
                    <span class="s1">&#39;plotTitle&#39;</span><span class="p">:</span> <span class="n">unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isWindow</span><span class="p">():</span>
            <span class="n">miscdict</span><span class="p">[</span><span class="s2">&quot;Geometry&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">saveGeometry</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">miscdict</span>

<div class="viewcode-block" id="TaurusPlot.checkConfigVersion"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.checkConfigVersion">[docs]</a>    <span class="k">def</span> <span class="nf">checkConfigVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configdict</span><span class="p">,</span> <span class="n">showDialog</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">supportedVersions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Check if the version of configdict is supported.</span>

<span class="sd">        :param configdict: (dict) configuration dictionary to check</span>
<span class="sd">        :param showDialog: (bool) whether to show a QtWarning dialog if check</span>
<span class="sd">                           failed (false by default)</span>
<span class="sd">        :param supportedVersions: (sequence&lt;str&gt;, or None) supported version</span>
<span class="sd">                                  numbers, if None given, the versions supported</span>
<span class="sd">                                  by this widget will be used (i.e., those</span>
<span class="sd">                                  defined in self._supportedConfigVersions)</span>

<span class="sd">        :return: (bool) returns True if the configdict is of the right version</span>

<span class="sd">        .. seealso:: :meth:`TaurusBaseComponent.checkConfigVersion`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">supportedVersions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">supportedVersions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedConfigVersions</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">configdict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ConfigVersion&quot;</span><span class="p">,</span> <span class="s2">&quot;__UNVERSIONED__&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">version</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">supportedVersions</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Unsupported Config Version </span><span class="si">%s</span><span class="s1">. (Supported: </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">version</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">supportedVersions</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">showDialog</span><span class="p">:</span>
                <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Wrong Configuration Version&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="TaurusPlot.createConfigDict"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.createConfigDict">[docs]</a>    <span class="k">def</span> <span class="nf">createConfigDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allowUnpickable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">curvenames</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Deprecation warning: createConfigDict is deprecated. Please use createConfig instead&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">createConfig</span><span class="p">(</span><span class="n">allowUnpickable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">curvenames</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.createConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.createConfig">[docs]</a>    <span class="k">def</span> <span class="nf">createConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allowUnpickable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">curvenames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns a pickable dictionary containing all relevant information</span>
<span class="sd">        about the current plot. Implemented as in :meth:`TaurusBaseComponent.createConfig`</span>
<span class="sd">        For Tango attributes it stores the attribute name and the curve properties</span>
<span class="sd">        For raw data curves, it stores the data as well.</span>

<span class="sd">        Hint: The following code allows you to serialize the configuration</span>
<span class="sd">        dictionary as a string (which you can store as a QSetting, or as a Tango</span>
<span class="sd">        Attribute)::</span>

<span class="sd">            import pickle</span>
<span class="sd">            c = pickle.dumps(taurusplot.createConfig())  #c is a string that can be stored</span>


<span class="sd">        :param curvenames:  (sequence&lt;str&gt;) a sequence of curve names for which the</span>
<span class="sd">                            configuration will be stored (all by default).</span>

<span class="sd">        :return: (dict) configurations (which can be loaded with applyConfig)</span>


<span class="sd">        .. seealso:: :meth:`createConfig`, :meth:`TaurusBaseComponent.createConfig`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">axesdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_createAxesDict</span><span class="p">()</span>
        <span class="n">rawdatadict</span> <span class="o">=</span> <span class="n">CaselessDict</span><span class="p">()</span>
        <span class="n">tangodict</span> <span class="o">=</span> <span class="n">CaselessDict</span><span class="p">()</span>
        <span class="n">propdict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">miscdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_createMiscDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">curvenames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">curvenames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="n">curvenames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lowerIfInsensitive</span><span class="p">(</span><span class="n">curvenames</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">curvenames</span><span class="p">:</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="n">propdict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">getAppearanceProperties</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">curve</span><span class="o">.</span><span class="n">isRawData</span><span class="p">:</span>
                    <span class="n">rawdatadict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">getRawData</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tangodict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">getModel</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s1">&#39;Exception while gathering curves configuration info&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="n">curvenames</span> <span class="o">=</span> <span class="n">CaselessList</span><span class="p">(</span><span class="n">curvenames</span><span class="p">)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">CaselessList</span><span class="p">([</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getModel</span><span class="p">()</span> <span class="k">if</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">curvenames</span><span class="p">])</span>
        <span class="n">configdict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Axes&quot;</span><span class="p">:</span> <span class="n">axesdict</span><span class="p">,</span> <span class="s2">&quot;Misc&quot;</span><span class="p">:</span> <span class="n">miscdict</span><span class="p">,</span> <span class="s2">&quot;RawData&quot;</span><span class="p">:</span> <span class="n">rawdatadict</span><span class="p">,</span>
                      <span class="s2">&quot;TangoCurves&quot;</span><span class="p">:</span> <span class="n">tangodict</span><span class="p">,</span> <span class="s2">&quot;CurveProp&quot;</span><span class="p">:</span> <span class="n">propdict</span><span class="p">,</span>
                      <span class="s2">&quot;ConfigVersion&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedConfigVersions</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                      <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">configdict</span></div>

<div class="viewcode-block" id="TaurusPlot.applyConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.applyConfig">[docs]</a>    <span class="k">def</span> <span class="nf">applyConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configdict</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;implemented as in :meth:`TaurusBaseComponent.applyConfig`</span>

<span class="sd">        :param configdict: (dict&lt;str,object&gt;)</span>

<span class="sd">        .. seealso:: :meth:`createConfig`, :meth:`TaurusBaseComponent.applyConfig`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkConfigVersion</span><span class="p">(</span><span class="n">configdict</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="c1"># attach the curves</span>
        <span class="k">for</span> <span class="n">rd</span> <span class="ow">in</span> <span class="n">configdict</span><span class="p">[</span><span class="s2">&quot;RawData&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">attachRawData</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
        <span class="c1"># for backwards compatibility, if the ordered list of models is not</span>
        <span class="c1"># stored, it uses the unsorted dict values</span>
        <span class="n">models</span> <span class="o">=</span> <span class="n">configdict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">configdict</span><span class="p">[</span><span class="s2">&quot;TangoCurves&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addModels</span><span class="p">(</span><span class="n">models</span><span class="p">)</span>
        <span class="c1"># set curve properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCurveAppearanceProperties</span><span class="p">(</span><span class="n">configdict</span><span class="p">[</span><span class="s2">&quot;CurveProp&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateLegend</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># set the axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">applyAxesConfig</span><span class="p">(</span><span class="n">configdict</span><span class="p">[</span><span class="s2">&quot;Axes&quot;</span><span class="p">])</span>
        <span class="c1"># set other misc configurations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">applyMiscConfig</span><span class="p">(</span><span class="n">configdict</span><span class="p">[</span><span class="s2">&quot;Misc&quot;</span><span class="p">])</span></div>

<div class="viewcode-block" id="TaurusPlot.applyMiscConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.applyMiscConfig">[docs]</a>    <span class="k">def</span> <span class="nf">applyMiscConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">miscdict</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;sets the configurations according to settings stored in the misc dict,</span>
<span class="sd">        which can be generated with _createMiscDict()</span>

<span class="sd">        :param miscdict: (dict) Dictionary of properties</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDefaultCurvesTitle</span><span class="p">(</span><span class="n">miscdict</span><span class="p">[</span><span class="s2">&quot;defaultCurvesTitle&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCanvasBackground</span><span class="p">(</span><span class="n">miscdict</span><span class="p">[</span><span class="s2">&quot;canvasBackground&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sortCurves</span><span class="p">(</span><span class="n">ordered</span><span class="o">=</span><span class="n">miscdict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;orderedCurveNames&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="k">if</span> <span class="s2">&quot;plotTitle&quot;</span> <span class="ow">in</span> <span class="n">miscdict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">miscdict</span><span class="p">[</span><span class="s1">&#39;plotTitle&#39;</span><span class="p">])</span>
        <span class="c1"># set geometry (if this is a top level window)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isWindow</span><span class="p">()</span> <span class="ow">and</span> <span class="s1">&#39;Geometry&#39;</span> <span class="ow">in</span> <span class="n">miscdict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">restoreGeometry</span><span class="p">(</span><span class="n">miscdict</span><span class="p">[</span><span class="s1">&#39;Geometry&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="TaurusPlot.applyAxesConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.applyAxesConfig">[docs]</a>    <span class="k">def</span> <span class="nf">applyAxesConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;sets the axes according to settings stored in the axes dict,</span>
<span class="sd">        which can be generated with _createAxesDict()</span>

<span class="sd">        :param axes: (dict) contains axes properties</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setXIsTime</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="s2">&quot;xIsTime&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setXDynScale</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="s2">&quot;xDyn&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScale</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span> <span class="n">axes</span><span class="p">[</span><span class="s2">&quot;xMin&quot;</span><span class="p">],</span> <span class="n">axes</span><span class="p">[</span><span class="s2">&quot;xMax&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScale</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span> <span class="n">axes</span><span class="p">[</span><span class="s2">&quot;y1Min&quot;</span><span class="p">],</span> <span class="n">axes</span><span class="p">[</span><span class="s2">&quot;y1Max&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScale</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">,</span> <span class="n">axes</span><span class="p">[</span><span class="s2">&quot;y2Min&quot;</span><span class="p">],</span> <span class="n">axes</span><span class="p">[</span><span class="s2">&quot;y2Max&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXIsTime</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScaleType</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span> <span class="n">axes</span><span class="p">[</span><span class="s2">&quot;xMode&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScaleType</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span> <span class="n">axes</span><span class="p">[</span><span class="s2">&quot;y1Mode&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScaleType</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">,</span> <span class="n">axes</span><span class="p">[</span><span class="s2">&quot;y2Mode&quot;</span><span class="p">])</span></div>

<div class="viewcode-block" id="TaurusPlot.saveConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.saveConfig">[docs]</a>    <span class="k">def</span> <span class="nf">saveConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ofile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">curvenames</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Stores the current curves and their display properties in a file for</span>
<span class="sd">        later retrieval.</span>

<span class="sd">        :param ofile: (file or string) file or filename to store the configuration. If None passed,</span>
<span class="sd">        :param curvenames:  (list&lt;str&gt;) a list of curve names for which the</span>
<span class="sd">                            configuration will be stored (all by default).</span>

<span class="sd">        :return: (str) file name used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">cPickle</span> <span class="k">as</span> <span class="nn">pickle</span>
        <span class="k">if</span> <span class="n">ofile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ofile</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Save Taurusplot Configuration&#39;</span><span class="p">,</span>
                                                       <span class="s1">&#39;TaurusplotConfig.pck&#39;</span><span class="p">,</span> <span class="s1">&#39;TaurusPlot Curve Properties File (*.pck)&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ofile</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ofile</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
            <span class="n">ofile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">ofile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">configdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createConfig</span><span class="p">(</span><span class="n">curvenames</span><span class="o">=</span><span class="n">curvenames</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Saving current settings in &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">ofile</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">configdict</span><span class="p">,</span> <span class="n">ofile</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ofile</span><span class="o">.</span><span class="n">name</span></div>

<div class="viewcode-block" id="TaurusPlot.loadConfig"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.loadConfig">[docs]</a>    <span class="k">def</span> <span class="nf">loadConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ifile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads a file stored by saveConfig() and applies the settings</span>

<span class="sd">        :param ifile: (file or string) file or filename from where to read the configuration</span>

<span class="sd">        :return: (str) file name used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">cPickle</span> <span class="k">as</span> <span class="nn">pickle</span>
        <span class="k">if</span> <span class="n">ifile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Load Taurusplot Configuration&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;TaurusPlot Curve Properties File (*.pck)&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ifile</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ifile</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">ifile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">configdict</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ifile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">applyConfig</span><span class="p">(</span><span class="n">configdict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ifile</span><span class="o">.</span><span class="n">name</span></div>

<div class="viewcode-block" id="TaurusPlot.setEventFilters"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setEventFilters">[docs]</a>    <span class="k">def</span> <span class="nf">setEventFilters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">curvenames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">preqt</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;propagates a list of taurus filters to the curves given by curvenames.</span>
<span class="sd">        See :meth:`TaurusBaseComponent.setEventFilters`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">curvenames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">curvenames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">curvenames</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">setEventFilters</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="n">preqt</span><span class="o">=</span><span class="n">preqt</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.setAxisAutoScale"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setAxisAutoScale">[docs]</a>    <span class="k">def</span> <span class="nf">setAxisAutoScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the axis to autoscale and resets the zoomer for that axis if needed</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>

<span class="sd">        .. seealso:: :meth:`autoScaleAllAxes`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">setAxisAutoScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getZoomers</span><span class="p">(</span><span class="n">axis</span><span class="p">):</span>
            <span class="n">z</span><span class="o">.</span><span class="n">setZoomBase</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.autoScaleAllAxes"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.autoScaleAllAxes">[docs]</a>    <span class="k">def</span> <span class="nf">autoScaleAllAxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Optimized autoscale of whole plot&#39;&#39;&#39;</span>
        <span class="n">minX</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
        <span class="n">maxX</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXDynScale</span><span class="p">():</span>
            <span class="n">originalXRange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXAxisRange</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">minXValue</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">minX</span><span class="p">:</span>
                        <span class="n">minX</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">minXValue</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">maxXValue</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">maxX</span><span class="p">:</span>
                        <span class="n">maxX</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">maxXValue</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">minX</span> <span class="o">!=</span> <span class="n">maxX</span><span class="p">:</span>
                        <span class="k">break</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">axisCnt</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span> <span class="ow">and</span> <span class="n">minX</span> <span class="o">==</span> <span class="n">maxX</span><span class="p">:</span>
                <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">setAxisScale</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">minX</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">originalXRange</span><span class="p">,</span> <span class="n">minX</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">originalXRange</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">setAxisAutoScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>
        <span class="c1"># Update the zoom stacks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span><span class="o">.</span><span class="n">setZoomBase</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="o">.</span><span class="n">setZoomBase</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.setAxisScale"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setAxisScale">[docs]</a>    <span class="k">def</span> <span class="nf">setAxisScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rescales the given axis to the range defined by min and max. If min</span>
<span class="sd">        and max are None, autoscales. It also takes care of resetting the</span>
<span class="sd">        affected zoomer(s)</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>
<span class="sd">        :param min: (float or None) minimum value for the axis</span>
<span class="sd">        :param max: (float or None) maximum value for the axis</span>

<span class="sd">        **Example**::</span>

<span class="sd">            tt=TaurusTrend()</span>
<span class="sd">            tt.setAxisScale(tt.yLeft, 0, 10) #this will set the Y1 axis range from 0 to 10</span>
<span class="sd">            tt.setAxisScale(tt.xBottom, None, None) #This will autoscale the X axis</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">min</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">max</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setAxisAutoScale</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">setAxisScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getZoomers</span><span class="p">(</span><span class="n">axis</span><span class="p">):</span>
            <span class="n">z</span><span class="o">.</span><span class="n">setZoomBase</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getAxisScale"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getAxisScale">[docs]</a>    <span class="k">def</span> <span class="nf">getAxisScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the lower and higher bounds for the given axis, or None,None</span>
<span class="sd">        if the axis is in autoscale mode</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>

<span class="sd">        :return: (float,float) atuple of floats (or None,None)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisAutoScale</span><span class="p">(</span><span class="n">axis</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisScaleDiv</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">lowerBound</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisScaleDiv</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">upperBound</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getXAxisRange"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getXAxisRange">[docs]</a>    <span class="k">def</span> <span class="nf">getXAxisRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;same as self.axisScaleDiv(axis).range()</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the (X) axis. (default=Qwt5.QwtPlot.xBottom)</span>

<span class="sd">        :return: (float) the absolute difference between the higher and lower limits of the axis scale</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisScaleDiv</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">range</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.setAxisScaleType"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setAxisScaleType">[docs]</a>    <span class="k">def</span> <span class="nf">setAxisScaleType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;sets the type of scale, (log or linear) for a given axis, If scale is None, the scale</span>
<span class="sd">        type will be toggled</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>
<span class="sd">        :param scale: (Qwt5.QwtScaleTransformation.Type) the scale</span>
<span class="sd">                      transformation. For convenience, the strings &quot;Linear&quot;</span>
<span class="sd">                      and &quot;Logarithmic&quot; can be used as well&#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXIsTime</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axisScaleEngine</span><span class="p">(</span><span class="n">axis</span><span class="p">),</span> <span class="n">DateTimeScaleEngine</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;TaurusPlot.setAxisScaleType cannot be called with time scales&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">axisValid</span><span class="p">(</span><span class="n">axis</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;TaurusPlot.setScale() invalid axis: &quot;</span> <span class="o">+</span> <span class="n">axis</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">currentType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAxisTransformationType</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">currentType</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Linear</span><span class="p">:</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Log10</span>
            <span class="k">elif</span> <span class="n">currentType</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Log10</span><span class="p">:</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Linear</span>

        <span class="k">if</span> <span class="n">scale</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;Linear&quot;</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Linear</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Linear</span><span class="p">)):</span>
            <span class="n">newScale</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtLinearScaleEngine</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">scale</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;Logarithmic&quot;</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Log10</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtScaleTransformation</span><span class="o">.</span><span class="n">Log10</span><span class="p">)):</span>
            <span class="n">newScale</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtLog10ScaleEngine</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;TaurusPlot.setAxisScaleType() invalid scale: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">scale</span><span class="p">))</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAxisScaleEngine</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">newScale</span><span class="p">)</span>
        <span class="c1"># update the data in the curves (because of the filtering done for</span>
        <span class="c1"># possitive values in log mode)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__updateCurvesData</span><span class="p">()</span>
        <span class="k">return</span></div>

<div class="viewcode-block" id="TaurusPlot.axisScaleDiv"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.axisScaleDiv">[docs]</a>    <span class="k">def</span> <span class="nf">axisScaleDiv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return the scale division of a specified axis.</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>

<span class="sd">        :return: (Qwt5.QwtScaleDiv) scale division</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">div</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">axisScaleDiv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="c1"># fix compatibility issue with Qwt &lt; 5.2 (contributed by A. Persson)</span>
        <span class="k">if</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QWT_VERSION</span> <span class="o">&lt;</span> <span class="mh">0x050200</span><span class="p">:</span>
            <span class="n">div</span><span class="o">.</span><span class="n">lowerBound</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">lBound</span>
            <span class="n">div</span><span class="o">.</span><span class="n">upperBound</span> <span class="o">=</span> <span class="n">div</span><span class="o">.</span><span class="n">hBound</span>
        <span class="k">return</span> <span class="n">div</span></div>

    <span class="k">def</span> <span class="nf">__updateCurvesData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;call safeSetData again on all curves to force a refiltering in case the scale changed its type&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">itervalues</span><span class="p">():</span>
                <span class="n">c</span><span class="o">.</span><span class="n">safeSetData</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>

<div class="viewcode-block" id="TaurusPlot.exportPdf"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.exportPdf">[docs]</a>    <span class="k">def</span> <span class="nf">exportPdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Export the plot to a PDF. slot for the _exportPdfAction.</span>

<span class="sd">        :param fileName: (str) The name of the file to which the plot will be</span>
<span class="sd">                         exported. If None given, the user will be prompted for</span>
<span class="sd">                         a file name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Export File Name&#39;</span><span class="p">,</span> <span class="s1">&#39;plot.pdf&#39;</span><span class="p">,</span> <span class="s1">&#39;PDF Documents (*.pdf)&#39;</span><span class="p">)</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fileName</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># check if the file is actually writable</span>
                <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Can&#39;t write to &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">fileName</span><span class="p">)</span>
                <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;File Error&quot;</span><span class="p">,</span>
                                       <span class="s2">&quot;Can&#39;t write to</span><span class="se">\n</span><span class="s2">&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">fileName</span><span class="p">,</span>
                                       <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">printer</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPrinter</span><span class="p">()</span>
            <span class="n">printer</span><span class="o">.</span><span class="n">setOutputFormat</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPrinter</span><span class="o">.</span><span class="n">PdfFormat</span><span class="p">)</span>
            <span class="n">printer</span><span class="o">.</span><span class="n">setOrientation</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPrinter</span><span class="o">.</span><span class="n">Landscape</span><span class="p">)</span>
            <span class="n">printer</span><span class="o">.</span><span class="n">setOutputFileName</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
            <span class="n">printer</span><span class="o">.</span><span class="n">setCreator</span><span class="p">(</span><span class="s1">&#39;TaurusPlot&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_</span><span class="p">(</span><span class="n">printer</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.exportPrint"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.exportPrint">[docs]</a>    <span class="k">def</span> <span class="nf">exportPrint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Launches a QPrintDialog for printing the plot&#39;&#39;&#39;</span>
        <span class="n">printer</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPrinter</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPrinter</span><span class="o">.</span><span class="n">HighResolution</span><span class="p">)</span>
        <span class="n">printer</span><span class="o">.</span><span class="n">setOutputFileName</span><span class="p">(</span><span class="s1">&#39;taurusplot.ps&#39;</span><span class="p">)</span>
        <span class="n">printer</span><span class="o">.</span><span class="n">setCreator</span><span class="p">(</span><span class="s1">&#39;TaurusPlot&#39;</span><span class="p">)</span>
        <span class="n">printer</span><span class="o">.</span><span class="n">setOrientation</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPrinter</span><span class="o">.</span><span class="n">Landscape</span><span class="p">)</span>
        <span class="n">printer</span><span class="o">.</span><span class="n">setColorMode</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPrinter</span><span class="o">.</span><span class="n">Color</span><span class="p">)</span>
        <span class="n">docName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">docName</span><span class="p">:</span>
            <span class="n">docName</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; -- &#39;</span><span class="p">)</span>
            <span class="n">printer</span><span class="o">.</span><span class="n">setDocName</span><span class="p">(</span><span class="n">docName</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPrintDialog</span><span class="p">(</span><span class="n">printer</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">():</span>
            <span class="nb">filter</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotPrintFilter</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPrinter</span><span class="o">.</span><span class="n">GrayScale</span> <span class="o">==</span> <span class="n">printer</span><span class="o">.</span><span class="n">colorMode</span><span class="p">()):</span>
                <span class="nb">filter</span><span class="o">.</span><span class="n">setOptions</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotPrintFilter</span><span class="o">.</span><span class="n">PrintAll</span>
                                  <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotPrintFilter</span><span class="o">.</span><span class="n">PrintBackground</span>
                                  <span class="o">|</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotPrintFilter</span><span class="o">.</span><span class="n">PrintFrameWithScales</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_</span><span class="p">(</span><span class="n">printer</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.exportAscii"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.exportAscii">[docs]</a>    <span class="k">def</span> <span class="nf">exportAscii</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curves</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Opens a dialog for exporting curves to ASCII files.</span>

<span class="sd">        :param curves:  (sequence&lt;str&gt;) the curves curves that will be</span>
<span class="sd">                        exportable. if None given, all curves are offered for</span>
<span class="sd">                        export.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">curves</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">curves</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurveNamesSorted</span><span class="p">()</span>
            <span class="n">frozendata</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">curves</span><span class="p">:</span>
                <span class="n">frozendata</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurveData</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="n">klass</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;exportDlgClass&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">klass</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">taurus.qt.qtgui.panel</span> <span class="k">import</span> <span class="n">QDataExportDialog</span>
            <span class="n">klass</span> <span class="o">=</span> <span class="n">QDataExportDialog</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">klass</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">datadict</span><span class="o">=</span><span class="n">frozendata</span><span class="p">,</span>
                       <span class="n">sortedNames</span><span class="o">=</span><span class="n">curves</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">setXIsTime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getXIsTime</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.importAscii"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.importAscii">[docs]</a>    <span class="k">def</span> <span class="nf">importAscii</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filenames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xcol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;imports curves from ASCII files. It uses :meth:numpy.loadtxt</span>
<span class="sd">        The data in the file(s) must be formatted in columns, with possibly a</span>
<span class="sd">        header and/or commented lines. Each column in a file will be imported as</span>
<span class="sd">        an independent RawData curve (except for the column whose index is</span>
<span class="sd">        passed in xcol)</span>

<span class="sd">        :param filenames: (sequence&lt;str&gt; or None) the names of the files to be read. If</span>
<span class="sd">                          None passed, the user will be allowed to select them</span>
<span class="sd">                          from a dialog. (default=None)</span>

<span class="sd">        :param xcol: (int or None) index of the column (starting at 0)</span>
<span class="sd">                     containing the abscissas data. If None passed, the abcissa</span>
<span class="sd">                     is generated as indexes starting from 0.</span>

<span class="sd">        :param `**kwargs`: Other keyword arguments can be passed to this method,</span>
<span class="sd">                           which will be passed to :meth:`numpy.loadtxt` when</span>
<span class="sd">                           reading each file. Accepted keywords are:</span>

<span class="sd">                         - dtype=&lt;type &#39;float&#39;&gt;</span>
<span class="sd">                         - comments=&#39;#&#39;</span>
<span class="sd">                         - delimiter=None</span>
<span class="sd">                         - converters=None</span>
<span class="sd">                         - skiprows=0</span>
<span class="sd">                         - usecols=None</span>
<span class="sd">                         - unpack=False</span>

<span class="sd">        .. seealso:: :meth:`numpy.loadtxt`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">filenames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">filenames</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileNames</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Choose input files&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Ascii file (*)&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">rawdata</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
            <span class="n">fname</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xIsTime</span> <span class="ow">and</span> <span class="n">xcol</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">converters</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;converters&#39;</span><span class="p">,</span> <span class="p">{})</span>
                <span class="n">converters</span><span class="p">[</span><span class="n">xcol</span><span class="p">]</span> <span class="o">=</span> <span class="n">isodatestr2float</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;converters&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">converters</span>
            <span class="n">M</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># make sure we are dealing with a 2D matrix even if it is just</span>
                <span class="c1"># a colum</span>
                <span class="n">M</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">xcol</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">rawdata</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rawdata</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">M</span><span class="p">[:,</span> <span class="n">xcol</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="k">if</span> <span class="n">col</span> <span class="o">==</span> <span class="n">xcol</span><span class="p">:</span>
                    <span class="k">continue</span>  <span class="c1"># ignore the xcol (it has already been set)</span>
                <span class="n">rawdata</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">M</span><span class="p">[:,</span> <span class="n">col</span><span class="p">]</span>
                <span class="n">rawdata</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">[</span><span class="si">%i</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">fname</span><span class="p">),</span> <span class="n">col</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">attachRawData</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">rawdata</span><span class="p">))</span></div>

<div class="viewcode-block" id="TaurusPlot.showDataImportDlg"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.showDataImportDlg">[docs]</a>    <span class="k">def</span> <span class="nf">showDataImportDlg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Launches the data import dialog. This dialog lets the user manage</span>
<span class="sd">        which attributes are attached to the plot (using</span>
<span class="sd">        :class:`TaurusModelChooser`) and also to generate raw data or import it</span>
<span class="sd">        from files</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">taurus.qt.qtgui.panel</span> <span class="k">import</span> <span class="n">TaurusModelChooser</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - Import Data&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">windowTitle</span><span class="p">())))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">modelChooser</span> <span class="o">=</span> <span class="n">TaurusModelChooser</span><span class="p">(</span>
                <span class="n">selectables</span><span class="o">=</span><span class="p">[</span><span class="n">taurus</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">taurusbasetypes</span><span class="o">.</span><span class="n">TaurusElementType</span><span class="o">.</span><span class="n">Attribute</span><span class="p">])</span>
            <span class="kn">from</span> <span class="nn">taurus.qt.qtgui.panel</span> <span class="k">import</span> <span class="n">QRawDataWidget</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">rawDataChooser</span> <span class="o">=</span> <span class="n">QRawDataWidget</span><span class="p">()</span>

            <span class="n">tabs</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QTabWidget</span><span class="p">()</span>
            <span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">modelChooser</span><span class="p">,</span> <span class="s2">&quot;&amp;Attributes&quot;</span><span class="p">)</span>
            <span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">rawDataChooser</span><span class="p">,</span> <span class="s2">&quot;&amp;Raw Data&quot;</span><span class="p">)</span>
            <span class="n">mainlayout</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="p">)</span>
            <span class="n">mainlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">tabs</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">modelChooser</span><span class="o">.</span><span class="n">updateModels</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">rawDataChooser</span><span class="o">.</span><span class="n">ReadFromFiles</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">readFromFiles</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">rawDataChooser</span><span class="o">.</span><span class="n">AddCurve</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attachRawData</span><span class="p">)</span>

        <span class="n">models_and_display</span> <span class="o">=</span> <span class="p">[(</span><span class="n">m</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurveTitle</span><span class="p">(</span>
            <span class="n">m</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">modelChooser</span><span class="o">.</span><span class="n">setListedModels</span><span class="p">(</span><span class="n">models_and_display</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.readFromFiles"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.readFromFiles">[docs]</a>    <span class="k">def</span> <span class="nf">readFromFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xcol</span><span class="p">,</span> <span class="n">skiprows</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;helper slot. Calls self.importAscii(xcol=xcol, skiprows=skiprows )</span>
<span class="sd">        See meth:`importAscii`&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">importAscii</span><span class="p">(</span><span class="n">xcol</span><span class="o">=</span><span class="n">xcol</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="n">skiprows</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.isXDynScaleSupported"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.isXDynScaleSupported">[docs]</a>    <span class="k">def</span> <span class="nf">isXDynScaleSupported</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Whether this widget offers xDynScale-related options. Useful for</span>
<span class="sd">        showing-hiding them in menus and dialogs</span>

<span class="sd">        :return: (bool)</span>

<span class="sd">        .. seealso:: :meth:`setXDynScaleSupported`, :meth:`getXDynScale`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xDynScaleSupported</span></div>

<div class="viewcode-block" id="TaurusPlot.setXDynScaleSupported"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setXDynScaleSupported">[docs]</a>    <span class="k">def</span> <span class="nf">setXDynScaleSupported</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">supported</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Whether this widget should offer xDynScale-related options in menus</span>
<span class="sd">        and dialogs.</span>

<span class="sd">        :param supported: (bool) if True, the options related to xDynScale will</span>
<span class="sd">                          be shown</span>

<span class="sd">        .. seealso:: :meth:`isXDynScaleSupported`, :meth:`getXDynScale`&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xDynScaleSupported</span> <span class="o">=</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="TaurusPlot.setXDynScale"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setXDynScale">[docs]</a>    <span class="k">def</span> <span class="nf">setXDynScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;it enables/disables the Dynamic scaling feature (also known as</span>
<span class="sd">        Fixed-range X scale, or &quot;auto-scroll mode&quot;). The Dynamic scaling</span>
<span class="sd">        consists in ensuring that:</span>

<span class="sd">        - the range (=max-min) is always constant</span>
<span class="sd">        - the latest point plotted is always within range.</span>

<span class="sd">        :param enabled: (bool) if True, the Dynamic scaling is enabled for the</span>
<span class="sd">                        X axis. Otherwise it is disabled. (Default=True)</span>

<span class="sd">        .. seealso:: :meth:`getXDynScale`, :meth:`setXDynScaleSupported`&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xDynScale</span> <span class="o">=</span> <span class="n">enabled</span></div>

<div class="viewcode-block" id="TaurusPlot.getXDynScale"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getXDynScale">[docs]</a>    <span class="k">def</span> <span class="nf">getXDynScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Whether the current X scale is in Dynamic scaling mode</span>

<span class="sd">        :return: (bool)</span>

<span class="sd">        .. seealso:: :meth:`setXDynScale`, meth:`isXDynScaleSupported`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xDynScale</span></div>

<div class="viewcode-block" id="TaurusPlot.setCurvesYAxis"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setCurvesYAxis">[docs]</a>    <span class="k">def</span> <span class="nf">setCurvesYAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curvesNamesList</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change the Y axis of the given curves to the given axis.</span>

<span class="sd">        :param curvesNamesList: (list&lt;str&gt;) the names of the curves whose Y axis</span>
<span class="sd">                                is to be changed</span>
<span class="sd">        :param axis: (Qwt5.QwtPlot.Axis) the axis</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">axisValid</span><span class="p">(</span><span class="n">axis</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="s2">&quot;TaurusPlot::setCurvesYAxis. Invalid axis ID: &quot;</span> <span class="o">+</span> \
                <span class="nb">repr</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">curveName</span> <span class="ow">in</span> <span class="n">curvesNamesList</span><span class="p">:</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">curveName</span><span class="p">)</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">setYAxis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">_maxPeakMarker</span><span class="o">.</span><span class="n">setYAxis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">_minPeakMarker</span><span class="o">.</span><span class="n">setYAxis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showCurve</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

        <span class="c1"># disable the other axis if no curves are assigned to it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoShowYAxes</span><span class="p">()</span>
        <span class="c1"># change the axis of the picked marker if needed</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pickedCurveName</span> <span class="ow">in</span> <span class="n">curvesNamesList</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">setYAxis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">CurvesYAxisChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">curvesNamesList</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.autoShowYAxes"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.autoShowYAxes">[docs]</a>    <span class="k">def</span> <span class="nf">autoShowYAxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;shows/hides Y1 and Y2 depending of whether there are curves</span>
<span class="sd">        associated to them. Also takes care of changing the zoomer if needed&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># get a list of *unique* axes with visible curves attached</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="nb">set</span><span class="p">([</span><span class="n">curve</span><span class="o">.</span><span class="n">yAxis</span><span class="p">()</span> <span class="k">for</span> <span class="n">curve</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">itervalues</span><span class="p">()</span> <span class="k">if</span> <span class="n">curve</span><span class="o">.</span><span class="n">isVisible</span><span class="p">()]))</span>

            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">enableAxis</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">enableAxis</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">enableAxis</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="p">(</span><span class="n">axis</span> <span class="o">==</span> <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="c1"># enable the zoom of the axis that has contents</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">toggleZoomer</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">enableAxis</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">enableAxis</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yRight</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.pickDataPoint"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.pickDataPoint">[docs]</a>    <span class="k">def</span> <span class="nf">pickDataPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">showMarker</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">targetCurveNames</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Finds the pyxel-wise closest data point to the given position. The</span>
<span class="sd">        valid search space is constrained by the scope and targetCurveNames</span>
<span class="sd">        parameters.</span>

<span class="sd">        :param pos: (Qt.QPoint or Qt.QPolygon) the position around which to look</span>
<span class="sd">                    for a data point. The position should be passed as a</span>
<span class="sd">                    Qt.QPoint (if a Qt.QPolygon is given, the first point of the</span>
<span class="sd">                    polygon is used). The position is expected in pixel units,</span>
<span class="sd">                    with (0,0) being the top-left corner of the plot</span>
<span class="sd">                    canvas.</span>

<span class="sd">        :param scope: (int) defines the area around the given position to be</span>
<span class="sd">                      considered when searching for data points. A data point is</span>
<span class="sd">                      considered within scope if its manhattan distance to</span>
<span class="sd">                      position (in pixels) is less than the value of the scope</span>
<span class="sd">                      parameter. (default=20)</span>

<span class="sd">        :param showMarker: (bool) If True, a marker will be put on the picked</span>
<span class="sd">                           data point. (default=True)</span>

<span class="sd">        :param targetCurveNames: (sequence&lt;str&gt;) the names of the curves to be</span>
<span class="sd">                                 searched. If None passed, all curves will be</span>
<span class="sd">                                 searched</span>

<span class="sd">        :return: (tuple&lt;Qt.QPointF,str,int&gt; or tuple&lt;None,None,None&gt;) if a point</span>
<span class="sd">                 was picked within the scope, it returns a tuple containing the</span>
<span class="sd">                 picked point (as a Qt.QPointF), the curve name and the index of</span>
<span class="sd">                 the picked point in the curve data. If no point was found</span>
<span class="sd">                 within the scope, it returns None,None,None</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPolygon</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="n">scopeRect</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">scope</span><span class="p">,</span> <span class="n">scope</span><span class="p">)</span>
        <span class="n">scopeRect</span><span class="o">.</span><span class="n">moveCenter</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="n">mindist</span> <span class="o">=</span> <span class="n">scope</span>
        <span class="n">picked</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">pickedCurveName</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">pickedIndex</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">targetCurveNames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">targetCurveNames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">targetCurveNames</span><span class="p">:</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">curve</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Curve &#39;</span><span class="si">%s</span><span class="s2">&#39; not found&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">curve</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
                    <span class="k">continue</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">size</span><span class="p">()):</span>
                    <span class="n">point</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPoint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">xAxis</span><span class="p">(),</span> <span class="n">data</span><span class="o">.</span><span class="n">x</span><span class="p">(</span>
                        <span class="n">i</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">yAxis</span><span class="p">(),</span> <span class="n">data</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                    <span class="k">if</span> <span class="n">scopeRect</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">point</span><span class="p">):</span>
                        <span class="n">dist</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos</span> <span class="o">-</span> <span class="n">point</span><span class="p">)</span><span class="o">.</span><span class="n">manhattanLength</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">mindist</span><span class="p">:</span>
                            <span class="n">mindist</span> <span class="o">=</span> <span class="n">dist</span>
                            <span class="n">picked</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QPointF</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">data</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
                            <span class="n">pickedCurveName</span> <span class="o">=</span> <span class="n">name</span>
                            <span class="n">pickedIndex</span> <span class="o">=</span> <span class="n">i</span>
                            <span class="n">pickedAxes</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">xAxis</span><span class="p">(),</span> <span class="n">curve</span><span class="o">.</span><span class="n">yAxis</span><span class="p">()</span>
                            <span class="n">_displayValue</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="n">curve</span>
                                                    <span class="p">)</span><span class="o">.</span><span class="n">displayValue</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">showMarker</span> <span class="ow">and</span> <span class="n">picked</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">picked</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">setAxis</span><span class="p">(</span><span class="o">*</span><span class="n">pickedAxes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pickedCurveName</span> <span class="o">=</span> <span class="n">pickedCurveName</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">pickedIndex</span> <span class="o">=</span> <span class="n">pickedIndex</span>
            <span class="n">pickedCurveTitle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurveTitle</span><span class="p">(</span><span class="n">pickedCurveName</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>
            <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">label</span><span class="p">()</span>
            <span class="n">display_y</span> <span class="o">=</span> <span class="n">_displayValue</span><span class="p">(</span><span class="n">picked</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getXIsTime</span><span class="p">():</span>
                <span class="n">infotxt</span> <span class="o">=</span> <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;[</span><span class="si">%i</span><span class="s2">]:</span><span class="se">\n\t</span><span class="s2"> (t=</span><span class="si">%s</span><span class="s2">, y=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">pickedCurveTitle</span><span class="p">,</span> <span class="n">pickedIndex</span><span class="p">,</span>
                    <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">picked</span><span class="o">.</span><span class="n">x</span><span class="p">())</span><span class="o">.</span><span class="n">ctime</span><span class="p">(),</span> <span class="n">display_y</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">infotxt</span> <span class="o">=</span> <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;[</span><span class="si">%i</span><span class="s2">]:</span><span class="se">\n\t</span><span class="s2"> (x=</span><span class="si">%.5g</span><span class="s2">, y=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">pickedCurveTitle</span><span class="p">,</span> <span class="n">pickedIndex</span><span class="p">,</span> <span class="n">picked</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">display_y</span> <span class="p">)</span>
            <span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">infotxt</span><span class="p">)</span>
            <span class="n">fits</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">textSize</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">fits</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtText</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">alignLabel</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">popup</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Popup</span><span class="p">)</span>
                <span class="n">popup</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">())</span>
                <span class="c1"># @todo: make the widget background semitransparent green!</span>
                <span class="n">popup</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="n">infotxt</span><span class="p">))</span>
                <span class="n">popup</span><span class="o">.</span><span class="n">setWindowOpacity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">labelOpacity</span><span class="p">)</span>
                <span class="n">popup</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="n">popup</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">-</span>
                           <span class="n">popup</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
                <span class="n">popup</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
                <span class="n">Qt</span><span class="o">.</span><span class="n">QTimer</span><span class="o">.</span><span class="n">singleShot</span><span class="p">(</span><span class="mi">5000</span><span class="p">,</span> <span class="n">popup</span><span class="o">.</span><span class="n">hide</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">picked</span><span class="p">,</span> <span class="n">pickedCurveName</span><span class="p">,</span> <span class="n">pickedIndex</span></div>

<div class="viewcode-block" id="TaurusPlot.toggleDataInspectorMode"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.toggleDataInspectorMode">[docs]</a>    <span class="k">def</span> <span class="nf">toggleDataInspectorMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Enables/Disables the Inspector Mode. When &quot;Inspector Mode&quot; is</span>
<span class="sd">        enabled, the zoomer is disabled and clicking on the canvas triggers a</span>
<span class="sd">        search of a nearby data point using pickDataPoint (the cursor changes to</span>
<span class="sd">        indicate the mode).</span>

<span class="sd">        :param enable: (bool or None) If True, it enables the Inspector Mode. If</span>
<span class="sd">                       False, it disables it. If None passed, it toggles the</span>
<span class="sd">                       mode.</span>

<span class="sd">        :return: (bool) whether the inspector mode has been enabled (True) or</span>
<span class="sd">                 disabled (False)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">enable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">enable</span> <span class="o">=</span> <span class="ow">not</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_inspectorMode</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pointPicker</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>  <span class="c1"># enables/disables the picker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowZoomers</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span>
            <span class="n">enable</span><span class="p">))</span>  <span class="c1"># disables/enables the zoomers</span>

        <span class="k">if</span> <span class="n">enable</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WhatsThisCursor</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">CrossCursor</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pickedMarker</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>  <span class="c1"># clears previous marker</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">()</span><span class="o">.</span><span class="n">setCursor</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inspectorMode</span> <span class="o">=</span> <span class="n">enable</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inspectorMode</span></div>

<div class="viewcode-block" id="TaurusPlot.onCurveStatsAction"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.onCurveStatsAction">[docs]</a>    <span class="k">def</span> <span class="nf">onCurveStatsAction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        slot for the curveStatsAction. Allows the user to select a range and</span>
<span class="sd">        then shows curve statistics on that range.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_curveStatsDialog&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">taurus.qt.qtgui.plot</span> <span class="k">import</span> <span class="n">CurveStatsDialog</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsDialog</span> <span class="o">=</span> <span class="n">CurveStatsDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsDialog</span><span class="o">.</span><span class="n">closed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_onCurveStatsDialogClosed</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsDialog</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_onCurveStatsDialogClosed</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsDialog</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsDialog</span><span class="o">.</span><span class="n">refreshCurves</span><span class="p">()</span>
        <span class="c1"># it will be reenabed by _onCurveStatsDialogClosed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsAction</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsDialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_onCurveStatsDialogClosed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;slot called when the Curve Stats dialog is closed&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_curveStatsAction</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="TaurusPlot.selectXRegion"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.selectXRegion">[docs]</a>    <span class="k">def</span> <span class="nf">selectXRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Changes the input mode to allow the user to select a region of the X axis</span>

<span class="sd">        :param axis: (Qwt5.QwtPlot.xBottom or Qwt5.QwtPlot.xTop) on which the</span>
<span class="sd">                     region will be defined (Default=Qwt5.QwtPlot.xBottom)</span>
<span class="sd">        :param callback: (method) a function that will be called when the user</span>
<span class="sd">                        finishes selecting the region. If None passed (default)</span>
<span class="sd">                        nothing is done</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionCallback</span> <span class="o">=</span> <span class="n">callback</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xRegionPicker</span><span class="o">.</span><span class="n">setAxis</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">yLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_beginXRegionMode</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_onXRegionEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;slot called when the _xRegionPicker picks a point&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEnd</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Ignoring xRegionEvent. Reason: not-reset region&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStart</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStart</span> <span class="o">=</span> <span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStartMarker</span><span class="o">.</span><span class="n">setXValue</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStartMarker</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEnd</span> <span class="o">=</span> <span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEndMarker</span><span class="o">.</span><span class="n">setXValue</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEndMarker</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStart</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEnd</span>
            <span class="k">if</span> <span class="n">xmin</span> <span class="o">&gt;</span> <span class="n">xmax</span><span class="p">:</span>
                <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">xmin</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionCallback</span><span class="p">((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_endXRegionMode</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_beginXRegionMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;pre-region selection tasks&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStart</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEnd</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStartMarker</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotMarker</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStartMarker</span><span class="o">.</span><span class="n">setLineStyle</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotMarker</span><span class="o">.</span><span class="n">VLine</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStartMarker</span><span class="o">.</span><span class="n">setLinePen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEndMarker</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotMarker</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEndMarker</span><span class="o">.</span><span class="n">setLineStyle</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlotMarker</span><span class="o">.</span><span class="n">VLine</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEndMarker</span><span class="o">.</span><span class="n">setLinePen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># disables the zoomers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">()</span><span class="o">.</span><span class="n">setCursor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">SplitHCursor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xRegionPicker</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_endXRegionMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;post-region selection tasks&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xRegionPicker</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">()</span><span class="o">.</span><span class="n">setCursor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">CrossCursor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowZoomers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionStartMarker</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xRegionEndMarker</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>

<div class="viewcode-block" id="TaurusPlot.getCurveStats"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getCurveStats">[docs]</a>    <span class="k">def</span> <span class="nf">getCurveStats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">curveNames</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Shows a dialog containing descriptive statistics on curves</span>

<span class="sd">        :param limits: (None or tuple&lt;float,float&gt;) tuple containing (min,max) limits.</span>
<span class="sd">                       Points of the curve whose abscisa value is outside of</span>
<span class="sd">                       these limits are ignored. If None is passed, the limit is not enforced</span>
<span class="sd">        :param curveNames: (seq&lt;str&gt;) sequence of curve names for which</span>
<span class="sd">                           statistics are requested. If None passed (default), all curves are</span>
<span class="sd">                           considered</span>

<span class="sd">        :return: (dict) Returns a dictionary whose keys are the curve names and</span>
<span class="sd">                        whose values are the dictionaries returned by</span>
<span class="sd">                        :meth:`TaurusCurve.getStats`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">limits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">limits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">limits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">limits</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">curveNames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">curveNames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurveNamesSorted</span><span class="p">()</span>

        <span class="n">stats</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">curveNames</span><span class="p">:</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">stats</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">getStats</span><span class="p">(</span><span class="n">limits</span><span class="o">=</span><span class="n">limits</span><span class="p">)</span>
                <span class="n">stats</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unicode</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">stats</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
    <span class="c1"># QT property definition</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~</span>
    <span class="c1"># grid properties</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~</span>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="s1">&#39;QColor&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.setGridColor"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setGridColor">[docs]</a>    <span class="k">def</span> <span class="nf">setGridColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Changes the color of the plot grid and refreshes the plot</span>

<span class="sd">        :param color:(Qt.QColor) the new color for the grid</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gridPen</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grid</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gridPen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getGridColor"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getGridColor">[docs]</a>    <span class="k">def</span> <span class="nf">getGridColor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the color of the plot grid</span>

<span class="sd">        :return: (Qt.QColor)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gridPen</span><span class="o">.</span><span class="n">color</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.resetGridColor"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetGridColor">[docs]</a>    <span class="k">def</span> <span class="nf">resetGridColor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;equivalent to self.setGridColor(Qt.Qt.gray)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setGridColor</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">gray</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.setGridWidth"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setGridWidth">[docs]</a>    <span class="k">def</span> <span class="nf">setGridWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Changes the width of the plot grid lines and refreshes the plot</span>

<span class="sd">        :param width: (int) with in pixels for the grid lines</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gridPen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_grid</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gridPen</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getGridWidth"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getGridWidth">[docs]</a>    <span class="k">def</span> <span class="nf">getGridWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns the width of the grid lines</span>

<span class="sd">        :return: (int) with of the gridlines (in pixels)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gridPen</span><span class="o">.</span><span class="n">width</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.resetGridWidth"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetGridWidth">[docs]</a>    <span class="k">def</span> <span class="nf">resetGridWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;equivalent to self.setGridWidth(1)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setGridWidth</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~</span>
    <span class="c1"># model properties</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~</span>
    <span class="k">def</span> <span class="nf">_splitModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modelNames</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;convert str to list if needed (commas and whitespace are considered as separators)&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">modelNames</span><span class="p">,</span> <span class="p">(</span><span class="n">basestring</span><span class="p">,</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QString</span><span class="p">)):</span>
            <span class="n">modelNames</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">modelNames</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="n">modelNames</span> <span class="o">=</span> <span class="n">modelNames</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">modelNames</span>

    <span class="k">def</span> <span class="nf">_lowerIfInsensitive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modelNames</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;filter a model name list converting to lowercase the names belonging</span>
<span class="sd">         to case-insensitive schemes&quot;&quot;&quot;</span>
        <span class="n">models</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">modelNames</span><span class="p">:</span>
            <span class="n">scheme</span> <span class="o">=</span> <span class="n">getSchemeFromName</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="c1"># scan is not a scheme, but a &quot;legacy&quot; way in which Sardana plots</span>
            <span class="c1"># the scan data comming from the door; as Tango scheme it is</span>
            <span class="c1"># case insensitive</span>
            <span class="k">if</span> <span class="n">scheme</span> <span class="o">==</span> <span class="s2">&quot;scan&quot;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">taurus</span><span class="o">.</span><span class="n">Factory</span><span class="p">(</span><span class="n">scheme</span><span class="p">)</span><span class="o">.</span><span class="n">caseSensitive</span><span class="p">:</span>
                <span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">models</span>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="s1">&#39;QStringList&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.setModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setModel">[docs]</a>    <span class="k">def</span> <span class="nf">setModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modelNames</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;sets the models of the Tango attributes that should be displayed in</span>
<span class="sd">        this TaurusPlot.</span>

<span class="sd">        :param modelNames: (sequence&lt;str&gt; or str) the names of the models to be</span>
<span class="sd">                           plotted. For convenience, strings are also accepted</span>
<span class="sd">                           (instead of a sequence of strings), in which case the</span>
<span class="sd">                           string will be internally converted to a sequence by</span>
<span class="sd">                           splitting it on whitespace.</span>

<span class="sd">        .. seealso:: :meth:`addModels`, :meth:`removeModels`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">modelNames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">modelNames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">modelNames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_splitModel</span><span class="p">(</span><span class="n">modelNames</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lowerIfInsensitive</span><span class="p">(</span><span class="n">modelNames</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateCurves</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modelChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="c1"># update the modelchooser list</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DataImportDlg</span><span class="o">.</span><span class="n">modelChooser</span><span class="o">.</span><span class="n">setListedModels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.getModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getModel">[docs]</a>    <span class="k">def</span> <span class="nf">getModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the list of model names.</span>

<span class="sd">        :return: (CaselessList&lt;str&gt;)</span>

<span class="sd">        .. seealso:: :meth:`setModel`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span></div>

<div class="viewcode-block" id="TaurusPlot.resetModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetModel">[docs]</a>    <span class="k">def</span> <span class="nf">resetModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;equivalent to setModel([])&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">([])</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="s1">&#39;QStringList&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.addModels"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.addModels">[docs]</a>    <span class="k">def</span> <span class="nf">addModels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modelNames</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Adds models to the existing ones:</span>

<span class="sd">        :param modelNames:  (sequence&lt;str&gt;) the names of the models to be added</span>
<span class="sd">                           to the plot.</span>

<span class="sd">        .. seealso:: :meth:`setModels`, :meth:`removeModels`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">modelNames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lowerIfInsensitive</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_splitModel</span><span class="p">(</span><span class="n">modelNames</span><span class="p">))</span>
        <span class="n">modelNames</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">modelNames</span> <span class="k">if</span> <span class="n">m</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span> <span class="o">+</span> <span class="n">modelNames</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="s1">&#39;QStringList&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.removeModels"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.removeModels">[docs]</a>    <span class="k">def</span> <span class="nf">removeModels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modelNames</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Removes models from those already in the plot.</span>

<span class="sd">        :param modelNames:  (sequence&lt;str&gt;) the names of the models to be added</span>
<span class="sd">                           to the plot.</span>

<span class="sd">        .. seealso:: :meth:`setModels`, :meth:`addModels`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">modelNames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lowerIfInsensitive</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_splitModel</span><span class="p">(</span><span class="n">modelNames</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">modelNames</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; not in model list&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_modelNames</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.setUseParentModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setUseParentModel">[docs]</a>    <span class="k">def</span> <span class="nf">setUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yesno</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets whether the TaurusCurves of this plot should use the plot&#39;s parent model</span>

<span class="sd">        :param yesno: (bool) if True, the curves in the plot will use the Plot&#39;s</span>
<span class="sd">                      parent model</span>

<span class="sd">        .. seealso:: :meth:`TaurusBaseComponent.setParentModel` &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="n">yesno</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_designMode</span><span class="p">:</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;UseParentModel usage note&quot;</span><span class="p">,</span>
                                       <span class="s2">&quot;Using the UseParentModel feature may require you to call &quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot;recheckTaurusParent() manually for this widget after calling &quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot;setupUi in your code.&quot;</span> <span class="o">+</span>
                                       <span class="s2">&quot;See the documentation of TaurusBaseWidget.recheckTaurusParent()&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_useParentModel</span> <span class="o">=</span> <span class="n">yesno</span>

        <span class="n">parent_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParentTaurusComponent</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">parent_widget</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">yesno</span><span class="p">:</span>
                <span class="n">parent_widget</span><span class="o">.</span><span class="n">modelChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentModelChanged</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parent_widget</span><span class="o">.</span><span class="n">modelChanged</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentModelChanged</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">curve</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">setUseParentModel</span><span class="p">(</span><span class="n">yesno</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getUseParentModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getUseParentModel">[docs]</a>    <span class="k">def</span> <span class="nf">getUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;See: :meth:`TaurusBaseComponent.getParentModel`&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_useParentModel</span></div>

<div class="viewcode-block" id="TaurusPlot.resetUseParentModel"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetUseParentModel">[docs]</a>    <span class="k">def</span> <span class="nf">resetUseParentModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;equivalent to setUseParentModel(False)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setUseParentModel</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~</span>
    <span class="c1"># legend properties</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~</span>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.setLegendPosition"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setLegendPosition">[docs]</a>    <span class="k">def</span> <span class="nf">setLegendPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Specify the position of the legend relative to the plot</span>

<span class="sd">        :param pos: (Qwt5.QwtPlot.LegendPosition)</span>

<span class="sd">        .. seealso:: :meth:`Qwt5.QwtPlot.LegendPosition`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">LeftLegend</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">RightLegend</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">BottomLegend</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">TopLegend</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">=</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">ExternalLegend</span>

        <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">l</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">insertLegend</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getLegendPosition"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getLegendPosition">[docs]</a>    <span class="k">def</span> <span class="nf">getLegendPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the current legend position</span>

<span class="sd">        :return: (Qwt5.QwtPlot.LegendPosition)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">LeftLegend</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">RightLegend</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">BottomLegend</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">TopLegend</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">3</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legendPos</span> <span class="o">==</span> <span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">ExternalLegend</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">4</span></div>

<div class="viewcode-block" id="TaurusPlot.resetLegendPosition"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetLegendPosition">[docs]</a>    <span class="k">def</span> <span class="nf">resetLegendPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;equivalent to setLegendPosition(Qwt5.QwtPlot.RightLegend)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLegendPosition</span><span class="p">(</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">RightLegend</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.setDefaultCurvesTitle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setDefaultCurvesTitle">[docs]</a>    <span class="k">def</span> <span class="nf">setDefaultCurvesTitle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">titletext</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;sets the default title to be used for curves attached to this plot</span>
<span class="sd">        (the title is used, for example in the legend). Note that this does not</span>
<span class="sd">        affect to already existing curves. If you want that, see setCurvesTitle.</span>

<span class="sd">        :param titletext: (str) the default text to be used for the titles of curves. It may contain any of the placeholders described in TaurusCurve.setTitleText</span>

<span class="sd">        .. seealso:: :meth:`setCurvesTitle`, :meth:`TaurusCurve.setTitleText`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_defaultCurvesTitle</span> <span class="o">=</span> <span class="n">titletext</span></div>

<div class="viewcode-block" id="TaurusPlot.getDefaultCurvesTitle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getDefaultCurvesTitle">[docs]</a>    <span class="k">def</span> <span class="nf">getDefaultCurvesTitle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;See setDefaultCurvesTitle&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaultCurvesTitle</span></div>

<div class="viewcode-block" id="TaurusPlot.resetDefaultCurvesTitle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetDefaultCurvesTitle">[docs]</a>    <span class="k">def</span> <span class="nf">resetDefaultCurvesTitle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;resets the defaultCurvesTitle property to &#39;&lt;label&gt;&#39;</span>

<span class="sd">        .. seealso:: :meth:`setDefaultCurvesTitle`&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDefaultCurvesTitle</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TaurusPlot.setCurvesTitle"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setCurvesTitle">[docs]</a>    <span class="k">def</span> <span class="nf">setCurvesTitle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">titletext</span><span class="p">,</span> <span class="n">curveNamesList</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Changes the titles of current curves.</span>

<span class="sd">        :param titletext:      (str) string to use as title for the curves. It may</span>
<span class="sd">                               include placeholders as those defined in TaurusCurve.compileTitleText()</span>
<span class="sd">        :param curveNamesList: (sequence&lt;str&gt; or iterator&lt;str&gt;) names of the</span>
<span class="sd">                               curves to which the title will be changed (if None given , it will apply</span>
<span class="sd">                               to all the curves except the raw data ones)</span>

<span class="sd">        :return: (caselessDict&lt;str,str&gt;) dictionary with key=curvename and value=newtitle</span>

<span class="sd">        .. seealso:: :meth:`changeCurvesTitlesDialog`,</span>
<span class="sd">                     :meth:`setDefaultCurvesTitle`, :meth:`TaurusCurve.setTitleText`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">curveNamesList</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">curveNamesList</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">n</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">isRawData</span><span class="p">]</span>
            <span class="n">newTitlesDict</span> <span class="o">=</span> <span class="n">CaselessDict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">curveName</span> <span class="ow">in</span> <span class="n">curveNamesList</span><span class="p">:</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">curveName</span><span class="p">)</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">setTitleText</span><span class="p">(</span><span class="n">titletext</span><span class="p">)</span>
                <span class="n">newTitlesDict</span><span class="p">[</span><span class="n">curveName</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateLegend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">newTitlesDict</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.changeCurvesTitlesDialog"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.changeCurvesTitlesDialog">[docs]</a>    <span class="k">def</span> <span class="nf">changeCurvesTitlesDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curveNamesList</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Shows a dialog to set the curves titles (it will change the current</span>
<span class="sd">        curves titles and the default curves titles)</span>

<span class="sd">        :param curveNamesList: (sequence&lt;str&gt; or iterator&lt;str&gt;) names of the</span>
<span class="sd">                               curves to which the title will be changed (if</span>
<span class="sd">                               None given , it will apply to all the curves</span>
<span class="sd">                               except the raw data ones and it will also be used</span>
<span class="sd">                               as default for newly created ones)</span>

<span class="sd">        :return: (caselessDict&lt;str,str&gt;) dictionary with key=curvename and value=newtitle</span>

<span class="sd">        .. seealso:: :meth:`setCurvesTitle`, :meth:`setDefaultCurvesTitle`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">newTitlesDict</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">placeholders</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&lt;label&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;model&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;attr_name&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;attr_fullname&gt;&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;&lt;dev_alias&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;dev_name&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;dev_fullname&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;current_title&gt;&#39;</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">current</span> <span class="o">=</span> <span class="n">placeholders</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_defaultCurvesTitle</span><span class="p">)</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">placeholders</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">current</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">placeholders</span><span class="p">)</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">placeholders</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_defaultCurvesTitle</span><span class="p">]</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;New text to be used for the curves.</span><span class="se">\n</span><span class="s1">You can use any of the following placeholders:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">placeholders</span><span class="p">)</span>
        <span class="n">titletext</span><span class="p">,</span> <span class="n">ok</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QInputDialog</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;New Title for Curves&#39;</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">current</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
            <span class="n">titletext</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">titletext</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">curveNamesList</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setDefaultCurvesTitle</span><span class="p">(</span><span class="n">titletext</span><span class="p">)</span>
            <span class="n">newTitlesDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setCurvesTitle</span><span class="p">(</span>
                <span class="n">titletext</span><span class="p">,</span> <span class="n">curveNamesList</span><span class="o">=</span><span class="n">curveNamesList</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">newTitlesDict</span></div>

    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~</span>
    <span class="c1"># Axes properties</span>
    <span class="c1">#-~-~-~-~-~-~-~-~-~-~-~-~</span>
<div class="viewcode-block" id="TaurusPlot.setXIsTime"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setXIsTime">[docs]</a>    <span class="k">def</span> <span class="nf">setXIsTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Specifies whether we the plot is in Time or in normal mode (i.e,</span>
<span class="sd">        whether the abscissas should be interpreted as unix epoch values or not)</span>

<span class="sd">        :param enable:  (bool) if True, the plot will be in Time Mode</span>
<span class="sd">        :param axis: (Qwt5.QwtPlot.xBottom or Qwt5.QwtPlot.xTop) the X axis to</span>
<span class="sd">                     which this setting applies. (Default=Qwt5.QwtPlot.xBottom)</span>

<span class="sd">        .. seealso:: :ref:`TaurusPlot user manual &lt;taurusplottime&gt;`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">enable</span><span class="p">:</span>
            <span class="n">DateTimeScaleEngine</span><span class="o">.</span><span class="n">enableInAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_axesnames</span><span class="p">[</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;T&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">DateTimeScaleEngine</span><span class="o">.</span><span class="n">disableInAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_axesnames</span><span class="p">[</span><span class="n">Qwt5</span><span class="o">.</span><span class="n">QwtPlot</span><span class="o">.</span><span class="n">xBottom</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;X&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer1</span><span class="o">.</span><span class="n">setXIsTime</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer2</span><span class="o">.</span><span class="n">setXIsTime</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xIsTime</span> <span class="o">=</span> <span class="n">enable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>

<div class="viewcode-block" id="TaurusPlot.getXIsTime"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getXIsTime">[docs]</a>    <span class="k">def</span> <span class="nf">getXIsTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns whether the X axis is in &quot;Time mode&quot;</span>

<span class="sd">        :return: (bool) True means the X axis is in Time mode, False</span>

<span class="sd">        .. seealso:: :meth:`setXIsTime`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xIsTime</span></div>

<div class="viewcode-block" id="TaurusPlot.resetXIsTime"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetXIsTime">[docs]</a>    <span class="k">def</span> <span class="nf">resetXIsTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;equivalent to setXIsTime(False)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setXIsTime</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.setAllowZoomers"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setAllowZoomers">[docs]</a>    <span class="k">def</span> <span class="nf">setAllowZoomers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allow</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;enable/disable the zoomers for the plot. (The zoomers provide zooming</span>
<span class="sd">        by selecting a region of the plot)</span>

<span class="sd">        :param allow: (bool) If True, zoomers are enabled, otherwise, they are disabled</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_allowZoomers</span> <span class="o">=</span> <span class="n">allow</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zoomer</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">allow</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.getAllowZoomers"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getAllowZoomers">[docs]</a>    <span class="k">def</span> <span class="nf">getAllowZoomers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Whether the Zoomers are enabled for this plot</span>

<span class="sd">        :return: (bool)</span>

<span class="sd">        .. seealso:: :meth:`setAllowZoomers`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowZoomers</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
<div class="viewcode-block" id="TaurusPlot.resetAllowZoomers"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetAllowZoomers">[docs]</a>    <span class="k">def</span> <span class="nf">resetAllowZoomers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;same as setAllowZoomers(True)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setAllowZoomers</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.setPannerEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setPannerEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">setPannerEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Specify whether the plot can be panned (i.e., dragged around to navigate it)</span>

<span class="sd">        :param enable: (bool) If True, panning is enabled, otherwise, it is disabled</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_panner</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.isPannerEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.isPannerEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isPannerEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Whether the Panner is enabled for this plot</span>

<span class="sd">        :return: (bool)</span>

<span class="sd">        .. seealso:: :meth:`setPannerEnabled`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_panner</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">()</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
<div class="viewcode-block" id="TaurusPlot.resetPannerEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetPannerEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">resetPannerEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;same as setPannerEnabled(True)&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPannerEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.setMagnifierEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setMagnifierEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">setMagnifierEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Specify whether the plot can be magnified (i.e. zoomed in and out</span>
<span class="sd">        with the mousewheel)</span>

<span class="sd">        :param enable: (bool) If True, magnifying is enabled, otherwise, it is disabled</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_magnifier</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.isMagnifierEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.isMagnifierEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isMagnifierEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Whether the magnifier is enabled for this plot</span>

<span class="sd">        :return: (bool)</span>

<span class="sd">        .. seealso:: :meth:`setMagnifierEnabled`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_magnifier</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">()</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
<div class="viewcode-block" id="TaurusPlot.resetMagnifierEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetMagnifierEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">resetMagnifierEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;same as `setMagnifierEnabled(True)`&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMagnifierEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.setOptimizationEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.setOptimizationEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">setOptimizationEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Specify whether the plot should use paint optimizations</span>

<span class="sd">        :param enable: (bool) If True, optimization is enabled, otherwise, it is disabled</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># set the optimized flag for use with new curves</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_optimizationEnabled</span> <span class="o">=</span> <span class="n">enable</span>
        <span class="c1"># make sure that already-created curves are also optimized</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">curveName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">():</span>
                <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">curveName</span><span class="p">))</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">setPaintAttribute</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">PaintFiltered</span><span class="p">,</span> <span class="n">enable</span><span class="p">)</span>
                <span class="n">curve</span><span class="o">.</span><span class="n">setPaintAttribute</span><span class="p">(</span><span class="n">curve</span><span class="o">.</span><span class="n">ClipPolygons</span><span class="p">,</span> <span class="n">enable</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<div class="viewcode-block" id="TaurusPlot.isOptimizationEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.isOptimizationEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isOptimizationEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Whether painting optimization is enabled for this plot</span>

<span class="sd">        :return: (bool)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_optimizationEnabled</span></div>

    <span class="nd">@Qt</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
<div class="viewcode-block" id="TaurusPlot.resetOptimizationEnabled"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.resetOptimizationEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">resetOptimizationEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Equivalent to `setOptimizationEnabled(True)`</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setOptimizationEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="TaurusPlot.getQtDesignerPluginInfo"><a class="viewcode-back" href="../../../../../devel/api/taurus/qt/qtgui/plot/_TaurusPlot.html#taurus.qt.qtgui.plot.TaurusPlot.getQtDesignerPluginInfo">[docs]</a>    <span class="k">def</span> <span class="nf">getQtDesignerPluginInfo</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns pertinent information in order to be able to build a valid</span>
<span class="sd">        QtDesigner widget plugin</span>

<span class="sd">        :return: (dict) a map with pertinent designer information&quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">TaurusBaseWidget</span><span class="o">.</span><span class="n">getQtDesignerPluginInfo</span><span class="p">()</span>
        <span class="n">ret</span><span class="p">[</span><span class="s1">&#39;module&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;taurus.qt.qtgui.plot&#39;</span>
        <span class="n">ret</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Taurus Display&#39;</span>
        <span class="n">ret</span><span class="p">[</span><span class="s1">&#39;icon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;designer:qwtplot.png&#39;</span>
        <span class="k">return</span> <span class="n">ret</span></div>

    <span class="c1">##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
    <span class="c1">#                      Qt Properties                        #</span>
    <span class="c1">##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>

    <span class="n">gridColor</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span>
        <span class="s2">&quot;QColor&quot;</span><span class="p">,</span> <span class="n">getGridColor</span><span class="p">,</span> <span class="n">setGridColor</span><span class="p">,</span> <span class="n">resetGridColor</span><span class="p">)</span>
    <span class="n">gridWidth</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span>
        <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">getGridWidth</span><span class="p">,</span> <span class="n">setGridWidth</span><span class="p">,</span> <span class="n">resetGridWidth</span><span class="p">)</span>
    <span class="n">legendPosition</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span>
        <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">getLegendPosition</span><span class="p">,</span> <span class="n">setLegendPosition</span><span class="p">,</span> <span class="n">resetLegendPosition</span><span class="p">)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span><span class="s2">&quot;QStringList&quot;</span><span class="p">,</span> <span class="n">getModel</span><span class="p">,</span> <span class="n">setModel</span><span class="p">,</span> <span class="n">resetModel</span><span class="p">)</span>
    <span class="n">useParentModel</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span>
        <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="n">getUseParentModel</span><span class="p">,</span> <span class="n">setUseParentModel</span><span class="p">,</span> <span class="n">resetUseParentModel</span><span class="p">)</span>
    <span class="n">xIsTime</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span><span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="n">getXIsTime</span><span class="p">,</span> <span class="n">setXIsTime</span><span class="p">,</span> <span class="n">resetXIsTime</span><span class="p">)</span>
    <span class="n">allowZoomers</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span>
        <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="n">getAllowZoomers</span><span class="p">,</span> <span class="n">setAllowZoomers</span><span class="p">,</span> <span class="n">resetAllowZoomers</span><span class="p">)</span>
    <span class="n">enablePanner</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span>
        <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="n">isPannerEnabled</span><span class="p">,</span> <span class="n">setPannerEnabled</span><span class="p">,</span> <span class="n">resetPannerEnabled</span><span class="p">)</span>
    <span class="n">enableMagnifier</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span>
        <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="n">isMagnifierEnabled</span><span class="p">,</span> <span class="n">setMagnifierEnabled</span><span class="p">,</span> <span class="n">resetMagnifierEnabled</span><span class="p">)</span>
    <span class="n">defaultCurvesTitle</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span>
        <span class="s2">&quot;QString&quot;</span><span class="p">,</span> <span class="n">getDefaultCurvesTitle</span><span class="p">,</span> <span class="n">setDefaultCurvesTitle</span><span class="p">,</span> <span class="n">resetDefaultCurvesTitle</span><span class="p">)</span>
    <span class="n">enableOptimization</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">pyqtProperty</span><span class="p">(</span>
        <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="n">isOptimizationEnabled</span><span class="p">,</span> <span class="n">setOptimizationEnabled</span><span class="p">,</span> <span class="n">resetOptimizationEnabled</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="kn">import</span> <span class="nn">taurus.qt.qtgui.application</span>
    <span class="kn">import</span> <span class="nn">taurus.core.util.argparse</span>

    <span class="n">parser</span> <span class="o">=</span> <span class="n">taurus</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">argparse</span><span class="o">.</span><span class="n">get_taurus_parser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">set_usage</span><span class="p">(</span><span class="s2">&quot;%prog [options] [&lt;model1&gt; [&lt;model2&gt;] ...]&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="s2">&quot;a taurus application for plotting 1D data sets&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;-x&quot;</span><span class="p">,</span> <span class="s2">&quot;--x-axis-mode&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;x_axis_mode&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;t|n&quot;</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s2">&quot;interprete X values as either timestamps (t) or numbers (n). Accepted values: t|n (e is also accepted as a synonim of n)&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;--config&quot;</span><span class="p">,</span> <span class="s2">&quot;--config-file&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;config_file&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s2">&quot;use the given config file for initialization&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;--export&quot;</span><span class="p">,</span> <span class="s2">&quot;--export-file&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;export_file&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">help</span><span class="o">=</span><span class="s2">&quot;use the given file to as output instead of showing the plot&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;--window-name&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;window_name&quot;</span><span class="p">,</span>
                      <span class="n">default</span><span class="o">=</span><span class="s2">&quot;TaurusPlot&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Name of the window&quot;</span><span class="p">)</span>

    <span class="n">app</span> <span class="o">=</span> <span class="n">taurus</span><span class="o">.</span><span class="n">qt</span><span class="o">.</span><span class="n">qtgui</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">TaurusApplication</span><span class="p">(</span><span class="n">cmd_line_parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span>
                                                        <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;taurusplot&quot;</span><span class="p">,</span>
                                                        <span class="n">app_version</span><span class="o">=</span><span class="n">taurus</span><span class="o">.</span><span class="n">Release</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">get_command_line_args</span><span class="p">()</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">get_command_line_options</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">x_axis_mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">]:</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">print_help</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">models</span> <span class="o">=</span> <span class="n">args</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">TaurusPlot</span><span class="p">()</span>
    <span class="n">w</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">window_name</span><span class="p">)</span>

    <span class="n">w</span><span class="o">.</span><span class="n">setXIsTime</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">x_axis_mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;t&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">config_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">w</span><span class="o">.</span><span class="n">loadConfig</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">config_file</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">models</span><span class="p">:</span>
        <span class="n">w</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">models</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">export_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">curves</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">trendSets</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">exportIfAllCurves</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="n">trend</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">counters</span><span class="o">=</span><span class="n">curves</span><span class="p">):</span>
            <span class="n">curve</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">curve</span><span class="p">)</span>
            <span class="nb">print</span> <span class="s1">&#39;*&#39;</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="s1">&#39; </span><span class="si">%s</span><span class="s1">: Event received for </span><span class="si">%s</span><span class="s1">  &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="n">curve</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;*&#39;</span> <span class="o">*</span> <span class="mi">10</span>
            <span class="k">if</span> <span class="n">curve</span> <span class="ow">in</span> <span class="n">counters</span><span class="p">:</span>
                <span class="n">counters</span><span class="p">[</span><span class="n">curve</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">counters</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
                    <span class="n">trend</span><span class="o">.</span><span class="n">exportPdf</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">export_file</span><span class="p">)</span>
                    <span class="nb">print</span> <span class="s1">&#39;*&#39;</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="s1">&#39; </span><span class="si">%s</span><span class="s1">: Exported to : </span><span class="si">%s</span><span class="s1">  &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span> <span class="n">options</span><span class="o">.</span><span class="n">export_file</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;*&#39;</span> <span class="o">*</span> <span class="mi">10</span>
                    <span class="n">trend</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">curves</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ts</span> <span class="ow">in</span> <span class="n">w</span><span class="o">.</span><span class="n">trendSets</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">ts</span><span class="o">.</span><span class="n">dataChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">exportIfAllCurves</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>  <span class="c1"># exit without showing the widget</span>

    <span class="c1"># show the widget</span>
    <span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="c1"># if no models are passed, show the data import dialog</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">models</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">options</span><span class="o">.</span><span class="n">config_file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">w</span><span class="o">.</span><span class="n">showDataImportDlg</span><span class="p">()</span>

    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../',
            VERSION:'4.1.2-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>